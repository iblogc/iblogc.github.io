{"title":"Git patch的简单运用","slug":"git-patch的简单运用","date":"2015-10-15T12:49:40.000Z","updated":"2020-08-15T03:06:15.504Z","comments":true,"path":"api/articles/git-patch的简单运用.json","excerpt":"生成PATCH往前n个提前内容的patch<br>1<br>git format-patch -n<br>某个commit（含）的及之前的n-1次提交的patch<br>1<br>git format-patch -n SHA<br>","covers":null,"content":"<h2 id=\"生成PATCH\"><a href=\"#生成PATCH\" class=\"headerlink\" title=\"生成PATCH\"></a>生成PATCH</h2><p>往前n个提前内容的patch<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git format-patch -n</span><br></pre></td></tr></table></figure></p>\n<p>某个commit（含）的及之前的n-1次提交的patch<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git format-patch -n SHA</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p>某个commit的patch<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git format-patch -1 SHA</span><br></pre></td></tr></table></figure></p>\n<p>当前分支所有超前master提交的patch<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git format-patch -M master</span><br></pre></td></tr></table></figure></p>\n<p>两个commit之间的所有patch（不包含较早SHA1提交的内容）<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git format-patch SHA1...SHA1</span><br></pre></td></tr></table></figure></p>\n<p>某个commit之后的所有patch<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git format-patch -s SHA</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"应用PATCH\"><a href=\"#应用PATCH\" class=\"headerlink\" title=\"应用PATCH\"></a>应用PATCH</h2><p>检查patch<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git apply --stat xxx.patch</span><br></pre></td></tr></table></figure></p>\n<p>检查能否应用成功<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git apply --check xxx.patch</span><br></pre></td></tr></table></figure></p>\n<p>打补丁<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git am -s xxx.patch</span><br></pre></td></tr></table></figure></p>\n<p>如果有冲突，整个PATCH都不会被集成，接来来解决冲突问题<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 把没有冲突的文件先合并了，剩下有冲突的作了标记</span><br><span class=\"line\">git apply PATCH --reject</span><br><span class=\"line\"># 这里手动解决冲突</span><br><span class=\"line\"># 把解决冲突的和PATCH里新加的文件全部add进来，因为git am并不会改变index</span><br><span class=\"line\">git add FIXED_FILES</span><br><span class=\"line\">git am --resolved</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><p><a href=\"http://blog.csdn.net/daydring/article/details/42676987\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/daydring/article/details/42676987</a></p>\n","categories":[{"name":"程序猿","path":"api/categories/程序猿.json"}],"tags":[{"name":"Git","path":"api/tags/Git.json"}]}