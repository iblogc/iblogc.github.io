{"title":"Git后悔药","slug":"git-reset","date":"2019-07-25T10:33:09.000Z","updated":"2020-01-19T07:41:07.687Z","comments":true,"path":"api/articles/git-reset.json","excerpt":"使用git提交代码过程中有时会手抖提交错误代码，这时就需要用到git的后悔药reset操作。","covers":null,"content":"<p>使用git提交代码过程中有时会手抖提交错误代码，这时就需要用到git的后悔药reset操作。</p>\n<a id=\"more\"></a>\n<div id=\"sequence-0\"></div>\n\n<h3 id=\"差异（diff）\"><a href=\"#差异（diff）\" class=\"headerlink\" title=\"差异（diff）\"></a>差异（diff）</h3><p>工作区vs暂存区: <code>git diff</code></p>\n<p>暂存区vs本地仓库: <code>git diff —cached</code></p>\n<p>本地仓库vs远程仓库: <code>git diff &lt;分支名&gt; origin/&lt;分支名&gt;</code></p>\n<h3 id=\"撤消（reset）\"><a href=\"#撤消（reset）\" class=\"headerlink\" title=\"撤消（reset）\"></a>撤消（reset）</h3><p>撤消工作区修改: <code>git reset —hard</code></p>\n<p>撤消(1)<code>git add</code>: <code>git reset &amp;&amp; git checkout .</code>或<code>git reset —hard</code>(会还原所有修改)</p>\n<p>撤消(2) <code>git commit</code>: <code>git reset --hard origin/master</code>(使用远端的master分支恢复到本地)</p>\n<p>撤消(3) <code>git push</code>: <code>git reset --hard HEAD^ &amp;&amp; git push -f</code>(先在本地回到上一个版本，然后强推到远端)<script src=\"https://cdnjs.cloudflare.com/ajax/libs/webfont/1.6.27/webfontloader.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.4.1/snap.svg-min.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js\"></script><script src=\"https://cdnjs.cloudflare.com/ajax/libs/js-sequence-diagrams/1.0.6/sequence-diagram-min.js\"></script><textarea id=\"sequence-0-code\" style=\"display: none\">title: git reset\nparticipant 工作区\nparticipant 暂存区\nparticipant 本地仓库\nparticipant 远程仓库\n\n 工作区->暂存区:(1) git add\n 暂存区->本地仓库:(2) git commit\n 本地仓库->远程仓库:(3) git push</textarea><textarea id=\"sequence-0-options\" style=\"display: none\">{\"theme\":\"simple\"}</textarea><script>  var code = document.getElementById(\"sequence-0-code\").value;  var options = JSON.parse(decodeURIComponent(document.getElementById(\"sequence-0-options\").value));  var diagram = Diagram.parse(code);  diagram.drawSVG(\"sequence-0\", options);</script></p>\n","categories":[{"name":"程序猿","path":"api/categories/程序猿.json"}],"tags":[{"name":"Git","path":"api/tags/Git.json"},{"name":"reset","path":"api/tags/reset.json"},{"name":"恢复","path":"api/tags/恢复.json"},{"name":"后悔","path":"api/tags/后悔.json"}]}