<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ä»£ç æ‰˜ç®¡å¹³å°ç äº‘(Gitee)åˆ°Giteaè¿ç§»è®°]]></title>
    <url>%2F2020%2F03%2F01%2FGitee2Gitea%2F</url>
    <content type="text"><![CDATA[å›¢é˜Ÿçš„ä»£ç æ‰˜ç®¡ç®¡ç†å¹³å°ä¹‹å‰ä¸€ç›´ç”¨Giteeçš„ä¼ä¸šç‰ˆæœ¬ï¼Œä½†é™¤äº†ä»£ç pull/pushæ“ä½œå¤–ï¼ŒåŸºæœ¬ä¸ç”¨å¹³å°ä¸Šå…¶å®ƒåŠŸèƒ½ï¼Œé™¤äº†è¦æ–°å»ºä¸€ä¸ªä»“åº“è¦æ‰“å¼€ä¸‹ç½‘é¡µç‰ˆï¼Œå…¶å®ƒæ—¶é—´åŸºæœ¬ä¸ä¼šè®¿é—®ç½‘é¡µç‰ˆæœ¬ï¼Œæ‰€ä»¥ç»è¿‡åŠå¤©çš„è°ƒç ”ï¼Œä»GitLab/Gogs/Giteaä¸­é€‰æ‹©äº†Giteaï¼ŒæŠŠè¿ç§»è¿‡ç¨‹è®°å½•å¦‚ä¸‹ã€‚ å®‰è£…Giteaå› ä¸ºæœåŠ¡å™¨ä¸Šåˆšå¥½è£…æœ‰dockerï¼ŒæŒ‰ç…§å®˜æ–¹æ–‡æ¡£é€‰æ‹©äº†æœ€ç®€å•çš„dockerå®‰è£…ã€‚ 12345docker pull gitea/gitea:latestsudo mkdir -p /data/giteadocker run -d --name=gitea -p 10022:22 -p 10080:3000 -v /data/gitea:/data gitea/gitea:latest// é‡å¯giteadocker restart gitea å®‰è£…å®Œæˆåé‡åˆ°äº†é¡µé¢æœ‰ä¸‰ä¸ªé™æ€æ–‡ä»¶ï¼ˆcss/jsï¼‰åŠ è½½ä¸æˆåŠŸï¼Œå¯¼è‡´é¡µé¢æ’ç‰ˆæ··ä¹±ï¼ŒF12æŸ¥çœ‹æ§åˆ¶å°æŠ¥é”™net::ERR_CONTENT_LENGTH_MISMATCHï¼Œgoogleä¹‹ï¼Œæ‰¾åˆ°è¿™ç¯‡æ–‡ç«  Nginx åšä»£ç†æ—¶æµè§ˆå™¨æŠ¥é”™ net::ERR_CONTENT_LENGTH_MISMATCHï¼ŒæŒ‰ç…§æ­¤æ–¹æ³•è§£å†³ã€‚ é…ç½®Nginxåœ¨æœåŠ¡å™¨Nginxä¸Šé…ç½®åå‘ä»£ç† vi /etc/nginx/conf.d/gitea.conf 1234567891011121314upstream gitea &#123; server 127.0.0.1:10080; keepalive 2000;&#125;server &#123; listen 80; server_name git.i.example.com; client_max_body_size 1024M; location / &#123; proxy_pass http://gitea/; proxy_set_header Host $host:$server_port; &#125;&#125; é‡æ–°åŠ è½½é…ç½® 1sudo nginx -s reload åŸŸåè§£ægit.i.example.comè§£æåˆ°å½“å‰æœåŠ¡å™¨ipï¼Œå¹¶æŠŠæœåŠ¡å™¨é˜²ç«å¢™å…¥æ–¹å‘çš„10022 tcpç«¯å£æ‰“å¼€ï¼Œä»¥ä¾¿ä½¿ç”¨sshæ–¹å¼cloneä»“åº“æ—¶ä½¿ç”¨ã€‚ Giteaåˆå§‹åŒ–æ‰“å¼€http://.i.example.comï¼Œè¿›å…¥åˆå§‹åŒ–ç•Œé¢ï¼ˆå¦‚æœæ²¡è¿›éšä¾¿ç‚¹æ³¨å†Œæˆ–ç™»å½•å°±ä¼šè¿›ï¼‰ï¼Œé™¤äº†æ•°æ®åº“æ ¹æ®éœ€è¦é…ç½®ï¼Œå‡ ä¸ªåŸŸåå’Œç½‘å€è¦ä¿®æ”¹ä¸‹ï¼Œé‚®ç®±å’Œå…¶å®ƒé€‰é¡¹æŒ‰éœ€é…ç½®ã€‚ä»¥åå¦‚æœæƒ³ä¿®æ”¹é…ç½®ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹/data/gitea/gitea/conf/app.iniæ–‡ä»¶é…ç½®è¯´æ˜ï¼Œä¿®æ”¹å®Œæˆåé‡å¯ä¸‹giteaå³å¯ç”Ÿæ•ˆã€‚ ä»“åº“è¿ç§»å› ä¸ºæˆ‘è¿ç§»çš„æ˜¯å›¢é˜Ÿé¡¹ç›®ï¼Œæ‰€ä»¥å…ˆé€šè¿‡Giteaæä¾›çš„APIæŠŠæ‰€æœ‰ä»“åº“ä»¥é•œåƒæ–¹å¼ï¼ˆé•œåƒæ–¹å¼åŒæ­¥è¿‡æ¥ä»“åº“å¯¹æˆå‘˜ä¸ºåªè¯»ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®é—´éš”æ—¶é—´ï¼Œé»˜è®¤8å°æ—¶ï¼Œå®šæ—¶ä»åŸå§‹åœ°å€GiteeåŒæ­¥æœ€æ–°ä»£ç ï¼‰åŒæ­¥è¿‡æ¥[æ“ä½œ1]ï¼Œç„¶åä¸ºæ¯ä¸ªé¡¹ç›®é…ç½®å¥½åä½œè€…/å›¢é˜Ÿ/æƒé™ç­‰è®¾ç½®ï¼Œåœ¨è¿™æœŸé—´ï¼Œå›¢é˜Ÿæˆå‘˜è¿˜æ˜¯å¾€Giteeä¸Šæäº¤ä»£ç ï¼Œå¾…å…¨éƒ¨è®¾ç½®å®Œæˆåå–æ¶ˆå‘ŠçŸ¥å›¢é˜Ÿæˆå‘˜ä¸è¦å¾€Giteeæäº¤ä»£ç ï¼Œå¹¶è°ƒç”¨Giea apiæŠŠæ‰€æœ‰ä»“åº“ä»Giteeä¸ŠåŒæ­¥ä¸€ä¸‹æœ€æ–°ä»£ç [æ“ä½œ2]ï¼Œç„¶åæ¯ä¸ªä»“åº“ä»é•œåƒä»“åº“è½¬ä¸ºæ™®é€šä»“åº“ï¼Œå¹¶è®©å›¢é˜Ÿçš„æ‰€æœ‰åœ¨è‡ªå·±ä»“åº“æ ¹ç›®å½•æ‰§è¡Œä¿®æ”¹æœ¬åœ°ä»“åº“Gitè¿œç¨‹ä»“åº“åœ°å€æ›¿æ¢æ“ä½œ[æ“ä½œ3] [æ“ä½œ1]ï¼šç™»å½•Giteaåï¼Œç•Œé¢å³ä¸Šè§’æœ‰ä¸€ä¸ªåŠ å·ï¼Œç‚¹å¼€äº†åæœ‰ä¸€ä¸ªè¿ç§»å¤–éƒ¨ä»“åº“çš„åŠŸèƒ½ï¼Œåªè¦å¡«å…¥å¤–éƒ¨ä»“åº“URLï¼ŒæˆæƒéªŒè¯ä¿¡æ¯ç­‰ä¿¡æ¯å°±å¯ä»¥ä¸€é”®æŠŠå¤–éƒ¨ä»“åº“çš„æ‰€æœ‰ä»£ç ï¼ˆåŒ…æ‹¬æ‰€æœ‰branchå’Œcommitï¼‰è¿ç§»åˆ°Giteaï¼Œå¦‚æœè¦è¿ç§»çš„ä»“åº“æ¯”è¾ƒå¤šï¼Œå¯ä»¥ä½¿ç”¨Giteaæä¾›çš„Apiæ¥æ“ä½œã€‚å¯¹åº”æ­¤è¿ç§»æ“ä½œçš„apiæ˜¯ 1234567891011121314151617181920POST /repos/migrate?access_token=&lt;your gitea admin access token&gt;Request body&#123; description: MigrateRepoForm form for migrating repository auth_password: string auth_username: string clone_addr*: string description: string issues: boolean labels: boolean milestones: boolean mirror: boolean private: boolean pull_requests: boolean releases: boolean repo_name*: string uid*: integer($int64) wiki: boolean&#125; æ³¨ï¼š access_token è¯·åœ¨æœ‰ç®¡ç†å‘˜æƒé™çš„è´¦å·çš„è®¾ç½®&gt;åº”ç”¨ä¸­åˆ›å»ºï¼› Request body ä¸­çš„uidå³ç®¡ç†åå°&gt;è´¦æˆ·ç®¡ç†/ç»„ç»‡ç®¡ç†ä¸­çš„IDåˆ—å€¼ï¼› æ‰¾äº†Giteeæ²¡æ‰¾åˆ°å¯ä»¥è·å–è´¦æˆ·ä¸‹æ‰€æœ‰ä»“åº“ä¿¡æ¯çš„APIï¼Œæ‰€ä»¥åªå¥½æ‰‹å†™äº†ä¸€ä¸ªGiteeä»“åº“åœ°å€çš„æ–‡ä»¶ï¼Œç±»ä¼¼ vi gitee-url.txt 12https://gitee.com/example/project_a.githttps://gitee.com/example/project_b.git ä½¿ç”¨shellè„šæœ¬é€è¡Œè¯»å–urlï¼Œå¹¶è°ƒç”¨Gitea apiè¿ç§»ä»“åº“ã€‚ 12345678910#!/bin/bashfor line in $(&lt;gitee-url.txt);do # Windowsæ³¨é‡Šä¸‹é¢è¿™è¡Œ line=$(echo $line | sed -e 's/\r//g'); tmp=$&#123;line#https://gitee.com/xxx/&#125;; project_name=$&#123;tmp%.git&#125;; curl -X POST "http://git.i.example.com/api/v1/repos/migrate?access_token=&lt;your gitea admin access token&gt;" -H "accept: application/json" -H "Content-Type: application/json" -d "&#123; \"auth_password\": \"NDY2&amp;F*K!hL75y*z\", \"auth_username\": \"korvin101@gmail.com\", \"clone_addr\": \"$line\", \"issues\": true, \"labels\": true, \"milestones\": true, \"mirror\": true, \"private\": true, \"pull_requests\": true, \"releases\": true, \"repo_name\": \"$project_name\", \"uid\": 2, \"wiki\": true&#125;";done [æ“ä½œ2]ï¼šä»Giteeä¸ŠåŒæ­¥æœ€æ–°ä»£ç  1234567for line in $(&lt;gitee-url.txt);do line=$(echo $line | sed -e 's/\r//g'); tmp=$&#123;line#https://gitee.com/xxx/&#125;; project_name=$&#123;tmp%.git&#125;; curl -X POST "http://git.i.example.com/api/v1/repos/&#123;owner&#125;/$project_name/mirror-sync?access_token=&lt;your gitea admin access token&gt;" -H "accept: application/json"done æ³¨ï¼šownerä¸ºé¡¹ç›®æ‹¥æœ‰è€…ç”¨æˆ·å/ç»„ç»‡å [æ“ä½œ3]ï¼šåŸæœ¬åœ°ä»“åº“Gitè¿œç¨‹ä»“åº“åœ°å€æ›¿æ¢ 123456789101112131415// httpåœ°å€// åŸä»£ç ä»“åº“httpåœ°å€ï¼šhttps://gitee.com/example/project_a.git// æ–°ä»£ç ä»“åº“httpåœ°å€ï¼šhttp://git.i.example.com/JIANSU/project_a.git// https://gitee.com/example &gt; http://git.i.example.com/JIANSU// æœ¬åœ°ä»“åº“ä½¿ç”¨æ­¤å‘½ä»¤æ›¿æ¢ï¼Œå¯åœ¨åŒ…å«æ‰€æœ‰é¡¹ç›®çš„å¤–å±‚æ–‡ä»¶å¤¹è·¯å¾„ä¸‹æ‰§è¡Œæ‰¹é‡æ›¿æ¢// Windowsåˆ é™¤'.bak'sed -i '.bak' 's/https:\/\/gitee\.com\/example/http:\/\/git\.i\.example.com\/JIANSU/g' */.git/config// sshåœ°å€// åŸä»£ç ä»“åº“sshåœ°å€ï¼šgit@gitee.com:example/project_a.git// æ–°ä»£ç ä»“åº“åœ°å€ï¼šssh://git@git.i.example.com:10022/JIANSU/project_a.git// git@gitee.com:example &gt; ssh://git@git.i.example.com:10022/JIANSU// æœ¬åœ°ä»“åº“ä½¿ç”¨æ­¤å‘½ä»¤æ›¿æ¢ï¼Œå¯åœ¨åŒ…å«æ‰€æœ‰é¡¹ç›®çš„å¤–å±‚æ–‡ä»¶å¤¹è·¯å¾„ä¸‹æ‰§è¡Œæ‰¹é‡æ›¿æ¢// Windowsåˆ é™¤'.bak'sed -i '.bak' 's/git@gitee\.com:example/ssh:\/\/git@git\.i\.example\.com:10022\/JIANSU/g' */.git/config å¦‚æœä¹‹å‰æ˜¯ç”¨httpåœ°å€è¿›è¡Œå…‹éš†çš„ä»“åº“çš„è¯ï¼Œç°åœ¨å°±æ˜¯åœ¨è¿›è¡Œpullå’Œpushæ“ä½œæ—¶ï¼ŒæŠŠè´¦æˆ·å¯†ç æ¢æˆGiteaçš„å°±å¯ä»¥äº†ï¼› å¦‚æœä»¥å‰æ˜¯ç”¨sshå…‹éš†çš„ä»“åº“çš„è¯ï¼Œç°åœ¨åœ¨Giteaçš„è®¾ç½®&gt;SSH / GPG å¯†é’¥é‡Œæ·»åŠ ä¸€ä¸‹å…¬é’¥å°±å¯ä»¥è¿›è¡Œgit pull/git pushç­‰æ“ä½œäº†ï¼› ä»“åº“å¤‡ä»½Giteaæœ‰è‡ªå·±çš„å¤‡ä»½ä¸æ¢å¤åŠŸèƒ½å¤‡ä»½ä¸æ¢å¤ï¼Œè¿™ä¸ªå¤‡ä»½æ¯”è¾ƒå…¨é¢ï¼Œæ•°æ®/ä»£ç /æ—¥å¿—éƒ½å¯ä»¥å¤‡ä»½ï¼Œæ­£æ˜¯å› ä¸ºè¿™æ ·ï¼Œå¦‚æœä»“åº“æ¯”è¾ƒå¤šè¿™ä¸ªå¤‡ä»½çš„æ–‡ä»¶è‚¯å®šä¼šæœ‰ç‚¹å¤§ï¼Œè€Œä¸”æ¯æ¬¡éƒ½æ˜¯å…¨é‡å¤‡ä»½ï¼Œæ‰€ä»¥é¢‘ç‡è‚¯å®šä¸èƒ½å¤ªé«˜ï¼Œè€Œæˆ‘åªæ˜¯æƒ³å¯¹ä»“åº“ä»£ç åšä¸€ä¸ªé«˜é¢‘ç‡å¤‡ä»½ï¼Œæ‰€ä»¥å†™äº†ä¸€ä¸ªPython3è„šæœ¬è°ƒç”¨Gitea apiå’Œ Gitå‘½ä»¤æ¥è¿›è¡Œæ‰€æœ‰ä»“åº“çš„æ‰€æœ‰åˆ†æ”¯ä»£ç å¤‡ä»½ï¼Œå› ä¸ºè¿™ä¸ªå¤‡ä»½åŸºäºGitæœºåˆ¶ï¼Œæ‰€ä»¥è™½ç„¶é¢‘ç‡é«˜ï¼Œä½†å¤‡ä»½å§‹ç»ˆåªæœ‰ä¸€ä»½ã€‚è„šæœ¬å¦‚ä¸‹ï¼š backup.py å¦‚æœä½¿ç”¨python2è¿è¡Œï¼Œåˆ†æ”¯åé‡Œæœ‰ä¸­æ–‡çš„è¯ï¼Œè¯·è‡ªè¡Œå¤„ç†å­—ç¬¦ç¼–ç é—®é¢˜ã€‚ ** python123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778#!/usr/bin/python3import osimport platformimport requestscurrent_dir = os.path.abspath(os.path.dirname(__file__))access_token = "&lt;your access token&gt;"repos_url = 'http://git.i.example.com/api/v1/repos/search?access_token=&#123;&#125;&amp;page=&#123;&#125;&amp;limit=&#123;&#125;'branches_url = 'http://git.i.example.com/api/v1/repos/&#123;&#125;/branches?access_token=&#123;&#125;'repo_key_url = 'http://git.i.example.com/api/v1/repos/&#123;&#125;/&#123;&#125;/keys?access_token=&#123;&#125;'def repos(): page = 1 limit = 50 has_next = True while has_next: r = requests.get(repos_url.format(access_token, page, limit)) for repo in r.json()['data']: yield repo page += 1 has_next = len(r.json()['data']) == limit"""æ‹‰å–é¡¹ç›®æ‰€æœ‰åˆ†æ”¯ä»£ç åˆ°æœ¬åœ°"""def sync_repo(): repo_index = 0 for repo in repos(): repo_index += 1 # å…‹éš†ä»“åº“ os.chdir(current_dir) print('å…‹éš†ç¬¬ &#123;&#125; ä¸ªä»“åº“ &#123;&#125; '.format(repo_index, repo['name'])) os.system("git clone &#123;&#125;".format(repo['ssh_url'])) os.chdir(os.path.join(current_dir, repo['name'])) # æ›´æ–°ä»“åº“ print('åŒæ­¥ &#123;&#125; ä»“åº“æ‰€æœ‰åˆ†æ”¯'.format(repo['name'])) os.system('git fetch --all') # if platform.system() == 'Windows': # Windows branches = requests.get(branches_url.format( repo['full_name'], access_token)).json() for branch in branches: branch_name = branch['name'] os.system('git branch --track &#123;&#125; origin/&#123;&#125;'.format(branch_name, branch_name)) # ç”¨resetè€Œä¸ç”¨pullæ˜¯å› ä¸ºå¦‚æœåˆ†æ”¯è¢«å¼ºæ¨äº†pullä¸‹æ¥ä¼šæœ‰åˆå¹¶å†²çªï¼Œç”¨restå°±ä¸ä¼šæœ‰å†²çªé—®é¢˜ os.system('git checkout &#123;&#125; &amp;&amp; git reset --hard origin/&#123;&#125;'.format(branch_name, branch_name)) # else: # # Linux/macOS # # git branch -r | grep -v '\-&gt;' | while read remote; do git branch --track $&#123;remote#origin/&#125; $remote; done &amp;&amp; git fetch --all &amp;&amp; git pull --all # # os.system("git branch -r | grep -v '\-&gt;' | while read remote; do git branch --track $&#123;remote#origin/&#125; $remote; done &amp;&amp; git fetch --all &amp;&amp; git pull --all") # # # ç”¨resetè€Œä¸ç”¨pullæ˜¯å› ä¸ºå¦‚æœåˆ†æ”¯è¢«å¼ºæ¨äº†pullä¸‹æ¥ä¼šæœ‰åˆå¹¶å†²çªï¼Œç”¨restå°±ä¸ä¼šæœ‰å†²çªé—®é¢˜ # os.system("git branch -r | grep -v '\-&gt;' | while read remote; do git branch --track $&#123;remote#origin/&#125; $remote; git checkout $&#123;remote#origin/&#125;; git reset --hard $remote; done")"""è®¾ç½®é¡¹ç›®éƒ¨ç½²å…¬é’¥"""def set_pub_key(): repo_index = 0 body = &#123; "key": "ssh-rsa aabbcc", "read_only": True, "title": "SandBox" &#125; for repo in repos(): repo_index += 1 print('===&#123;&#125;. &#123;&#125;==='.format(repo_index, repo['name'])) r = requests.post(repo_key_url.format( repo['owner']['username'], repo['name'], access_token), data=body) print(r.json())if __name__ == '__main__': sync_repo() # set_pub_key() å¯ä»¥æŠŠè„šæœ¬æ”¾åœ¨æœ¬åœ°ï¼Œä½¿ç”¨cron(Linux/macOS)/è®¡åˆ’ä»»åŠ¡(Windows)å®šæ—¶è¿è¡Œpython backup.py Windowsè®¡åˆ’ä»»åŠ¡è¿è¡Œcmdå‘½ä»¤æ—¶ï¼Œå¯ä½¿ç”¨éå½“å‰ç™»å½•ç”¨æˆ·è¿è¡Œï¼Œè¿™æ ·å°±ä¸ä¼šå¼¹å‡ºå°é»‘çª—ã€‚]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>Git</tag>
        <tag>Gitee</tag>
        <tag>GitLab</tag>
        <tag>Gite</tag>
        <tag>Gogs</tag>
        <tag>è¿ç§»</tag>
        <tag>ä»£ç </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[WebFluxä¸­mongoæ“ä½œ-Transaction]]></title>
    <url>%2F2020%2F01%2F17%2FWebFlux%E4%B8%ADmongo%E6%93%8D%E4%BD%9C-Transaction%2F</url>
    <content type="text"><![CDATA[1234567891011121314151617181920212223242526272829303132@PostMapping("/test")public Mono testA(@RequestParam boolean exception) &#123; return embedService.saveAC(new ADocument("å¼ ä¸‰"), new CDocument("æå››"), exception);&#125;@Overridepublic Mono&lt;Boolean&gt; saveAC(ADocument aDocument, CDocument cDocument, boolean exception) &#123; return reactiveMongoTemplate.inTransaction() //æ‰€æœ‰æ–‡æ¡£çš„æŒä¹…åŒ–æ“ä½œéƒ½åªèƒ½åœ¨å•ç‹¬ä¸€ä¸ªexecuteå‡½æ•°ä¸­æ±‡æ€»å®ç° .execute(action -&gt; action.insert(aDocument) .flatMap(a -&gt; &#123; cDocument.setName(a.getName() + "copy"); return action.insert(cDocument) .map(d -&gt; &#123; if (exception) &#123; //æµ‹è¯•è·¨æ–‡æ¡£çš„å¼‚å¸¸å›æ»š throw Exceptions.propagate(new RuntimeException("æ¨¡æ‹Ÿå¼‚å¸¸çš„å‡ºç°")); &#125; return d; &#125;); &#125;) ) //å¦‚æœé‡Œé¢æ˜¯ä¸ªmonoï¼Œåˆ™ç”¨nextå–å‡ºç¬¬ä¸€ä¸ªå…ƒç´ å°±æ˜¯é‡Œé¢çš„mono .next() .map(list -&gt; &#123; //éœ€è¦æ³¨æ„ï¼Œåœ¨executeä¹‹å¤–çš„å‡½æ•°ä¸­äº§ç”Ÿçš„å¼‚å¸¸ï¼Œä¸ä¼šè§¦å‘äº‹åŠ¡çš„å›æ»šã€‚ // if (exception) &#123; // throw Exceptions.propagate(new RuntimeException("æ¨¡æ‹Ÿå¼‚å¸¸çš„å‡ºç°")); // &#125; return Boolean.TRUE; &#125;);&#125; fluxçš„æ•°æ®åº“æ“ä½œï¼Œåœ¨æœ‰äº‹åŠ¡çš„å‰æä¸‹ä¸èƒ½ç”¨flatMapï¼Œè¦ç”¨äº‹åŠ¡ä¸èƒ½ç”¨flatMapè¦ç”¨concatMapä¿æŒæœ‰åº 12345678910111213141516171819202122232425262728293031323334@PostMapping("/test")public Mono testA(@RequestParam boolean exception) &#123; return embedService.saveAC(new ADocument("å¼ ä¸‰"), new CDocument("æå››"), exception);&#125;@Overridepublic Mono&lt;Boolean&gt; saveAC(ADocument aDocument, CDocument cDocument, boolean exception) &#123; return reactiveMongoTemplate.inTransaction() //æ‰€æœ‰æ–‡æ¡£çš„æŒä¹…åŒ–æ“ä½œéƒ½åªèƒ½åœ¨å•ç‹¬ä¸€ä¸ªexecuteå‡½æ•°ä¸­æ±‡æ€»å®ç° .execute(action -&gt; Flux.fromIterable("1", "2", "3") //å¦‚æœæ˜¯ä¸ªfluxæ­¤å¤„è¦ç”¨concatMapä¿æŒæœ‰åºä¸èƒ½ç”¨flatMap .concatMap(i -&gt; action.insert(aDocument) .flatMap(a -&gt; &#123; cDocument.setName(a.getName() + "copy"); return action.insert(cDocument) .map(d -&gt; &#123; if (exception) &#123; //æµ‹è¯•è·¨æ–‡æ¡£çš„å¼‚å¸¸å›æ»š throw Exceptions.propagate(new RuntimeException("æ¨¡æ‹Ÿå¼‚å¸¸çš„å‡ºç°")); &#125; return d; &#125;); &#125;)); ) //å¦‚æœé‡Œé¢è¿”å›çš„å°±æ˜¯ä¸€ä¸ªfluxåˆ™ä¸éœ€è¦ä½¿ç”¨next //.next() .map(list -&gt; &#123; //éœ€è¦æ³¨æ„ï¼Œåœ¨executeä¹‹å¤–çš„å‡½æ•°ä¸­äº§ç”Ÿçš„å¼‚å¸¸ï¼Œä¸ä¼šè§¦å‘äº‹åŠ¡çš„å›æ»šã€‚ // if (exception) &#123; // throw Exceptions.propagate(new RuntimeException("æ¨¡æ‹Ÿå¼‚å¸¸çš„å‡ºç°")); // &#125; return Boolean.TRUE; &#125;);&#125;]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Reactive</tag>
        <tag>äº‹åŠ¡</tag>
        <tag>mongo</tag>
        <tag>æ•°æ®åº“</tag>
        <tag>Flux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[WebFluxä¸­mongoæ“ä½œ-Aggregation]]></title>
    <url>%2F2020%2F01%2F17%2FWebFlux%E4%B8%ADmongo%E6%93%8D%E4%BD%9C-Aggregation%2F</url>
    <content type="text"><![CDATA[switch 12345678910111213ConditionalOperators.Switch.CaseOperator cond = ConditionalOperators.Switch.CaseOperator.when( BooleanOperators.And.and( ComparisonOperators.Eq.valueOf("channelBillStatus1").equalToValue("å·²ç»“ç®—"), ComparisonOperators.Eq.valueOf("channelBillStatus2").equalToValue("å·²ç»“ç®—") ) ).then("å·²ç»“æ¸…"); Aggregation aggregation = Aggregation.newAggregation( Aggregation.project("channelBillStatus1", "channelBillStatus2") .and(ConditionalOperators.switchCases(cond).defaultTo("æœªç»“æ¸…")).as("channelBillStatus") ); reactiveMongoTemplate.aggregate(aggregation, PlatformBillItem.class, PlatformBillBo.class); lookupåŠidç±»å‹è½¬æ¢ 123456789101112//æŠŠ_idè½¬æˆStringå¹¶èµ‹å€¼ç»™id Aggregation.project("internalId", "name", "isAvailable", "isCanAdd", "fitGender", "fitAge", "fitMaritalStatus", "price", "sortNo", "createdAt") //å¦‚æœéœ€è¦æŠŠStringè½¬Objectä½¿ç”¨ConvertOperators.ToObjectId.toObjectId() .and(ConvertOperators.ToString.toString("$_id")).as("id"); //ç”¨å½“å‰è¡¨çš„idå€¼å»åŒ¹é…chn_sectionè¡¨çš„sectionIdå­—æ®µå€¼ï¼Œå¹¶æŠŠç»“æœå­˜å…¥chnSectionsæ•°ç»„ Aggregation.lookup("chn_section", "id", "sectionId", "chnSections"); //å¦‚æœ‰éœ€è¦ï¼ŒæŠŠchnSectionsæ•°ç»„æ‹†å‡ºæ¥ï¼ŒchnSectionsæ•°ç»„æœ‰å‡ ä¸ªå…ƒç´ ï¼Œå½“å‰è¿™æ¡æ•°æ®å°±ä¼šè¢«æ‹†æˆå¤šå°‘æ¡ï¼ŒchnSectionså€¼ä¼šå˜æˆå…ƒç´ å€¼è€Œä¸å†æ˜¯åŸæ¥çš„æ•°ç»„ //å¦‚æœchnSectionsæ•°ç»„æ— å€¼ï¼Œé»˜è®¤ä¼šä¸¢å¼ƒè¿™æ¡æ•°æ®ï¼Œå¦‚æœè¦ä¿ç•™è®¾ç½®preserveNullAndEmptyArrays=true Aggregation.unwind("chnSection", true); //åªè¾“å‡ºè¿™äº›å­—æ®µ Aggregation.project("internalId", "name", "isAvailable", "isCanAdd", "fitGender", "fitAge", "fitMaritalStatus", "price", "sortNo", "createdAt", "chnSections"); reactiveMongoTemplate.aggregate(aggregation, PlatformBillItem.class, PlatformBillBo.class); å¦‚æœlookupæ—¶ï¼Œå¦‚æœè¦å¯¹åŒ¹é…çš„æ•°æ®è¿›è¡Œç­›é€‰ï¼ˆå‚è€ƒé“¾æ¥ï¼šhttps://stackoverflow.com/questions/51107626/spring-data-mongodb-lookup-with-pipeline-aggregationï¼‰ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465//åŸå§‹mongo//&#123;// $lookup:// &#123;// from: &lt;collection to join&gt;,// let: &#123; &lt;var_1&gt;: &lt;expression&gt;, â€¦, &lt;var_n&gt;: &lt;expression&gt; &#125;,// pipeline: [ &lt;pipeline to execute on the collection to join&gt; ],// as: &lt;output array field&gt;// &#125;//&#125;//è‡ªå®šä¹‰ä¸€ä¸ªAggregationOperationç±»public class CustomProjectAggregationOperation implements AggregationOperation &#123; private String jsonOperation; public CustomProjectAggregationOperation(String jsonOperation) &#123; this.jsonOperation = jsonOperation; &#125; @Override public Document toDocument(AggregationOperationContext aggregationOperationContext) &#123; return aggregationOperationContext.getMappedObject(Document.parse(jsonOperation)); &#125;&#125;private static String getJsonOperation() &#123; return "&#123;" + " $lookup: " + " &#123;" + " from: 'chn_set_meal'," + " let: &#123;" + " id: &#123; $toString: '$_id' &#125;" + " &#125;," + " pipeline: [" + " &#123;" + " $match: " + " &#123;" + " $expr: " + " &#123;" + " $and: " + " [" + " &#123;" + " $eq: ['$setMealId', '$$id']" + " &#125;," + " &#123;" + " $eq: ['$cooperationState', 'åˆä½œä¸­']" + " &#125;" + " ]" + " &#125;" + " &#125;" + " &#125;," + " &#123;" + " $project: &#123;" + " channelId: 1," + " channelName: 1" + " cooperationState: 1" + " &#125;" + " &#125;" + " ]," + " as: 'channels'" + " &#125;" + "&#125;&#125;"; &#125;AggregationOperation aggregationOperation = new CustomProjectAggregationOperation(getJsonOperation()); return reactiveMongoTemplate.aggregate(Aggregation.newAggregation(aggregationOperation), SetMeal.class, SetMealListBo.class); group 123456789101112131415//èƒŒæ™¯ï¼šæŸ¥è¯¢äº¤æ˜“è¡¨ï¼Œè®¢å•å’Œäº¤æ˜“ä¸€å¯¹å¤šAggregation.group("orderNo") //å•ä¸€ç»„çš„é‡‘é¢æ±‡æ€» .sum("amount").as("totalAmount") //ç»„çš„æœ€åä¸€ä¸ªè®¢å•å· .last("orderNo").as("orderNo") //ç»„é‡Œæ•°æ®æ¡æ•° .count().as("tradeCount") //æŠŠä¸€ç»„æ•°æ®é‡Œæ¯æ¡æ•°æ®çš„çŠ¶æ€æ”¾åˆ°ä¸€ä¸ªstatusesæ•°ç»„é‡Œ .addToSet("status").as("statuses") //æŠŠä¸€ç»„æ•°æ®é‡Œçš„ä¸€äº›å­—æ®µä¿¡æ¯é‡æ–°ç»„è£…æˆä¸€ä¸ªå¯¹è±¡æ”¾åˆ°billItemsçš„å¯¹è±¡æ•°ç»„é‡Œ .push(new BasicDBObject("tradeContent", "$tradeContent") .append("tradeNo", "$tradeNo") .append("amount", "$amount") ).as("billItems");]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Reactive</tag>
        <tag>äº‹åŠ¡</tag>
        <tag>mongo</tag>
        <tag>æ•°æ®åº“</tag>
        <tag>Aggregation</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è‡ªç”¨è½¯ä»¶æ¨è]]></title>
    <url>%2F2019%2F10%2F12%2Fawesome-software%2F</url>
    <content type="text"><![CDATA[æ—¥ç”¨è½¯ä»¶/æ•ˆç‡æå‡/å¼€å‘å·¥å…·/Chormeæ’ä»¶æ‰©å±•æ¨è åº”ç”¨æ—¥å¸¸ Alfred(macOS) Macä¸Šçš„æ•ˆç‡å¯åŠ¨ç¥å™¨ uTools(macOS/Windows/Linux) ä½ çš„ç”Ÿäº§åŠ›å·¥å…·é›†. uToolsæ˜¯ä¸€ä¸ªæç®€ã€æ’ä»¶åŒ–ã€è·¨å¹³å°çš„ç°ä»£æ¡Œé¢è½¯ä»¶ã€‚é€šè¿‡è‡ªç”±é€‰é…ä¸°å¯Œçš„æ’ä»¶ï¼Œæ‰“é€ ä½ å¾—å¿ƒåº”æ‰‹çš„å·¥å…·é›†åˆã€‚ å½“ä½ ç†Ÿæ‚‰å®ƒåï¼Œèƒ½å¤Ÿä¸ºä½ èŠ‚çº¦å¤§é‡æ—¶é—´ï¼Œè®©ä½ å¯ä»¥æ›´åŠ ä¸“æ³¨åœ°æ”¹å˜ä¸–ç•Œã€‚ é™¤äº†æ’ä»¶ä¸­å¿ƒæä¾›çš„å·¥å…·ï¼Œéšæ‰‹å°±å¯ä»¥ç”¨è‡ªå·±ç†Ÿæ‚‰çš„è¯­è¨€å†™ä¸€ä¸ªç®€å•çš„å°å·¥å…·æ”¾ä¸Šé¢ï¼Œæ„Ÿè§‰æ¯”Alfredè¿˜å¥½ç”¨ï¼Œå“ˆå“ˆ WGestures(Windows) ç³»ç»Ÿé¼ æ ‡æ‰‹åŠ¿ Snipaste(macOS/Windows) æˆªå›¾/è´´å›¾ Everything(Windows) Windowsæœ¬åœ°æœç´¢ï¼Œå¿«å¦‚é—ªç”µï¼Œç”¨è¿‡å°±å›ä¸å» Rolan(Windows) Windowsä¸Šçš„å¿«é€Ÿå¯åŠ¨å™¨ Rime(macOS/Windows/Linux) è¾“å…¥æ³• å¤šå°è®¾å¤‡å…±ç”¨é”®é¼ (macOS/Windows/Linux) å¤šå°è®¾å¤‡å…±ç”¨é”®é¼  [Shadowsocks/v2rayNG/v2ray](macOS/Windows/Linux/Androidï¼‰ ç§‘å­¦ä¸Šç½‘ AppCleaner(macOSï¼‰ åº”ç”¨å¸è½½å™¨ Typora(macOS/Windows/Linuxï¼‰ markdownç¬”è®°å†™ä½œåº”ç”¨ï¼Œé…åˆåšæœäº‘æˆ–DropboxåŒæ­¥ï¼Œçˆ½ SumatraPDF(Windowsï¼‰ PDFé˜…è¯»å™¨ EagleGet(Windowsï¼‰ ä¸‹è½½å™¨ Free Download Manager(macOS/Windowsï¼‰ ä¸‹è½½å™¨ Bandizip(macOS/Windowsï¼‰ å‹ç¼©/è§£å‹è½¯ä»¶ eZip(macOS/Windowsï¼‰ å‹ç¼©/è§£å‹è½¯ä»¶ reveal.js(Webï¼‰ ç¨‹åºå‘˜çš„PPTå·¥å…· Xnip(macOSï¼‰ æˆªå›¾åº”ç”¨ pap.er(macOSï¼‰ å£çº¸åº”ç”¨ aText(macOS/Windowsï¼‰ æ–‡å­—è¾“å…¥æ•ˆç‡æå‡å·¥å…· å¼€å‘ Cmder(Windows) Windowsé»˜è®¤å‘½ä»¤è¡Œæ›¿ä»£å“ Insomnia(macOS/Windows/Linux) è·¨å¹³å°çš„RESTå®¢æˆ·ç«¯ postman(macOS/Windows/Linux/Chrome App) è·¨å¹³å°çš„æ¥å£è°ƒè¯•å·¥å…·ï¼Œæœ‰mocksæœåŠ¡å’Œæ¥å£æ–‡æ¡£ç”ŸæˆåŠŸèƒ½ iTerm2(macOS) ç»ˆç«¯åº”ç”¨ hyper(macOS/Windows/Linux) æ¼‚äº®çš„ç»ˆç«¯åº”ç”¨ Fiddler(macOS/Windows/Linux) æŠ“åŒ…å·¥å…· Charles(macOS/Windows/Linux) æŠ“åŒ…å·¥å…· frp(macOS/Windows/Linux) å†…ç½‘ç©¿é€ Chromeæ‰©å±•/åº”ç”¨ Adblock Plus å¹¿å‘Šæ‹¦æˆªå™¨ï¼Œè°ç”¨è°çŸ¥é“ Checker Plus for Gmailâ„¢ Gmail/Inboxæ’ä»¶ï¼Œä¸ç”¨æ‰“å¼€ç½‘é¡µå¤„ç†é‚®ä»¶ Dark Reader é»‘è‰²ä¸»é¢˜ï¼Œé€‚ç”¨äºä»»ä½•ç½‘ç«™ã€‚å…³çˆ±çœ¼ç›ï¼Œå°±ä½¿ç”¨Dark Readerè¿›è¡Œå¤œé—´å’Œæ—¥é—´æµè§ˆ Extensity æ‰©å±•ç®¡ç†å·¥å…·ï¼Œå¿«é€Ÿçš„å¯ç”¨/ç¦ç”¨ Wappalyzer æ¢æµ‹å½“å‰ç½‘é¡µæ­£åœ¨ä½¿ç”¨çš„å¼€æºè½¯ä»¶æˆ–è€…jsç±»åº“ Ghostery äº†è§£è°åœ¨è·Ÿè¸ªæ‚¨çš„ç½‘é¡µæµè§ˆæ“ä½œï¼Œå¹¶å¯ç¦ç”¨è·Ÿè¸ªè¡Œä¸ºã€‚ Googleç¿»è¯‘ æ”¯ä»˜åœ¨ç½‘é¡µä¸­åˆ’è¯ç¿»è¯‘ å½©äº‘å°è¯‘ ç½‘é¡µç¿»è¯‘æ’ä»¶ LastPass å¯†ç ç®¡ç† Tampermonkey ç»™ç½‘ç«™æ·»åŠ è‡ªå®šä¹‰è„šæœ¬ Stylish ç»™ç½‘ç«™æ·»åŠ è‡ªå®šä¹‰æ ·å¼è¡¨ Web Server for Chrome å¿«é€Ÿæ­å»ºæœ¬åœ°WebæœåŠ¡å™¨(å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥python -m http.server) Octotree åœ¨æµè§ˆå™¨å·¦ä¾§æ ‘å½¢å±•ç¤ºGithubä»£ç ã€‚ Prism Pretty ç¾åŒ–ä»£ç ï¼ˆhtmlã€cssã€jsã€jsonâ€¦â€¦ï¼‰ Proxy SwitchyOmega ä½ æ‡‚çš„ v2ex plus ä¼˜é›…ä¾¿æ·çš„ V2EX æ‰©å±• Toby for Chrome æ ‡ç­¾é¡µç®¡ç†/ç¨åé˜…è¯»/èµ„æ–™å½’æ¡£åˆ†ç±»â€¦ Web Scraper å›¾å½¢åŒ–åˆ›å»ºçˆ¬è™«ï¼Œçˆ¬å–ç½‘ç«™æ•°æ® æƒ æƒ è´­ç‰©åŠ©æ‰‹/è´­ç‰©å…šè‡ªåŠ¨æ¯”ä»·å·¥å…· åœ¨ä¸»æµç”µå•†ç½‘ç«™é¡µé¢ä¸Šæä¾›å•†å“çš„å†å²ä»·æ ¼ï¼ŒåŠåœ¨åŒæ¬¾å•†å“åœ¨å…¶å®ƒå¹³å°çš„ä»·æ ¼æ¯”è¾ƒã€‚ Google Keep è®°äº‹å’Œæ¸…å•]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>æ•ˆç‡</tag>
        <tag>è½¯ä»¶</tag>
        <tag>æ¨è</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[(çŒ«)èŠ±æœ¨å…°é¢†å…»æ³¨æ„äº‹é¡¹]]></title>
    <url>%2F2019%2F09%2F17%2Fadoption-cat-Hua-Mulan%2F</url>
    <content type="text"><![CDATA[æˆä¸ºçŒ«å¥´å‰çš„å‡†å¤‡ é¢†å…»å‰è¯·ç¡®è®¤èƒ½å¦æ¥å—ä»¥ä¸‹å‡ ç‚¹ï¼Œå¦‚æœå¦ï¼Œä¸å»ºè®®é¢†å…» å…»çŒ«è¯·ä¸è¦åŠé€”è€ŒåºŸï¼Œè¯·ä¸è¦è®©å®ƒå˜æˆæµæµªçŒ«ç›¸å¯¹äºç‹—æ¥è¯´ï¼ŒçŒ«æ‰æ¯›å¾ˆä¸¥é‡ï¼Œæˆ¿é—´ç»å¸¸è¦æ‰“æ‰«ï¼Œè¡£æœæ¯å¤©éƒ½è¦ç”¨ç²˜æ¯›å™¨ç²˜æ¯›çŒ«ä¸åƒç‹—ä¸€æ ·ä¼šå¬ä½ çš„æŒ‡ä»¤ï¼Œç»å¤§éƒ¨åˆ†å¬ä¸æ‡‚çŒ«æ¯å¹´è¦é©±è™«å’Œæ‰“ç‹‚çŠ¬è´¹ç”¨å‡ ç™¾çŒ«å¦‚æœç”Ÿç—…å»çœ‹ç—…èŠ±è´¹è¦æ¯”äººç”Ÿç—…èŠ±è´¹å¤§å¾ˆå¤šå¾ˆå¤šç»è‚²éœ€è¦èŠ±è´¹1~2kçŒ«ä¼šæ¯”è¾ƒç²˜äººï¼Œä¸€èˆ¬å–œæ¬¢åœ¨äººè…¿ä¸Šæˆ–èº«ä¸Šç¡è§‰çŒ«å‘†çš„æˆ¿é—´ä¸èƒ½å¼€çª—å°çŒ«ä¿¡æ¯ ç”Ÿæ—¥ï¼š2018å¹´09æœˆ23æ—¥æ€§åˆ«ï¼šå¦¹å­å“ç§ï¼šè‹±çŸ­é“¶æ¸å±‚+è™æ–‘ï¼Œæœ‰éƒ¨åˆ†æŠ˜è€³åŸºå› å®¶æ—ï¼šçˆ·çˆ·ï¼šè‹±çŸ­é“¶æ¸å±‚å¥¶å¥¶ï¼šç¾çŸ­è™æ–‘çˆ¸çˆ¸ï¼šç¾çŸ­è™æ–‘å¦ˆå¦ˆï¼šè‹±çŸ­é“¶æ¸å±‚ï¼ˆæœ‰æŠ˜è€³åŸºå› ï¼‰æ–°å®¶ 1ï¼åˆšå¸¦å›å®¶åº”è¯¥å…ˆæ”¾åˆ°çŒ«ç ‚é‡Œï¼Œæ‹¿å®ƒçš„çˆªå­åˆ¨å‡  çŒ«ç ‚ï¼Œè®©å®ƒçŸ¥é“é‚£é‡Œæ˜¯æ‹‰å±æ’’å°¿çš„åœ°æ–¹ï¼Œæœ€å¥½è®©å°çŒ«åœ¨é‡Œé¢å¾…ä¸€ä¼šå„¿2ï¼å¦‚æœå°çŒ«åœ¨å…¶ä»–åœ°æ–¹æ‹‰å±æ’’å°¿äº†ï¼ŒæŠŠæ’æ³„ç‰©å¤„ç†æ‰æ”¾åˆ°çŒ«ç ‚é‡Œå»ï¼Œè®©åæŠŠå°çŒ«ä¹Ÿæ”¾åˆ°çŒ«ç ‚é‡Œï¼Œå°çŒ«é—»åˆ°é‚£æ°”å‘³è®©å®ƒçŸ¥é“åº”è¯¥åœ¨çŒ«ç ‚é‡Œå•æ‰€ï¼Œç„¶åç”¨çš„çˆªå­åˆ¨çŒ«ç ‚æŠŠæ’æ³„ç‰©ç›–èµ·æ¥åƒ ä¸»é£Ÿä¸€å®šæ˜¯çŒ«ç²®ï¼ŒçŒ«ç²®é€‰è´­è¯·è‡ªå·±ç½‘ä¸ŠæŸ¥è¯¢ï¼Œè¿™é‡Œä¸æä¾›å»ºè®®ä¸èƒ½å–ç”Ÿæ°´æœ€å¥½å€’æ˜¯æ¸©æ°´ï¼Œå‡‰å¼€æ°´ä¹Ÿå¯ä»¥ï¼ŒçŒ«å–çš„æ°´æ¯å¤©æ¢ä¸€æ¬¡çŒ«ç²®å€’ç¢—é‡Œå°çŒ«è‡ªå·±ä¼šåƒï¼Œä¸è¦å¤ªå¤šä¹Ÿä¸è¦å¤ªå°‘ï¼Œä¸€å¤©çš„é‡å°±å¯ä»¥ï¼Œå¤ªå¤šäº†è¿‡å¤œä¸æ–°é²œçŒ«å¯èƒ½å°±ä¸å–œæ¬¢åƒäº†10ä¸ªæœˆå†…éƒ½å¯ä»¥åƒå¹¼çŒ«ç²®ï¼Œåé¢å¯ä»¥æ¢æˆæˆçŒ« ç²®ï¼Œé™¤äº†çŒ«ç²®ï¼Œä¹Ÿè¦ç»™çŒ«äº›åƒæ¹¿ç²®ã€çŒ«ç½å¤´ã€è¥å…»è†å’Œå…¶ä»–çŒ«é›¶é£Ÿï¼Œä½†ä¸è¦ç»™ç»™çŒ«åƒå¤ªå¤šï¼Œå› ä¸ºè¿™äº›é£Ÿç‰©æ¯”è¾ƒé¦™ï¼Œå¦‚æœçŒ«åƒå¤šäº†ï¼Œå¯èƒ½å°±ä¼šæŒ‘é£Ÿä¸å–œæ¬¢åƒçŒ«ç²®äº†å¹³æ—¶ä¹Ÿå¯ä»¥ä¹°ç‚¹é¸¡èƒ¸è‚‰ï¼Œç”¨æ¸…æ°´ç…®ç†Ÿï¼Œç„¶åæ’•ä¸‹ æ¥å–‚çŒ«åƒã€‚å°½é‡åˆ«ç»™çŒ«åƒå’¸çš„ä¸œè¥¿æˆ–å…¶å®ƒå‘³é“çš„äººåƒçš„ä¸œè¥¿ç›®å‰å°çŒ«å·²ç»å¯ä»¥ä¸ç”¨å–å¥¶äº†ï¼Œä¸è¦ç»™çŒ«å–ç‰›å¥¶ï¼Œç‰›å¥¶é‡Œæœ‰ä¹³ç³–ï¼ŒçŒ«æ˜¯ä¸èƒ½æ¶ˆåŒ–ä¹³ç³–çš„ï¼Œå¦‚æœå–äº†å¯èƒ½ä¼šè…¹æ³»ï¼Œä¸¥é‡ä¼šè‡´æ­»å…¶ä»–ä¸œè¥¿ç»™çŒ«åƒä¹‹å‰å…ˆç½‘ä¸ŠæŸ¥ä¸‹èƒ½ä¸èƒ½ç»™çŒ«åƒç”¨ 1ï¼å¯ä»¥ä¹°ä¸ªçŒ«æŠ“ç›˜æˆ–çŒ«æŠ“æ¿çŒ«å–œæ¬¢åˆ°å¤„æŠ“ä¸œè¥¿ï¼Œå¦‚æœæœ‰çº¸ç®±å­çŒ«ä¹Ÿä¼šç»å¸¸æŠ“2ï¼å¯ä»¥ä¹°ä¸ªçŒ«çˆ¬æ¶ï¼Œè®©çŒ«ç©ï¼ŒçŒ«å–œæ¬¢çˆ¬é«˜é«˜3ï¼çŒ«åˆ°å¤å¤©å¯èƒ½ä¼šæ‰æ¯›æ¯”è¾ƒå¤šï¼Œç½‘ä¸Šä¹°ä¸ªçŒ«æ¯›æ¢³å­ æˆ–å™œçŒ«æ‰‹å¥—æ—¶å¸¸ç»™çŒ«å»å»æ¯›4ï¼å› ä¸ºçŒ«ä¼šæ‰æ¯›ï¼ŒæŠ±å®ƒç©äº†ä¹‹åï¼Œè¡£æœä¸Šç»å¸¸ä¼šç²˜ ä¸Šæ¯›ï¼Œå¯ä»¥æ·˜å®ä¹°ä¸ªç²˜æ¯›æ»šç­’ç²˜è¡£æœä¸Šæˆ–æ˜¯å…¶å®ƒåœ°æ–¹çš„çŒ«æ¯›ï¼Œååˆ†æœ‰æ•ˆç© å¯ä»¥ä¹°æ¿€å…‰ç¬”å•Šï¼Œé€—çŒ«æ£’ä¹‹ç±»çš„çŒ«ç©å…·ï¼Œè®©å°çŒ«ç©æ´—æ¾¡ å¯ä»¥è‡ªå·±åœ¨å®¶æ´—ï¼ˆå®¹æ˜“è¢«æŠ“ä¼¤ï¼‰æˆ–æ˜¯å¸¦å»å® ç‰©åº—ï¼ˆ100å¤šä¸€æ¬¡ï¼‰ç»è‚² è¯·åœ¨é€‚å½“çš„æ—¶å€™å¸¦çŒ«å»åšç»è‚²ç–«è‹— çŒ«çš„ç‹‚çŠ¬å’Œé©±è™«æ¯å¹´è¦æ‰“ï¼Œäººçš„ç‹‚çŠ¬ç–«è‹—è‡ªå·±å†³å®šè¦ä¸è¦æ‰“ï¼Œä¸æä¾›å»ºè®®å…¶å®ƒæ³¨æ„äº‹é¡¹ å‰é¢è¯´äº†ï¼ŒçŒ«å–œæ¬¢çˆ¬é«˜é«˜ï¼Œæ‰€ä»¥çŒ«èƒ½å¤Ÿè·³ä¸Šå»æˆ–çˆ¬ä¸Šå»çš„çª—æˆ·é˜³å°è¦å…³æ‰ï¼ŒçŒ«ä¸çŸ¥é“é«˜ç©ºå±é™©ï¼Œä¼šè·³æ¥¼çš„ï¼Œå¾ˆå¤šçŒ«éƒ½æ˜¯å æ¥¼æ­»æ‰çš„]]></content>
      <categories>
        <category>çŒ«</category>
      </categories>
      <tags>
        <tag>çŒ«</tag>
        <tag>Cat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gitåæ‚”è¯]]></title>
    <url>%2F2019%2F07%2F25%2Fgit-reset%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨gitæäº¤ä»£ç è¿‡ç¨‹ä¸­æœ‰æ—¶ä¼šæ‰‹æŠ–æäº¤é”™è¯¯ä»£ç ï¼Œè¿™æ—¶å°±éœ€è¦ç”¨åˆ°gitçš„åæ‚”è¯resetæ“ä½œã€‚ å·®å¼‚ï¼ˆdiffï¼‰å·¥ä½œåŒºvsæš‚å­˜åŒº: git diff æš‚å­˜åŒºvsæœ¬åœ°ä»“åº“: git diff â€”cached æœ¬åœ°ä»“åº“vsè¿œç¨‹ä»“åº“: git diff &lt;åˆ†æ”¯å&gt; origin/&lt;åˆ†æ”¯å&gt; æ’¤æ¶ˆï¼ˆresetï¼‰æ’¤æ¶ˆå·¥ä½œåŒºä¿®æ”¹: git reset â€”hard æ’¤æ¶ˆ(1)git add: git reset &amp;&amp; git checkout .æˆ–git reset â€”hard(ä¼šè¿˜åŸæ‰€æœ‰ä¿®æ”¹) æ’¤æ¶ˆ(2) git commit: git reset --hard origin/master(ä½¿ç”¨è¿œç«¯çš„masteråˆ†æ”¯æ¢å¤åˆ°æœ¬åœ°) æ’¤æ¶ˆ(3) git push: git reset --hard HEAD^ &amp;&amp; git push -f(å…ˆåœ¨æœ¬åœ°å›åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼Œç„¶åå¼ºæ¨åˆ°è¿œç«¯)title: git reset participant å·¥ä½œåŒº participant æš‚å­˜åŒº participant æœ¬åœ°ä»“åº“ participant è¿œç¨‹ä»“åº“ å·¥ä½œåŒº->æš‚å­˜åŒº:(1) git add æš‚å­˜åŒº->æœ¬åœ°ä»“åº“:(2) git commit æœ¬åœ°ä»“åº“->è¿œç¨‹ä»“åº“:(3) git push{"theme":"simple"} var code = document.getElementById("sequence-0-code").value; var options = JSON.parse(decodeURIComponent(document.getElementById("sequence-0-options").value)); var diagram = Diagram.parse(code); diagram.drawSVG("sequence-0", options);]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>reset</tag>
        <tag>æ¢å¤</tag>
        <tag>åæ‚”</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gitå¸¸ç”¨å‘½ä»¤åˆ«åè®¾ç½®]]></title>
    <url>%2F2019%2F06%2F28%2Fgit-alias%2F</url>
    <content type="text"><![CDATA[å¦‚æœå¹³æ—¶ä½¿ç”¨gitä½¿ç”¨gitå‘½ä»¤å¤šäºGUIå·¥å…·ï¼Œåˆ™è®¾ç½®ä¸€äº›å¸¸ç”¨å‘½ä»¤çš„åˆ«åæœ‰ä¸”äºæ•ˆç‡æå‡ï¼Œä»¥ä¸‹æ˜¯æˆ‘å¹³æ—¶ä½¿ç”¨è¾ƒå¤šçš„ä¸€äº›å‘½ä»¤çš„åˆ«åè®¾ç½® Gitåˆ«åè®¾ç½® 123456789git config --global alias.co checkoutgit config --global alias.ci commitgit config --global alias.br branchgit config --global alias.cp cherry-pickgit config --global alias.unstage 'reset HEAD'# å¯ç”¨git pull -rä»£æ›¿git config --global alias.fr '!f() &#123; git fetch &amp;&amp; git rebase $@; &#125;; f'; # gitæäº¤æ—¥å¿—git config --global alias.lg "log --color --graph --pretty=format:'%Cred%h%Creset - %Cgreen(%cd)%C(yellow)%d%Creset %s %C(blue)[%an/%cn]%Creset' --date=format:'%Y-%m-%d %H:%M:%S' --abbrev-commit" åˆ é™¤åˆ«å 1git config --global --unset alias.xxx ä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤è®¾ç½®git aliaså’Œzsh aliaséƒ½å¤±è´¥ï¼Œæš‚æ²¡æ‰¾åˆ°æ–¹æ³•å¯ä»¥è®¾ç½®åˆ«å 12# æŸ¥çœ‹ä»“åº“æäº¤è€…æ’åå‰ 5git log --pretty='%aN' | sort | uniq -c | sort -k1 -n -r | head -n 5 12# ç»Ÿè®¡æ¯ä¸ªäººå¢åˆ è¡Œæ•°git log --format='%aN' | sort -u | while read name; do echo -en "$name\t"; git log --author="$name" --pretty=tformat: --numstat | awk '&#123; add += $1; subs += $2; loc += $1 - $2 &#125; END &#123; printf "added lines: %s, removed lines: %s, total lines: %s\n", add, subs, loc &#125;' -; done git lgå‘½ä»¤æ•ˆæœå›¾]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>æ•™ç¨‹</tag>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidçœŸæœºè°ƒè¯•å¸¸ç”¨å‘½ä»¤]]></title>
    <url>%2F2019%2F04%2F28%2Fandroid%E7%9C%9F%E6%9C%BA%E8%B0%83%E8%AF%95%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨USBè¿æ¥AndroidçœŸæœºè°ƒè¯•æ—¶ï¼Œä½¿ç”¨æ— çº¿è¿æ¥è°ƒè¯•ä¼šæ–¹ä¾¿å¾ˆå¤šï¼Œå¹¶ä½¿ç”¨ç”µè„‘ç«¯ç”¨adbå‘½ä»¤å®ç°æˆªå›¾å’Œå½•å±ï¼Œæ–¹ä¾¿è°ƒè¯•å’Œé—®é¢˜åé¦ˆã€‚ æ— çº¿è°ƒè¯•12345678910# å‰ææ¡ä»¶ï¼šæ‰‹æœºå’Œç”µè„‘å¤„ç†åŒä¸€ç½‘æ®µ# ç¬¬ä¸€æ¬¡æ‰‹æœºå…ˆä½¿ç”¨USBè¿æ¥ç”µè„‘æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è®©æ‰‹æœºä¸Šçš„æŸä¸€ç«¯å£å¤„äºç›‘å¬çŠ¶æ€adb tcpip &lt;port&gt;# åœ¨æ‰‹æœºä¸ŠæŸ¥çœ‹ipåœ°å€æˆ–ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ipadb shell ifconfig # è¿æ¥æ‰‹æœºï¼ˆåœ¨åŒä¸€ä¸ªç¯å¢ƒä¸‹ï¼Œä¸€èˆ¬æ‰‹æœº/ç”µè„‘ä¸é‡å¯å°±ä¼šä¸€ç›´è¿æ¥ç€ï¼‰adb connect &lt;ip&gt; :&lt;port&gt;# æŸ¥çœ‹è¿æ¥çš„è®¾å¤‡adb devices æˆªå›¾12# æˆªå›¾å¹¶ä¿å­˜åˆ°æ‰‹æœºsdå¡çš„ä¸‹adb shell screencap -p /sdcard/screenshot.png ä¾¿æ·è„šæœ¬ï¼ˆæˆªå›¾å¹¶è‡ªåŠ¨å¤åˆ¶åˆ°ç”µè„‘å‰ªåˆ‡æ¿/ä¿å­˜åˆ°ç”µè„‘æœ¬åœ°ï¼‰ å› è„šæœ¬é‡Œè°ƒç”¨äº†linux/macOSçš„å‘½ä»¤ï¼Œæ‰€ä»¥åªé€‚ç”¨äºmacOSç³»ç»Ÿï¼Œwindowsè¯·è‡ªè¡Œä¿®æ”¹è„šæœ¬ã€‚ vi shot.sh 1234567891011121314151617181920#!/bin/bash# Androidæˆªå›¾ï¼Œå®šä½å’Œé¢„è§ˆé»˜è®¤å…³é—­ï¼Œè¯·å–æ¶ˆæ³¨é‡Šdd=`date +%Y-%m-%d-%H-%M-%S`pwd=`pwd`adb shell screencap -p /sdcard/screenshot.pngadb pull /sdcard/screenshot.pngadb shell rm /sdcard/screenshot.pngmv screenshot.png $dd.pngecho &quot;æˆªå›¾å·²ä¿å­˜ä¸ºå½“å‰ç›®å½•ä¸‹çš„&quot;$dd.png# ä¿®æ”¹å›¾ç‰‡å°ºå¯¸ï¼Œé•¿æˆ–å®½æœ€å¤§ä¸è¶…è¿‡960ï¼Œç­‰æ¯”ç¼©æ”¾echo &quot;å‹ç¼©å›¾ç‰‡...&quot;sips -Z 960 $pwd/$dd.png# å®šä½åˆ°æ–‡ä»¶open ./$dd.png -R# æ‰“å¼€é¢„è§ˆopen -a Preview $dd.png# å¤åˆ¶åˆ°å‰ªåˆ‡æ¿osascript -e &apos;on run args&apos; -e &apos;set the clipboard to POSIX file (first item of args)&apos; -e end $pwd/$dd.pngecho &quot;æˆªå›¾å·²å¤åˆ¶åˆ°å‰ªåˆ‡æ¿&quot; æˆäºˆæ‰§è¡Œæƒé™1chmod a+x shot.sh ä½¿ç”¨æ–¹æ³• 1./shot.sh âŒ˜+vè¯•è¯• å¯æŠŠå‘½ä»¤æ·»åŠ aliasåˆ«å å½•å±1234567# æ‰§è¡Œå½•å±å¹¶ä¿å­˜åˆ°æ‰‹æœºsdå¡ç›®å½•ä¸‹ï¼ˆé»˜è®¤æ—¶é•¿180sï¼‰# å¯é…ç½®å‚æ•°# --time-limit: å½•åˆ¶æ—¶é•¿ï¼Œå•ä½ç§’# --size: åˆ†è¾¨ç‡ï¼Œå¦‚1280*720ï¼Œä¸æŒ‡å®šé»˜è®¤ä½¿ç”¨æ‰‹æœºçš„åˆ†è¾¨ç‡# --bit-rate: è§†é¢‘çš„æ¯”ç‰¹ç‡ï¼Œå¦‚6Mbpsä¸º6000000# --verbose: å‘½ä»¤è¡Œæ˜¾ç¤ºlogadb shell screenrecord /sdcard/demo.mp4 ä¾¿æ·è„šæœ¬ï¼ˆå½•å±å¹¶è‡ªåŠ¨å¤åˆ¶åˆ°ç”µè„‘å‰ªåˆ‡æ¿/ä¿å­˜åˆ°ç”µè„‘æœ¬åœ°ï¼‰ å› è„šæœ¬é‡Œè°ƒç”¨äº†linux/macOSçš„å‘½ä»¤ï¼Œæ‰€ä»¥åªé€‚ç”¨äºmacOSç³»ç»Ÿï¼Œwindowsè¯·è‡ªè¡Œä¿®æ”¹è„šæœ¬ã€‚ vi record.sh 1234567891011121314#!/bin/bash# Androidå½•å±dd=`date +%Y-%m-%d-%H-%M-%S`&quot;-$1s&quot;pwd=`pwd`adb shell screenrecord --time-limit $1 /sdcard/screenrecord.mp4adb pull /sdcard/screenrecord.mp4adb shell rm /sdcard/screenrecord.mp4mv screenrecord.mp4 $dd.mp4echo &quot;$1ç§’è§†é¢‘å·²ä¿å­˜ä¸ºå½“å‰ç›®å½•ä¸‹çš„&quot;$dd.mp4# å®šä½åˆ°æ–‡ä»¶open ./$dd.mp4 -R# å¤åˆ¶åˆ°å‰ªåˆ‡æ¿osascript -e &apos;on run args&apos; -e &apos;set the clipboard to POSIX file (first item of args)&apos; -e end $pwd/$dd.mp4echo &quot;$1ç§’è§†é¢‘å·²å¤åˆ¶åˆ°å‰ªåˆ‡æ¿&quot; æˆäºˆæ‰§è¡Œæƒé™1chmod a+x record.sh ä½¿ç”¨æ–¹æ³•12# 3ä¸ºå½•åˆ¶ç§’æ•°ï¼Œå¯ä¿®æ”¹./record.sh 3]]></content>
      <categories>
        <category>ç¨‹åºå‘˜</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>macOS</tag>
        <tag>å‘½ä»¤</tag>
        <tag>æ•ˆç‡</tag>
        <tag>æ— çº¿</tag>
        <tag>è°ƒè¯•</tag>
        <tag>adb</tag>
        <tag>USB</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSç¬”è®°]]></title>
    <url>%2F2019%2F04%2F24%2Fjs%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[jsä¸­è¦ç”¨å˜é‡ä½œä¸ºkeyçš„è¯ä½¿ç”¨æ–¹æ‹¬å·æ‹¬ä½ä¾‹ï¼šthis.searchKeyword123456this.$http(&#123; url: this.searchUrl, method: this.remoteRequestMethod, params: Object.assign(&#123;&#125;, this.searchParams, this.pager), data: Object.assign(&#123; [this.searchKeyword]: query &#125;, this.searchBody, this.pager) &#125;) å…¨æ–‡å®ŒğŸ™ˆ]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringWebFluxä½¿ç”¨ç¬”è®°]]></title>
    <url>%2F2019%2F02%2F28%2FSpringWebFlux%2F</url>
    <content type="text"><![CDATA[è®°å½•ä½¿ç”¨SpringWebFluxçš„ä¸€äº›ç¬”è®°ã€‚ groupByå¯¹fluxè¿›è¡Œåˆ†ç»„ã€‚12345678910channelOnlineCityBoFlux.sort((s1, s2) -&gt; Objects.requireNonNull(s1.getInitial()).compareTo(s2.getInitial())) .groupBy(city -&gt; city.getInitial().substring(0, 1).toUpperCase()) .sort((s1, s2) -&gt; Objects.requireNonNull(s1.key()).compareTo(s2.key())) .flatMap(gf -&gt; gf.collectList() .map(cityList -&gt; &#123; ChannelOnlineCityGroupByPinYinBo cityGroupByPinYinBo = new ChannelOnlineCityGroupByPinYinBo(); cityGroupByPinYinBo.setLetter(gf.key()); cityGroupByPinYinBo.setCities(cityList); return cityGroupByPinYinBo; &#125;)); handlehandleä½œç”¨ç›¸å½“äºæ˜¯filterå’Œmapçš„ç»„åˆã€‚]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Reactive</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨alembicè¿›è¡Œæ•°æ®åº“ç‰ˆæœ¬ç®¡ç†]]></title>
    <url>%2F2018%2F09%2F13%2F%E4%BD%BF%E7%94%A8alembic%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%2F</url>
    <content type="text"><![CDATA[è½¬è‡ªï¼šhttps://www.cnblogs.com/blackmatrix/p/6236573.htmlï¼Œåšäº†éƒ¨åˆ†ä¿®æ”¹ å‰è¨€éšç€é¡¹ç›®ä¸šåŠ¡éœ€æ±‚çš„ä¸æ–­å˜æ›´ï¼Œæ•°æ®åº“çš„è¡¨ç»“æ„ä¿®æ”¹éš¾ä»¥é¿å…ï¼Œæ­¤æ—¶å°±éœ€è¦å¯¹æ•°æ®åº“çš„ä¿®æ”¹åŠ ä»¥è®°å½•å’Œæ§åˆ¶ï¼Œä¾¿äºé¡¹ç›®çš„ç‰ˆæœ¬ç®¡ç†å’Œéšæ„çš„å‡çº§å’Œé™çº§ã€‚ Alembic å°±å¯ä»¥å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚Alembic æ˜¯ SQLAlchemy ä½œè€…å¼€å‘çš„ Python æ•°æ®åº“ç‰ˆæœ¬ç®¡ç†å·¥å…·ã€‚ å®‰è£…1pip install alembic é€šè¿‡ pip å‘½ä»¤å®‰è£…ï¼Œå¦‚æœä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼Œè®°å¾—æ¿€æ´»è™šæ‹Ÿç¯å¢ƒåå†æ‰§è¡Œ pip å‘½ä»¤ åŒæ—¶éœ€è¦å®‰è£…çš„è¿˜æœ‰ SQLAlchemy å’Œ PyMysql 12pip install sqlalchemypip install pymysql åˆå§‹åŒ–åœ¨ä½¿ç”¨ alembic ä¹‹å‰ï¼Œéœ€è¦è¿›è¡Œåˆå§‹åŒ–æ“ä½œã€‚ 1alembic init &lt;YOUR_ALEMBIC_DIR&gt; YOUR_ALEMBIC_DIRï¼Œå¯ä»¥å–ä¸€ä¸ªç¬¦åˆé¡¹ç›®åç§°è§„èŒƒçš„ç›®å½•åï¼Œå¦‚ 1alembic init alembic æ­¤æ—¶éœ€è¦æ³¨æ„ï¼Œå¦‚æœä¹‹å‰æ˜¯åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…çš„ alembicï¼Œéœ€è¦æ¿€æ´»è™šæ‹Ÿç¯å¢ƒåï¼Œåœ¨æ‰§è¡Œä¸Šè¿°å‘½ä»¤ã€‚ åŒæ—¶ï¼Œå»ºè®® cd åˆ°é¡¹ç›®æ ¹ç›®å½•å†æ‰§è¡Œåˆå§‹åŒ–æ“ä½œï¼Œå› ä¸º YOUR_ALEMBIC_DIR ä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºã€‚ æ˜¾ç¤ºç±»ä¼¼ç»“æœå³åˆå§‹åŒ–æˆåŠŸã€‚ 12345678Creating directory D:\Project\py_sqlalchemy_demo\alembic ... doneCreating directory D:\Project\py_sqlalchemy_demo\alembic\versions ... doneGenerating D:\Project\py_sqlalchemy_demo\alembic.ini ... doneGenerating D:\Project\py_sqlalchemy_demo\alembic\env.py ... doneGenerating D:\Project\py_sqlalchemy_demo\alembic\README ... doneGenerating D:\Project\py_sqlalchemy_demo\alembic\script.py.mako ... donePlease edit configuration/connection/logging settings in 'D:\\Project\\py_sqlalchemy_demo\\alembic.ini' before proceeding. åˆå§‹åŒ–æˆåŠŸåï¼Œä¼šåœ¨æ‰§è¡Œåˆå§‹åŒ–å‘½ä»¤çš„ç›®å½•ä¸‹ï¼Œç”Ÿæˆä¸€ä¸ª alembic.ini çš„é…ç½®æ–‡ä»¶ï¼ŒåŠä¸€ä¸ª alembic ç›®å½•ï¼Œç›®å½•åå°±æ˜¯ä¹‹å‰è®¾ç½®çš„ YOUR_ALEMBIC_DIRã€‚ ä¿®æ”¹é…ç½®æ–‡ä»¶æ¥ä¸‹æ¥å¯¹ alembic.ini çš„ä¿¡æ¯è¿›è¡Œä¿®æ”¹ã€‚ ä¸»è¦ä¿®æ”¹çš„æ˜¯é…ç½®æ–‡ä»¶ä¸­çš„æ•°æ®åº“è¿æ¥éƒ¨åˆ†ã€‚ 1sqlalchemy.url = driver://user:pass@localhost:port/dbname å°†é…ç½®æ–‡ä»¶ä¸­ï¼Œæ­¤éƒ¨åˆ†æ›¿æ¢æˆå¯¹åº”çš„æ•°æ®åº“è¿æ¥ï¼Œè¿™ä¸ªæ•°æ®åº“è¿æ¥çš„å†™æ³•æ˜¯ä¸ SQLAlchemy åˆ›å»º engine æ—¶æ˜¯ä¸€æ ·çš„ã€‚ å¦‚æˆ‘åœ¨ demo ä¸­ä½¿ç”¨çš„æ˜¯ SQLAlchemy ä¸ PyMysqlï¼Œé‚£æ•°æ®åº“è¿æ¥å°±æ˜¯ç±»ä¼¼å¦‚ä¸‹ 1mysql+pymysql://demo_user:demo123456@127.0.0.1:3306/demo_db ä¿®æ”¹ env.pyé™¤ä¿®æ”¹é…ç½®æ–‡ä»¶å¤–ï¼Œè¿˜éœ€è¦å¯¹ YOUR_ALEMBIC_DIR ç›®å½•ä¸‹çš„ env.py æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚ åœ¨ env.py ä¸­ï¼Œå°† target_metadata è®¾ç½®æˆé¡¹ç›®çš„ modelï¼Œä½¿ alembic èƒ½è·å–åˆ°é¡¹ç›®ä¸­ model å®šä¹‰çš„ä¿¡æ¯ã€‚ å°†åŸå…ˆçš„ 1target_metadata = None ä¿®æ”¹æˆé¡¹ç›®ä¸­çš„ model123456import osimport syssys.path.append(dirname(dirname(abspath(__file__))))from app import dbtarget_metadata = db.metadata åˆ›å»ºæ–°ç‰ˆæœ¬ç”¨ alembic revision -m + æ³¨é‡Š åˆ›å»ºæ•°æ®åº“ç‰ˆæœ¬ 1alembic revision --autogenerate -m "init db" è¿è¡Œåï¼Œç±»ä¼¼å¦‚ä¸‹ç»“æœï¼Œå³åˆ›å»ºç‰ˆæœ¬æˆåŠŸ 1234INFO [alembic.runtime.migration] Context impl MySQLImpl.INFO [alembic.runtime.migration] Will assume non-transactional DDL.INFO [alembic.autogenerate.compare] Detected removed table 'user'Generating D:\Project\py_sqlalchemy_demo\alembic\versions\7b55b3d83158_create_tables.py ... done æ¯æ¬¡ä¿®æ”¹è¿‡ SQLAlchemy çš„ modelï¼Œæ‰§è¡Œæ­¤å‘½ä»¤å³å¯åˆ›å»ºå¯¹åº”çš„ç‰ˆæœ¬ã€‚ æ‰§è¡ŒæˆåŠŸåï¼Œä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ alembic/versions / ä¸‹ç”Ÿæˆçš„å¯¹åº”ç‰ˆæœ¬çš„ py æ–‡ä»¶ã€‚å‘½ä»¤è§„åˆ™æ˜¯ç‰ˆæœ¬å· + æ³¨é‡Šã€‚(è¿™ä¸ªå‘½åè§„åˆ™æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„) åœ¨æ¯æ¬¡åˆ›å»ºæ–°ç‰ˆæœ¬åï¼Œéœ€è¦æ‰§è¡Œå°†æ•°æ®åº“å‡çº§åˆ°æ–°ç‰ˆæœ¬çš„å‘½ä»¤ï¼Œæ‰èƒ½ç»§ç»­æ›´æ–°ç‰ˆæœ¬ã€‚ å˜æ›´æ•°æ®åº“åœ¨æ¯æ¬¡åˆ›å»ºæ–°ç‰ˆæœ¬åï¼Œéœ€è¦æ‰§è¡Œå°†æ•°æ®åº“å‡çº§åˆ°æ–°ç‰ˆæœ¬çš„å‘½ä»¤ï¼Œæ‰èƒ½ç»§ç»­æ›´æ–°ç‰ˆæœ¬ å°†æ•°æ®åº“å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ 1alembic upgrade head è¿è¡Œç»“æœç±»ä¼¼ 1234(venv_win) D:\Project\py_sqlalchemy_demo&gt;alembic upgrade headINFO [alembic.runtime.migration] Context impl MySQLImpl.INFO [alembic.runtime.migration] Will assume non-transactional DDL.INFO [alembic.runtime.migration] Running upgrade 7b55b3d83158 -&gt; b034414f04cd, create tables02 å…¶ä¸­ï¼Œå‘½ä»¤ä¸­çš„ head å’Œ base ç‰¹æŒ‡æœ€æ–°ç‰ˆæœ¬å’Œæœ€åˆç‰ˆæœ¬ã€‚å½“éœ€è¦å¯¹æ•°æ®åº“è¿›è¡Œå‡çº§æ—¶ï¼Œä½¿ç”¨ upgradeï¼Œé™çº§ä½¿ç”¨ downgradeã€‚ å°†æ•°æ®åº“é™çº§åˆ°æœ€åˆç‰ˆæœ¬ 1alembic downgrade base å°†æ•°æ®åº“é™çº§åˆ°æ‰§è¡Œç‰ˆæœ¬ï¼Œä½¿ç”¨ alembic downgrade + ç‰ˆæœ¬å·ï¼Œä¸åŒ…å«æ³¨é‡Šéƒ¨åˆ† 1alembic downgrade &lt;version&gt; å¦‚ 1alembic downgrade 7b55b3d83158 è¿è¡Œç»“æœ 123INFO [alembic.runtime.migration] Context impl MySQLImpl.INFO [alembic.runtime.migration] Will assume non-transactional DDL.INFO [alembic.runtime.migration] Running downgrade b034414f04cd -&gt; 7b55b3d83158, create tables02 å‡çº§ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œalembic upgrade + ç‰ˆæœ¬å· ç¦»çº¿æ›´æ–°ï¼ˆç”Ÿæˆ sql è„šæœ¬ï¼‰åœ¨æŸäº›ä¸é€‚åˆåœ¨çº¿æ›´æ–°çš„æƒ…å†µï¼Œå¯ä»¥é‡‡ç”¨ç”Ÿæˆ sql è„šæœ¬çš„å½¢å¼ï¼Œè¿›è¡Œç¦»çº¿æ›´æ–°ï¼š 1alembic upgrade &lt;version&gt; --sql &gt; migration.sql å¦‚ï¼š 1alembic upgrade ae1027a6acf --sql &gt; migration.sql ä»ç‰¹å®šèµ·å§‹ç‰ˆæœ¬ç”Ÿæˆ sql è„šæœ¬ï¼š 1alembic upgrade &lt;vsersion&gt;:&lt;vsersion&gt; --sql &gt; migration.sql å¦‚ï¼š 1alembic upgrade 1975ea83b712:ae1027a6acf --sql &gt; migration.sql å¦‚æœæ˜¯æ•°æ®åº“é™çº§æ“ä½œï¼ŒæŠŠ upgrade æ›¿æ¢ä¸º downgradeã€‚ æŸ¥è¯¢å½“å‰æ•°æ®åº“ç‰ˆæœ¬å·åœ¨å¯¹æ•°æ®åº“è¿›è¡Œå‡çº§æˆ–é™çº§åï¼Œä¼šåœ¨å½“å‰æ“ä½œçš„æ•°æ®åº“ä¸­æ–°å¢ä¸€ä¸ªè¡¨ï¼›alembic_versionã€‚ è¡¨ä¸­çš„ version_num å­—æ®µè®°å½•äº†å½“å‰çš„æ•°æ®åº“ç‰ˆæœ¬å·ã€‚ æ¸…é™¤æ‰€æœ‰ç‰ˆæœ¬å¦‚æœéœ€è¦æ¸…é™¤æ‰€æœ‰çš„ç‰ˆæœ¬ï¼Œå°† versions åˆ é™¤æ‰ï¼ŒåŒæ—¶åˆ é™¤æ•°æ®åº“çš„ alembic_version è¡¨ã€‚ å‚è€ƒèµ„æ–™http://alembic.zzzcomputing.com/en/latest/tutorial.html http://www.codeweblog.com/%E5%B8%B8%E8%A7%81%E7%9A%84sqlalchemy%E5%88%97%E7%B1%BB%E5%9E%8B-%E9%85%8D%E7%BD%AE%E9%80%89%E9%A1%B9%E5%92%8C%E5%85%B3%E7%B3%BB%E9%80%89%E9%A1%B9/ http://blog.csdn.net/wenxuansoft/article/details/50242957]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>æ•™ç¨‹</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Django REST frameworkå•å…ƒæµ‹è¯•ã€ŒUnit Testingã€]]></title>
    <url>%2F2017%2F09%2F05%2Fdjango-rest-framework%E6%8E%A5%E5%8F%A3%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%2F</url>
    <content type="text"><![CDATA[settingsDjangoè¿è¡Œå•å…ƒæµ‹è¯•æ—¶ï¼Œä¼šä»¥settingsé‡Œçš„æ•°æ®åº“é…ç½®é‡Œçš„NAMEæ–°å»ºä¸€ä¸ªä»¥test_å¼€å…³çš„ä¸´æ—¶æ•°æ®åº“ï¼Œå¹¶åœ¨æµ‹è¯•ç»“æŸååˆ é™¤ï¼Œé»˜è®¤çš„æµ‹è¯•æ•°æ®åº“ä¼šä»¥å½“å‰çš„migrationsæ–‡ä»¶æ¥åˆ›å»ºæ•°æ®è¡¨å¹¶è¿›è¡Œè¿ç§»ï¼Œä½†å¦‚æœmigrationsæ–‡ä»¶å¾ˆå¤šï¼Œæ¯æ¬¡è¿è¡Œæ—¶é—´å°†å¾ˆä¹…ï¼Œæ‰€ä»¥å¯ä»¥è·³è¿‡è¿ç§»ï¼Œç›´æ¥ä»¥å½“å‰Modelç»“æœæ¥åˆ›å»ºè¡¨ä»¥æå‡æµ‹è¯•æ•ˆç‡ï¼Œå¦‚æœæƒ³è¿›ä¸€æ­¥åŠ å¿«æµ‹è¯•æ—¶åˆ›å»ºæ•°æ®åº“çš„é€Ÿåº¦ï¼Œå¯ä»¥ä½¿ç”¨SQLiteæ•°æ®åº“å¼•æ“ï¼Œå½“ä½¿ç”¨SQLiteæ•°æ®åº“å¼•æ“æ—¶ï¼Œæµ‹è¯•å°†é»˜è®¤ä½¿ç”¨å†…å­˜æ•°æ®åº“ã€‚1234567891011121314151617181920TESTING = len(sys.argv) &gt; 1 and sys.argv[1] == 'test'if TESTING: # å½“ä½¿ç”¨SQLiteæ•°æ®åº“å¼•æ“æ—¶ï¼Œæµ‹è¯•å°†é»˜è®¤ä½¿ç”¨å†…å­˜æ•°æ®åº“ DATABASES['default'] = &#123; 'ENGINE': 'django.db.backends.sqlite3', &#125; # å•å…ƒæµ‹è¯•æ—¶, è·³è¿‡migrate, æ çš„æå‡æµ‹è¯•è¿ æ•ˆç‡ # å…·ä½“å¯ä»¥æŸ¥çœ‹ # https://simpleisbetterthancomplex.com/tips/2016/08/19/django-tip-12-disabl ing-migrations-to-speed-up-unit-tests.html # https://stackoverflow.com/questions/36487961/django-unit-testing-taking-a- very-long-time-to-create-test-database class DisableMigrations(object): def __contains__(self, item): return True def __getitem__(self, item): return "notmigrations" MIGRATION_MODULES = DisableMigrations() ç¤ºä¾‹ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586# -*- coding: utf-8 -*-from __future__ import absolute_importfrom __future__ import unicode_literalsfrom rest_framework import statusfrom rest_framework.test import APITestCasefrom apps.account.models import Userfrom apps.account.tests.test_utils import TestCaseUtils__author__ = 'jeff'class UserAPITests(APITestCase, TestCaseUtils): # åˆå§‹æ•°æ®åŠ è½½ï¼Œå¯ä½¿ç”¨manage.py dumpdata [app_label app_label app_label.Model]ç”Ÿæˆ # xml/yaml/jsonæ ¼å¼çš„æ•°æ® # ä¸€èˆ¬æ”¾åœ¨æ¯ä¸ªåº”ç”¨çš„fixturesç›®å½•ä¸‹, åªéœ€è¦å¡«å†™jsonæ–‡ä»¶åå³å¯ï¼Œdjangoä¼šè‡ªåŠ¨æŸ¥æ‰¾ # æ­¤æµ‹è¯•ç±»è¿è¡Œç»“æŸåï¼Œä¼šè‡ªåŠ¨ä»æ•°æ®åº“é‡Œé”€æ¯è¿™ä»½æ•°æ® # fixtures = ['user.json'] def setUp(self): # åœ¨ç±»é‡Œæ¯ä¸ªæµ‹è¯•æ–¹æ³•æ‰§è¡Œå‰ä¼šè¿è¡Œ # åœ¨æ­¤æ–¹æ³•æ‰§è¡Œå‰ï¼Œdjangoä¼šè¿è¡Œä»¥ä¸‹æ“ä½œ # 1. é‡ç½®æ•°æ®åº“ï¼Œæ•°æ®åº“æ¢å¤åˆ°æ‰§è¡Œmigrateåçš„çŠ¶æ€ # 2. åŠ è½½fixturesæ•°æ® # æ‰€ä»¥æ¯ä¸ªæµ‹è¯•æ–¹æ³•é‡Œå¯¹æ•°æ®åº“çš„æ“ä½œéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¼šç›¸äº’å½±å“ kwargs = dict(mobile_phone='15999999999', password='111111') self.user = User.app_user_objects.create(**kwargs) def tearDown(self): # åœ¨ç±»é‡Œæ¯ä¸ªæ–¹æ³•ç»“æŸæ‰§è¡Œåä¼šè¿è¡Œ pass @classmethod def setUpClass(cls): # åœ¨ç±»åˆå§‹åŒ–æ—¶æ‰§è¡Œï¼Œå¿…é¡»è°ƒç”¨super super(UserAPITests, cls).setUpClass() cls.token = '' @classmethod def tearDownClass(cls): # åœ¨æ•´ä¸ªæµ‹è¯•ç±»è¿è¡Œç»“æŸæ—¶æ‰§è¡Œï¼Œå¿…é¡»è°ƒç”¨super super(UserAPITests, cls).tearDownClass() def test_app_user_login_success(self): """APPç”¨æˆ·ç™»å½•æ¥å£æˆåŠŸæƒ…å†µ""" # pathä½¿ç”¨ç¡¬ç¼–ç ï¼Œä¸è¦ä½¿ç”¨reverseåè§£æurlï¼Œä»¥ä¾¿åœ¨ä¿®æ”¹urlä¹‹åèƒ½åŠæ—¶å‘ç°æ¥å£åœ°å€å˜åŒ–ï¼Œå¹¶é€šçŸ¥æ¥å£ä½¿ç”¨äººå‘˜ path = '/api/api-token-auth/' data = &#123;'mobile_phone': '15999999999', 'password': '111111'&#125; response = self.client.post(path, data) # response.dataæ˜¯å­—å…¸å¯¹è±¡ # response.contentæ˜¯jsonå­—ç¬¦ä¸²å¯¹è±¡ self.assertEquals(response.status_code, status.HTTP_200_OK, 'ç™»å½•æ¥å£è¿”å›çŠ¶æ€ç é”™è¯¯: é”™è¯¯ä¿¡æ¯: &#123;&#125;'.format(response.content)) self.assertIn('token', response.data, 'ç™»å½•æˆåŠŸåæ— tokenè¿”å›') def test_app_user_login_with_error_pwd(self): path = '/api/api-token-auth/' data = &#123;'mobile_phone': '15999999999', 'password': '123456'&#125; response = self.client.post(path, data) self.assertEquals(response.status_code, status.HTTP_400_BAD_REQUEST) self.assertJSONEqual('&#123;"errors":["ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ã€‚"]&#125;', response.content) def test_get_app_user_profile_success(self): """æˆåŠŸè·å–appç”¨æˆ·ä¸ªäººä¿¡æ¯æ¥å£""" path = '/api/account/user/profile/' headers = self.get_headers(user=self.user) response = self.client.get(path, **headers) # æ ¡éªŒä¸€äº›å…³é”®æ•°æ®å³å¯ # å¦‚æœæ˜¯åˆ›å»ºæ–°æ•°æ®ï¼Œä¸ä»…è¦æ ¡éªŒè¿”å›çš„çŠ¶æ€ç å’Œæ•°æ®ï¼Œ # è¿˜éœ€è¦åˆ°ä½¿ç”¨Django ORMå»æ•°æ®åº“æŸ¥è¯¢æ•°æ®æ˜¯å¦åˆ›å»ºæˆåŠŸ self.assertEqual(response.status_code, status.HTTP_200_OK) self.assertEqual(6, len(response.data)) self.assertIn('url', response.data) self.assertIn('mobile_phone', response.data) self.assertIn('avatar', response.data) self.assertIn('company_name', response.data) self.assertIn('username', response.data) self.assertIn('is_inviter', response.data) def test_get_app_user_profile_without_token(self): """ä¸ä¼ tokenè¯·æ±‚è·å–ç”¨æˆ·ä¿¡æ¯æ¥å£""" path = '/api/account/user/profile/' response = self.client.get(path) self.assertEqual(response.status_code, status.HTTP_401_UNAUTHORIZED) æ–­è¨€123456789101112131415161718192021222324252627282930# æ¥è‡ªunittest.case.TestCaseassertFalse(expr, msg=None)assertTrue(expr, msg=None)assertEqual(first, second, msg=None)assertNotEqual(first, second, msg=None)assertAlmostEqual(first, second, places=None, msg=None, delta=None)assertNotAlmostEqual(first, second, places=None, msg=None, delta=None)assertSequenceEqual(seq1, seq2, msg=None, seq_type=None)assertListEqual(list1, list2, msg=None)assertTupleEqual(tuple1, tuple2, msg=None)assertSetEqual(set1, set2, msg=None)assertIn(member, container, msg=None)assertNotIn(member, container, msg=None)assertIs(expr1, expr2, msg=None)assertIsNot(expr1, expr2, msg=None)assertDictEqual(d1, d2, msg=None)assertDictContainsSubset(expected, actual, msg=None)assertItemsEqual(expected_seq, actual_seq, msg=None)assertMultiLineEqual(first, second, msg=None)assertLess(a, b, msg=None)assertLessEqual(a, b, msg=None)assertGreater(a, b, msg=None)assertGreaterEqual(a, b, msg=None)assertIsNone(obj, msg=None)assertIsInstance(obj, cls, msg=None)assertNotIsInstance(obj, cls, msg=None)assertRaisesRegexp(expected_exception, expected_regexp, callable_obj=None, *args, **kwargs)assertRegexpMatches(text, expected_regexp, msg=None)assertNotRegexpMatches(text, unexpected_regexp, msg=None) æµ‹è¯•æ¥å£åœ°å€æµ‹è¯•æ¥å£åœ°å€å»ºè®®ä½¿ç”¨ç¡¬ç¼–ç ï¼Œä¸è¦ä½¿ç”¨reverseåè§£æurlï¼ŒåŸå› æ˜¯æ¥å£åœ°å€å°½é‡é¿å…æ”¹å˜ï¼Œå¦‚æœå¿…é¡»ä¿®æ”¹ï¼Œéœ€è¦ä»¥å¾ˆæ˜æ˜¾çš„æ–¹å¼æ¥æé†’å¼€å‘äººå‘˜ä»¥ä¾¿å¼€å‘äººå‘˜é€šçŸ¥æ¥å£ä½¿ç”¨äººå‘˜ã€‚ æµ‹è¯•æ•°æ®å‡†å¤‡æœ‰å¦‚ä¸‹ä¸¤ç§æ–¹æ³•å‡†å¤‡æµ‹è¯•æ•°æ® ç®€å•çš„æ•°æ®å¯ä»¥åœ¨setUp()é‡Œæ¥åˆ›å»ºï¼› å¤æ‚æ•°æ®å¯ä»¥ä½¿ç”¨fixturesæ¥å†™ï¼Œå¹¶åœ¨èµ‹å€¼ç»™æµ‹è¯•ç±»çš„fixtureså±æ€§ï¼›fixturesæ•°æ®ç¤ºä¾‹123456789101112131415161718[ &#123; "model": "myapp.person", "pk": 1, "fields": &#123; "first_name": "John", "last_name": "Lennon" &#125; &#125;, &#123; "model": "myapp.person", "pk": 2, "fields": &#123; "first_name": "Paul", "last_name": "McCartney" &#125; &#125;] æµ‹è¯•è¦†ç›–ç‡ï¼ˆcoverageï¼‰åœ¨Pycharmé‡Œå¯ä»¥é€šç”¨å³é”®é¡¹ç›®ï¼Œé€‰æ‹©Run &#39;Test:&#39; with Coverageæ¥æŸ¥çœ‹æµ‹è¯•çš„è¦†ç›–ç‡ã€‚ä¹Ÿå¯ä»¥é€šè¿‡å…¶å®ƒç¬¬ä¸‰æ–¹åŒ…æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡ï¼Œå…·ä½“è¯·è‡ªå·±æŸ¥è¯¢ã€‚]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Django</tag>
        <tag>restful api</tag>
        <tag>æ¥å£</tag>
        <tag>å•å…ƒæµ‹è¯•</tag>
        <tag>æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åœ¨macOSä¸Šæ›´æ”¹Jenkinsçš„é»˜è®¤ç”¨æˆ·ï¼Œè§£å†³æƒé™é—®é¢˜]]></title>
    <url>%2F2017%2F08%2F24%2F%E5%9C%A8macos%E4%B8%8A%E6%9B%B4%E6%94%B9jenkins%E9%BB%98%E8%AE%A4%E7%94%A8%E6%88%B7%E8%A7%A3%E5%86%B3%E6%9D%83%E9%99%90%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[åœ¨MacOSä¸Šä½¿ç”¨dmgå®‰è£…åŒ…å®‰è£…å®ŒJenkinsä¹‹åï¼Œå‘äº†Jenkinsè‡ªåŠ¨åœ¨ç³»ç»Ÿé‡Œæ–°å»ºäº†ä¸€ä¸ªåä¸ºjenkinsçš„ç”¨æˆ·ã€‚é»˜è®¤çš„ï¼ŒJenkinsç¨‹åºé‡Œçš„è‡ªåŠ¨åŒ–æ„å»ºæ“ä½œéƒ½æ˜¯ä»¥è¿™ä¸ªç”¨æˆ·èº«ä»½æ¥è¿›è¡Œçš„ï¼Œæ‰€ä»¥æœ‰æ—¶ä¼šå‡ºç°ä¸€äº›æƒé™é—®é¢˜ï¼Œè§£å†³æ–¹æ³•å°±æ˜¯ä¿®æ”¹Jenkinsé…ç½®æ–‡ä»¶ï¼ŒæŠŠJenkinsè¿è¡Œçš„é»˜è®¤è´¦æˆ·æ”¹æˆå¹³æ—¶ç”¨çš„è´¦æˆ·ã€‚ 12345678910111213#åœæ­¢Jenkinssudo launchctl unload /Library/LaunchDaemons/org.jenkins-ci.plist# ä¿®æ”¹Groupå’ŒUser# &lt;ç”¨æˆ·å&gt;å¡«å†™ä½ çš„MacOSç”¨æˆ·åï¼Œä¸çŸ¥é“çš„å¯ä»¥åœ¨å‘½ä»¤è¡Œä½¿ç”¨whoamiæŸ¥çœ‹ï¼Œä¸éœ€è¦å°–æ‹¬å·$ sudo vim +1 +/daemon +â€™s/daemon/staff/â€™ +/daemon +â€™s/daemon/&lt;ç”¨æˆ·å&gt; +wq org.jenkins-ci.plist# å¯èƒ½ç›¸åº”æ–‡ä»¶å¤¹çš„æƒé™sudo chown -R &lt;ç”¨æˆ·å&gt;:staff /Users/Shared/Jenkins/sudo chown -R &lt;ç”¨æˆ·å&gt;:staff /var/log/jenkins/# å¯åŠ¨Jenkinssudo launchctl load /Library/LaunchDaemons/org.jenkins-ci.plist]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>macOS</tag>
        <tag>Jenkins</tag>
        <tag>æƒé™</tag>
        <tag>ç”¨æˆ·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å†…ç½‘ç©¿é€å·¥å…·frpå®¢æˆ·ç«¯è‡ªå®šä¹‰å­åŸŸåè®¿é—®é…ç½®]]></title>
    <url>%2F2017%2F08%2F16%2F%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E5%B7%A5%E5%85%B7frp%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%90%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[å‰æA: å…¬ç½‘ç”µè„‘B: å†…ç½‘ç”µè„‘ ä¸‹è½½ä»releases)ä¸‹è½½ç³»ç»Ÿå¯¹åº”çš„å‹ç¼©åŒ…ï¼ŒMacå¯ä½¿ç”¨darwin amd64çš„åŒ…ï¼Œåœ¨å…¬ç½‘ç”µè„‘å’Œæœ¬åœ°ç”µè„‘å„æ”¾ä¸€ä»½ã€‚ é…ç½®å…¬ç½‘ç”µè„‘ä¸Šfrps.ini1234567891011121314151617[common]# ç”¨äºæ¥æ”¶ frpc è¿æ¥çš„ç«¯å£bind_port = 7000# é€šè¿‡æ­¤ç«¯å£è®¿é—®httpæœåŠ¡vhost_http_port = 8080# æ—¥å¿—æ–‡ä»¶è¾“å‡ºä½ç½®log_file = ./frps.log# æ—¥å¿—ç­‰çº§log_level = info# åŸŸåsubdomain_host = example.com# frpç®¡ç†åå°ç«¯å£dashboard_port = 7500# frpç®¡ç†åå°ç”¨æˆ·ådashboard_user = admin# frpç®¡ç†åå°å¯†ç dashboard_pwd = admin æœ¬åœ°ç”µè„‘ä¸Šfrpc.ini123456789101112[common]# å…¬ç½‘ç”µè„‘IPserver_addr = 111.111.111.111# frpè¿æ¥çš„ç«¯å£server_port = 7000[web]type = http# æœ¬åœ°httpæœåŠ¡ç«¯å£local_port = 8080# å­åŸŸåå‰ç¼€, å­åŸŸåå‰ç¼€é‡Œä¸è¦ä½¿ç”¨ä¸‹åˆ’çº¿&quot;_&quot;ï¼Œä¸ç„¶å¯èƒ½ä¼šå‡ºç°è«åå…¶å¦™çš„400é”™è¯¯å¯ä»¥ç”¨&quot;-&quot;ä»£æ›¿ã€‚subdomain = iblogc é…ç½®åŸŸåexample.comçš„Aè®°å½•çš„æ³›è§£æ*.example.comæŒ‡å‘å…¬ç½‘ç”µè„‘IP111.111.111.111 è¿è¡Œ åœ¨å†…ç½‘ç”µè„‘Bä¸Š8080ç«¯å£è¿è¡ŒhttpæœåŠ¡ åœ¨å…¬ç½‘ç”µè„‘ä¸Šè¿è¡Œï¼ˆWindowsç”µè„‘ä¸Šè¿è¡Œè¯·å»æ‰./ï¼‰ 1./frps -c ./frps.ini åœ¨æœ¬åœ°ç”µè„‘ä¸Šè¿è¡Œï¼ˆWindowsç”µè„‘ä¸Šè¿è¡Œè¯·å»æ‰./ï¼‰ 1./frpc -c ./frpc.ini æˆåŠŸåœ¨ä»»ä½•ä¸€å°èƒ½è”ç½‘çš„æœºå™¨ä¸Šè®¿é—® http://iblogc.example.com:8080 å³å¯è®¿é—®å†…ç½‘ç”µè„‘Bä¸Šçš„httpæœåŠ¡ã€‚åœ¨ä»»åŠ¡ä¸€å°èƒ½è”ç½‘çš„æœºå™¨ä¸Šè®¿é—®111.111.111.111:7500å³å¯è®¿é—®frpçš„ç®¡ç†åå°ã€‚ frpsæœåŠ¡ç«¯ä¸nginxå¯å…±ç”¨80ç«¯å£1234567891011server &#123; listen 80; server_name *.example.com; location / &#123; proxy_pass http://127.0.0.1:8080; proxy_redirect http://$host/ http://$http_host/; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Host $host; &#125;&#125;]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>æ•™ç¨‹</tag>
        <tag>å†…ç½‘ç©¿é€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MacOSè¿œç¨‹è¿æ¥Windows]]></title>
    <url>%2F2017%2F08%2F08%2Fmac%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5windows%2F</url>
    <content type="text"><![CDATA[MacOSè¿æ¥Windowsæ—¶ï¼Œé™¤äº†åœ¨Windowsä¸Šæ‰“å¼€è¿œç¨‹æ¡Œé¢åŠŸèƒ½å¤–ï¼Œè¿˜éœ€è¦ä¿®æ”¹Windowsçš„ç»„ç­–ç•¥æ‰èƒ½æˆåŠŸè¿æ¥ã€‚ å¼€å§‹-è¿è¡Œ-gpedit.mscï¼Œè¿›å…¥ç»„ç­–ç•¥ç¼–è¾‘å™¨ã€‚ åœ¨å·¦ä¾§è¾¹æ ä¸­å±•å¼€ï¼Œè®¡ç®—æœºé…ç½®-ç®¡ç†æ¨¡æ¿-Windowsç»„ä»¶-è¿œç¨‹æ¡Œé¢æœåŠ¡-è¿œç¨‹æ¡Œé¢ä¼šè¯ä¸»æœº-å®‰å…¨ï¼Œä¿®æ”¹ä»¥ä¸‹ä¸¤é¡¹ã€‚ è¿œç¨‹ï¼ˆRDPï¼‰è¿æ¥è¦æ±‚ä½¿ç”¨æŒ‡å®šçš„å®‰å…¨å±‚ï¼Œæ”¹ä¸ºå¯ç”¨ï¼Œå®‰å…¨å±‚é€‰æ‹©RDPã€‚ è¦æ±‚ä½¿ç”¨ç½‘ç»œçº§åˆ«çš„èº«ä»½éªŒè¯å¯¹è¿œç¨‹è¿æ¥çš„ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ï¼Œæ”¹ä¸ºç¦ç”¨ã€‚ å…³é—­ç»„ç­–ç•¥ç¼–è¾‘å™¨ï¼Œé‡è¯•è¿œç¨‹ï¼Œå¦‚æœä¸è¡Œé‡å¯Windowså†é‡è¯•è¿œç¨‹å³å¯ã€‚]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>è¿œç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Django Rest frameworkå…¥é—¨ç¬”è®°åŠè·³å‘è®°å½•]]></title>
    <url>%2F2016%2F12%2F17%2Fdjango-rest-framework%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0%E5%8F%8A%E8%B7%B3%E5%9D%91%E8%AE%B0%E5%BD%95%2F</url>
    <content type="text"><![CDATA[æ›´æ–°è®°å½•2016-01-26 åˆç¨¿ åºåˆ—åŒ–æ—¶åµŒå¥—æ˜¾ç¤ºå¤–é”®å…³è”å­—æ®µ è‡ªåŠ¨ä½¿ç”¨depthå‚æ•°æŒ‡å®šå¤–é”®æ·±åº¦ æ‰‹åŠ¨æŒ‡å®šä½¿ç”¨å¤–é”®å¯¹åº”modelçš„å°å†™ä¸ºå±æ€§ï¼Œå¤–é”®å¯¹åº”çš„modelåºåˆ—åŒ–ç¨‹åºä¸ºå€¼ä»¥ä¸‹ä¾‹å­åœ¨HospitalPicåºåˆ—åŒ–ç»“æœé‡ŒåµŒå¥—æ˜¾ç¤ºHospitalmodels.py 1234567from django.db import modelsclass Hospital(models.Model): name = models.CharField() class HospitalPic(models.Model): hospital = models.ForeignKey(Hospital) serializers.py 1234567891011121314from rest_framework import serializersclass HospitalSerializer(serializers.HyperlinkedModelSerializer): class Meta: model = Hospital fields = '__all__' class HospitalPicSerializer(serializers.HyperlinkedModelSerializer): hospital = HospitalSerializer() class Meta: model = HospitalPic fields = '__all__' åå‘å…³ç³»åµŒå¥—åœ¨Hospitalåºåˆ—åŒ–ç»“æœé‡ŒåµŒå¥—æ˜¾ç¤ºHospitalPicserializers.py 12345678910111213from rest_framework import serializersclass HospitalPicSerializer(serializers.HyperlinkedModelSerializer): class Meta: model = HospitalPic fields = '__all__'class HospitalSerializer(serializers.HyperlinkedModelSerializer): hospitalpic_set = HospitalPicSerializer(many=Ture) class Meta: model = Hospital fields = '__all__' åœ¨åºåˆ—åŒ–å¯¹è±¡é‡Œæ·»åŠ å…³è”è¡¨çš„å­—æ®µå†…å®¹å®šä¹‰ä¸€ä¸ªserializer Fieldï¼Œå¹¶æ·»åŠ å‚æ•°sourceæŒ‡å‘å¤–é”®å¯¹å¯¹åº”çš„å­—æ®µï¼ˆsourceå€¼å…¶å®æ˜¯ä»å½“å‰åºåˆ—åŒ–çš„å®ä¾‹çš„å±æ€§ï¼‰1my_address= serializers.ReadOnlyField(source='address.full_address') åœ¨åºåˆ—åŒ–å¯¹è±¡é‡Œæ·»åŠ è‡ªå®šä¹‰å†…å®¹123456789101112from django.contrib.auth.models import Userfrom django.utils.timezone import nowfrom rest_framework import serializers class UserSerializer(serializers.ModelSerializer): days_since_joined = serializers.SerializerMethodField() class Meta: model = User def get_days_since_joined(self, obj): return (now() - obj.date_joined).days ä½¿ç”¨ViewSetï¼Œå¹¶ä¸æœ‰è®¾ç½®querysetï¼Œè€Œæ˜¯é‡å†™äº†get_querysetæ—¶ï¼Œéœ€è¦åœ¨routeré‡Œå¢åŠ base_nameå‚æ•°ï¼ˆbase_nameä¸ºrouterä¸ºViewSetæ³¨å†Œurlæ—¶è‡ªåŠ¨æ·»åŠ çš„nameå‰ç¼€ï¼Œå¦‚æœæœªè®¾ç½®åˆ™ä»ViewSetçš„queryseté‡Œå–ï¼Œä½¿ç”¨ViewSetè‡ªåŠ¨ç”Ÿæˆçš„url nameä¸º&lt;base_name&gt;-list &lt;base_name&gt;-detail ç­‰ï¼‰views.py123456class ContactViewSet(viewsets.ModelViewSet): serializer_class = ContactSerializer permission_classes = (permissions.IsAuthenticated,) def get_queryset(self): return self.request.user.contact_set.all() urls.py1router.register(r'contact', ContactViewSet, base_name='contact') æœªè®¾ç½®base_nameä¼šæŠ¥ä¸‹é¢é”™è¯¯1&apos;base_name&apos; argument not specified, and could not automatically determine the name from the viewset, as it does not have a &apos;.queryset&apos; attribute. ç»™apiæ¥å£çš„urlæ·»åŠ äº†å‘½åç©ºé—´namespaceurls.py1url(r'^api/', include(router.urls, namespace='api')), éœ€è¦å¯¹HyperlinkedRelatedFieldå­—æ®µçš„å‚æ•°è¿›è¡Œä¿®æ”¹serializers.py12345678class HospitalPicSerializer(serializers.HyperlinkedModelSerializer): class Meta: model = HospitalPic fields = '__all__' extra_kwargs = &#123; 'url': &#123;'view_name': 'api:hospitalpic-detail'&#125;, 'hospital': &#123;'view_name': 'api:hospital-detail'&#125; &#125; ä¸ç„¶ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯1Could not resolve URL for hyperlinked relationship using view name "user-detail". You may have failed to include the related model in your API, or incorrectly configured the `lookup_field` attribute on this field. ä¸è¿‡è¯è¯´æˆ‘ä»¬å…¨apiçš„urlåŠ namespaceä¸€èˆ¬æ˜¯ä¸ºäº†ç‰ˆæœ¬æ§åˆ¶ï¼Œæ‰€ä»¥æœ‰ä¸€ç§ç®€å•çš„æ–¹æ³•,åªè¦åœ¨settings.pyæ·»åŠ åŸºäºnamespaceçš„ç‰ˆæœ¬æ§åˆ¶ï¼Œè¿™æ ·å°±ä¸éœ€è¦ä¿®æ”¹HyperlinkedRelatedFieldå­—æ®µçš„view_nameäº†urls.py12url(r'^api/v1/', include(router.urls, namespace='v1')),url(r'^api/v2/', include(router.urls, namespace='v2')), settings.py12345REST_FRAMEWORK = &#123; â€¦â€¦ 'DEFAULT_VERSIONING_CLASS': 'rest_framework.versioning.NamespaceVersioning', â€¦â€¦&#125; è¦drfçš„é”™è¯¯æç¤ºä¸ºä¸­æ–‡ï¼Œéœ€è¦è®¾ç½®1LANGUAGE_CODE = 'zh-CN' å¦‚æœè®¾ç½®ä¸º1LANGUAGE_CODE = 'zh-Hans' è™½ç„¶djangoé»˜è®¤è¡¨å•é”™è¯¯ä¼šè¾“å‡ºä¸­æ–‡ï¼Œä½†drfè¿˜æ˜¯è¾“å‡ºè‹±æ–‡ djangoçš„validatorså¯ä»¥ç›´æ¥åœ¨drfä¸­ä½¿ç”¨ï¼Œä¸éœ€è¦åšä»»ä½•ä¿®æ”¹å½“å­—æ®µé‡Œçš„å±æ€§editable=Falseæ—¶ï¼ŒModelSerializeré‡Œè¯¥å­—æ®µä¼šæŠ›å¼ƒmodelé‡Œæ˜¾å¼å’Œéšå¼ï¼ˆuniqueï¼‰çš„æ‰€æœ‰validatorsSerializeré‡Œwrite_onlyå†™åœ¨fieldé‡Œå’Œå†™åœ¨extra_kwargsé‡Œæ˜¯æœ‰åŒºåˆ«çš„ï¼Œ123456789101112131415161718192021222324252627282930313233343536373839class UserRegisterSerializer(serializers.ModelSerializer): """ç”¨æˆ·æ³¨å†ŒSerializer""" code = serializers.CharField(min_length=4, max_length=6, label=_('éªŒè¯ç '), help_text=_('éªŒè¯ç '), write_only=True) re_password = serializers.CharField(label=_('é‡å¤å¯†ç '), help_text=_('é‡å¤å¯†ç '), validators=validators.password_validators(), write_only=True) class Meta: model = User fields = ('mobile_phone', 'code', 'password', 're_password') extra_kwargs = &#123;'password': &#123;'write_only': True&#125; &#125; def validate(self, attrs): """ Check that the start is before the stop. """ if attrs['password'] != attrs['re_password']: raise serializers.ValidationError(_('å¯†ç ä¸ä¸€è‡´')) # æ ¡éªŒéªŒè¯ç  verify_result = Sms(attrs['mobile_phone']).verify_sms_code( attrs.pop('code')) if not verify_result: error = verify_result.get('error') raise ParseError(error) return attrs def create(self, validated_data): user = User( username=validated_data['mobile_phone'], mobile_phone=validated_data['mobile_phone'], ) user.set_password(validated_data['password']) user.save() return user å› ä¸ºcreate()è¿™ä¸ªæ–¹æ³•returnäº†ä¸€ä¸ªuserå®ä¾‹ï¼ŒUseré‡Œæ²¡æœ‰çš„å­—æ®µcodeå’Œre_passwordéœ€è¦å°†write_onlyå†™åœ¨fieldå‚æ•°é‡Œï¼Œä¸ç„¶ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯123AttributeError: Got AttributeError when attempting to get a value for field `code` on serializer `UserRegisterSerializer`.The serializer field might be named incorrectly and not match any attribute or key on the `User` instance.Original exception text was: &apos;User&apos; object has no attribute &apos;code&apos;. å¦‚æœä½¿ç”¨django-rest-swaggeræŠ¥ä»¥ä¸‹é”™è¯¯1Can&apos;t read from server. It may not have the appropriate access-control-origin settings. æ³¨é‡Šæ‰è®¾ç½®é‡Œçš„1# 'base_path': '127.0.0.1:8000/docs', serializer.dataå’Œserializer.validated_dataåœ¨serializeråªä½¿ç”¨dataå‚æ•°å®ä¾‹åŒ–çš„æ—¶ï¼š serializer.dataæ˜¯åŸå§‹æ•°æ®ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œserializer.validated_dataæ˜¯è¿›è¡Œæ•°æ®éªŒè¯å¹¶è½¬æ¢æˆå¯¹åº”æ•°æ®ç±»å‹çš„æ•°æ®ã€‚ ä¸¤è€…è€…å¿…é¡»åœ¨serializerè°ƒç”¨is_validæ–¹æ³•åæ‰èƒ½è°ƒç”¨åœ¨serializeråªä½¿ç”¨instanceå‚æ•°å®ä¾‹åŒ–æ—¶ï¼š åªæœ‰serializer.dataæ²¡æœ‰serializer.validated_dataï¼Œå¹¶ä¸”serializer.dataé‡Œçš„æ•°æ®ä¹Ÿæ˜¯å­—ç¬¦ä¸²ï¼› æ²¡æœ‰æ–¹æ³•is_validï¼› å³is_validå’Œvalidated_dataåªåœ¨æœ‰dataå‚æ•°å®ä¾‹åŒ–æ—¶æ‰å¯è°ƒç”¨ï¼› åœ¨serializeré‡Œè·å–åŸå§‹è¯·æ±‚ä¿¡æ¯é»˜è®¤çš„ï¼Œä¸Šä¸‹æ–‡ä¿¡æ¯ä¼šè¢«ä¼ é€’åˆ°serializeré‡Œï¼Œæ‰€ä»¥åœ¨serializerå¯ä»¥ç›´æ¥ä½¿ç”¨self.context[&#39;request&#39;]æ¥è·å–è¯·æ±‚ä¿¡æ¯ã€‚ï¼ˆåœ¨è¦ç»§æ‰¿è‡ªviewsets.GenericViewSetçš„ç±»é‡Œä½¿ç”¨çš„serializeræ‰èƒ½å–åˆ°ï¼Œå¦‚æœæ˜¯ç»§æ‰¿APIViewçš„ï¼Œè‡ªå·±ä¼ å…¥å³å¯serializer = self.serializer_class(data=request.data, context={&#39;request&#39;: request})ï¼‰ è‡ªå®šä¹‰serializerå­—æ®µè‡ªå®šä¹‰å­—æ®µç»§æ‰¿serializers.Fieldï¼Œto_representationæ–¹æ³•å¤„ç†å‡ºæ¥çš„æ•°æ®ç”¨æ¥åºåˆ—åŒ–æ˜¾ç¤ºï¼Œto_internal_valueå¤„ç†æ¥æ”¶åˆ°çš„æ•°æ®ï¼Œget_attributeæ–¹æ³•æŒ‡å®šè¿™ä¸ªå­—æ®µè®¿é—®çš„å®ä¾‹å±æ€§ï¼Œget_valueæ–¹æ³•æŒ‡å®š12345678910111213141516class QiNiuField(serializers.Field): def get_attribute(self, instance): # ï¼ˆåºåˆ—åŒ–æ—¶ï¼‰ä»æ¨¡å‹å®ä¾‹ä¸­å–ä¸€ä¸ªå€¼ç»™è¿™ä¸ªå­—æ®µå¤„ç†,ä¹Ÿå¯ä»¥ä½¿ç”¨`source`å‚æ•°æŒ‡å®š return instance.key def get_value(self, dictionary): # ï¼ˆååºåˆ—åŒ–æ—¶ï¼‰ä»ä¼ å…¥æ•°æ®ä¸­æå–ä¸€ä¸ªå€¼ç»™è¿™ä¸ªå­—æ®µå¤„ç† return super(QiNiuField, self).get_value(dictionary) def to_representation(self, value): # ï¼ˆåºåˆ—åŒ–æ—¶ï¼‰å¤„ç†å‡ºæ¥çš„æ•°æ®ç”¨æ¥åºåˆ—åŒ–æ˜¾ç¤º return value.url def to_internal_value(self, data): # ï¼ˆååºåˆ—åŒ–æ—¶ï¼‰å¤„ç†æ¥æ”¶åˆ°çš„æ•°æ® return data['key'] åµŒå¥—åºåˆ—åŒ–ï¼Œä¼ å‚é—®é¢˜å®˜æ–¹æ–‡æ¡£ä¸­æœ‰è¿™ä¹ˆä¸€ä¸ªä¾‹å­Dealing with nested objectså¦‚æœæ˜¯ä»¥Content-Type:application/jsonå½¢å¼ä¼ æ•°æ®æ ¼å¼ä¼ æ•°æ®ï¼Œç›´æ¥åµŒå¥—ä¼ å°±å¯ä»¥äº†{&#39;user&#39;: {&#39;email&#39;: &#39;foobar&#39;, &#39;username&#39;: &#39;doe&#39;}, &#39;content&#39;: &#39;baz&#39;}ï¼Œä½†å¦‚æœæ˜¯ä»¥,ä½†æ˜¯å¦‚æœä»¥Content-Type:form-dataæˆ–Content-Type:x-www-form-urlencodedä¸Šä¼ ï¼Œåˆ™ä¸Šä¼ userä¿¡æ¯è¿›ä¸æ˜¯åµŒå¥—ï¼Œè€Œæ˜¯å°±.è¿æ¥äº†ï¼Œ&quot;user.email&quot;:&quot;foobar&quot;.]]></content>
      <tags>
        <tag>Django</tag>
        <tag>restful</tag>
        <tag>api</tag>
        <tag>é—®é¢˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Django Rest frameworkä½¿ç”¨é—®é¢˜åŠè§£å†³æ–¹æ³•]]></title>
    <url>%2F2016%2F12%2F17%2Fdjango-rest-framework%E4%BD%BF%E7%94%A8%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[æ›´æ–°è®°å½•2016-01-29 åˆç¨¿ é—®é¢˜1ViewSetæ²¡æœ‰å†™serializer_classå±æ€§ï¼Œè€Œæ˜¯é‡å†™äº†get_serializer_class()æ–¹æ³•ï¼Œå‡ºç°1Cannot use OrderingFilter on a view which does not have either a &apos;serializer_class&apos; or &apos;ordering_fields&apos; attribute. åŸå› ï¼šå› ä¸ºå¯ç”¨äº†rest_framework.filters.OrderingFilterè€Œæ²¡æœ‰è®¾ç½®ordering_fieldsè§£å†³æ–¹æ³•ï¼šViewSeté‡ŒåŠ ordering_fieldså±æ€§ï¼Œå¯æ˜¯ç¦ç”¨rest_framework.filters.OrderingFilter é—®é¢˜2ViewSetæ²¡æœ‰å†™querysetå±æ€§ï¼Œè€Œæ˜¯é‡å†™äº†get_queryset()æ–¹æ³•ï¼Œå‡ºç°1&apos;base_name&apos; argument not specified, and could not automatically determine the name from the viewset, as it does not have a &apos;.queryset&apos; attribute. è§£å†³æ–¹æ³•ï¼šéœ€è¦åœ¨urls.pyé‡Œç»™ViewSetæ³¨å†ŒRouteræ—¶æ·»åŠ base_nameï¼ˆbase_nameä¸ºrouterä¸ºViewSetæ³¨å†Œurlæ—¶è‡ªåŠ¨æ·»åŠ çš„nameå‰ç¼€ï¼Œå¦‚æœæœªè®¾ç½®åˆ™ä»ViewSetçš„queryseté‡Œå–ï¼Œä½¿ç”¨ViewSetè‡ªåŠ¨ç”Ÿæˆçš„url nameä¸º&lt;base_name&gt;-list &lt;base_name&gt;-detail ç­‰ï¼‰urls.py1router.register(r&apos;users&apos;, UserViewSet, base_name=&apos;user&apos;) é—®é¢˜3ç»™urlè®¾ç½®äº†namespaceurls.py1url(r'^api/', include(router.urls, namespace='api')), è®¿é—®éƒ¨åˆ†æ¥å£å‡ºç°1Could not resolve URL for hyperlinked relationship using view name &quot;user-detail&quot;. You may have failed to include the related model in your API, or incorrectly configured the `lookup_field` attribute on this field. è§£å†³æ–¹æ³•1ï¼šç»™æ‰€æœ‰çš„serializeré‡ŒåŒ…å«çš„å¤–é”®å­—æ®µæ‰‹åŠ¨è®¾ç½®view_nameå€¼ï¼ˆæ³¨æ„ï¼Œç»§æ‰¿HyperlinkedModelSerializerï¼Œä¼šéšå¼æ·»åŠ ä¸€ä¸ªHyperlinkedRelatedFieldå­—æ®µurlï¼Œè€Œæ‰€æœ‰çš„å¤–é”®éƒ½ä¼šå˜æˆHyperlinkedRelatedFieldå­—æ®µï¼Œæ‰€ä»¥éœ€è¦å¯¹ä¸¤ç§ç±»å‹å­—æ®µæ‰‹åŠ¨è®¾ç½®view_nameå€¼ï¼‰serializers.py12345678class ContactSerializer(serializers.HyperlinkedModelSerializer): class Meta: model = Contact fields = '__all__' extra_kwargs = &#123; 'url': &#123;'view_name': 'api:contact-detail'&#125;, 'user':&#123;'view_name':'api:user-detail'&#125; &#125; è§£å†³æ–¹æ³•2ï¼šå¯åŠ¨drfåŸºäºNameSpaceçš„ç‰ˆæœ¬æ§åˆ¶settings.py12345REST_FRAMEWORK = &#123; â€¦â€¦ 'DEFAULT_VERSIONING_CLASS': 'rest_framework.versioning.NamespaceVersioning', â€¦â€¦&#125;]]></content>
      <tags>
        <tag>Django</tag>
        <tag>restful</tag>
        <tag>api</tag>
        <tag>é—®é¢˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Django Rest frameworké‡Œçš„APIè¯·æ±‚é¢‘ç‡æ§åˆ¶]]></title>
    <url>%2F2016%2F12%2F17%2Fdjango-rest-framework%E9%87%8C%E7%9A%84api%E8%AF%B7%E6%B1%82%E9%A2%91%E7%8E%87%E6%8E%A7%E5%88%B6%2F</url>
    <content type="text"><![CDATA[æ›´æ–°è®°å½•2016-08-25 åˆç¨¿ Django Rest frameworkæœ‰è‡ªå¸¦çš„é¢‘ç‡æ§åˆ¶é…ç½® å…¨å±€è®¾ç½®123456789101112131415REST_FRAMEWORK = &#123; 'DEFAULT_THROTTLE_CLASSES': ( # å¼€å¯åŒ¿åç”¨æˆ·æ¥å£è¯·æ±‚é¢‘ç‡é™åˆ¶ 'rest_framework.throttling.AnonRateThrottle', # å¼€å¯æˆæƒç”¨æˆ·æ¥å£è¯·æ±‚é¢‘ç‡é™åˆ¶ 'rest_framework.throttling.UserRateThrottle' ), 'DEFAULT_THROTTLE_RATES': &#123; # é¢‘ç‡é™åˆ¶æœ‰second, minute, hour, day # åŒ¿åç”¨æˆ·è¯·æ±‚é¢‘ç‡ 'anon': '100/day', # æˆæƒç”¨æˆ·è¯·æ±‚é¢‘ç‡ 'user': '1000/day' &#125;&#125; ç±»è§†å›¾å•ç‹¬é…ç½®123456789101112from rest_framework.response import Responsefrom rest_framework.throttling import UserRateThrottlefrom rest_framework.views import APIView class ExampleView(APIView): throttle_classes = (UserRateThrottle,) def get(self, request, format=None): content = &#123; 'status': 'request was permitted' &#125; return Response(content) æ–¹æ³•è§†å›¾é…ç½®1234567@api_view(['GET'])@throttle_classes([UserRateThrottle])def example_view(request, format=None): content = &#123; 'status': 'request was permitted' &#125; return Response(content) è‡ªå®šä¹‰æ–¹æ³•ä¸€ï¼š123456class BurstRateThrottle(UserRateThrottle): scope = 'burst' class SustainedRateThrottle(UserRateThrottle): scope = 'sustained'...and the following settings. settings.py12345678910REST_FRAMEWORK = &#123; 'DEFAULT_THROTTLE_CLASSES': ( 'example.throttles.BurstRateThrottle', 'example.throttles.SustainedRateThrottle' ), 'DEFAULT_THROTTLE_RATES': &#123; 'burst': '60/min', 'sustained': '1000/day' &#125;&#125; ç„¶ååœ¨è§†å›¾é‡Œè®¾ç½®throttle_classeså³å¯ã€‚ æ–¹æ³•äºŒï¼šsettings.py123456789REST_FRAMEWORK = &#123; 'DEFAULT_THROTTLE_CLASSES': ( 'rest_framework.throttling.ScopedRateThrottle', ), 'DEFAULT_THROTTLE_RATES': &#123; 'contacts': '1000/day', 'uploads': '20/day' &#125;&#125; ç„¶ååœ¨ç±»è§†å›¾ä¸­è®¾ç½®throttle_scope1234567891011class ContactListView(APIView): throttle_scope = 'contacts' ... class ContactDetailView(APIView): throttle_scope = 'contacts' ... class UploadView(APIView): throttle_scope = 'uploads' ... 1. åŒ¿åç”¨æˆ·é¢‘ç‡å¦‚æœè®¾ç½®å¤§äºæˆæƒç”¨æˆ·é¢‘ç‡ï¼Œåˆ™ä»¥æˆæƒç”¨æˆ·é¢‘ç‡ä¸ºå‡†ã€‚2. é¢‘ç‡é™åˆ¶æ˜¯é’ˆå¯¹å•ä¸ªæ¥å£çš„é¢‘ç‡ï¼Œè€Œä¸æ˜¯æ‰€æœ‰æ¥å£çš„é¢‘ç‡ã€‚]]></content>
      <tags>
        <tag>Django</tag>
        <tag>restful</tag>
        <tag>apiï¼Œ version</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åœ¨CentOS7ä¸Šç”¨MySQL+Nginx+Gunicorn+Supervisoréƒ¨ç½²Django]]></title>
    <url>%2F2016%2F12%2F08%2F%E5%9C%A8centos7%E4%BD%BF%E7%94%A8mysql-nginx-gunicorn%2Bsupervisor%E9%83%A8%E7%BD%B2django%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡è®°å½•ä¸‹åœ¨CentOSä¸‹éƒ¨ç½²Djangoé¡¹ç›®çš„æ­¥éª¤ã€‚ MySQLå®‰è£…mysqlå’Œmysql-devel12yum install mysqlyum install mysql-devel å®‰è£…mysql-server123wget http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpmrpm -ivh mysql-community-release-el7-5.noarch.rpmyum install mysql-community-server é‡å¯mysqlæœåŠ¡1service mysqld restart è®¾ç½®rootå¯†ç åˆæ¬¡å®‰è£…mysqléœ€è¦è®¾ç½®rootå¯†ç 12mysql -urootset password for &apos;root&apos;@&apos;localhost&apos; =password(&apos;password&apos;); é…ç½®mysqlåœ¨/etc/my.cnfæ–‡ä»¶ä¸­[mysql]å’Œ[mysql]ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹12345[mysql]default-character-set=utf8[mysqld]character-set-server=utf8 å­—ç¬¦ç¼–ç ä¿æŒå’Œ/usr/share/mysql/charsets/Index.xmlä¸­çš„ä¸€è‡´ã€‚ è¿œç¨‹è¿æ¥è®¾ç½®æŠŠåœ¨æ‰€æœ‰æ•°æ®åº“çš„æ‰€æœ‰è¡¨çš„æ‰€æœ‰æƒé™èµ‹å€¼ç»™ä½äºæ‰€æœ‰IPåœ°å€çš„rootç”¨æˆ·ã€‚1mysql&gt; grant all privileges on *.* to root@&apos;%&apos;identified by &apos;password&apos;; å¦‚æœæ˜¯æ–°ç”¨æˆ·è€Œä¸æ˜¯rootï¼Œåˆ™è¦å…ˆæ–°å»ºç”¨æˆ·1mysql&gt;create user &apos;username&apos;@&apos;%&apos; identified by &apos;password&apos;; æ­¤æ—¶å°±å¯ä»¥è¿›è¡Œè¿œç¨‹è¿æ¥äº†ã€‚ Virtualenvå®‰è£…epelæ‰©å±•æº1yum install epel-release å®‰è£…pip1yum install python-pip å®‰è£…virtualenvå’Œvirtualenvwrapper1pip install virtualenv virtualenvwrapper ç¼–è¾‘~/.bashrcæ–‡ä»¶ï¼Œç»“å°¾æ·»åŠ ä»¥ä¸‹å†…å®¹12export WORKON_HOME=~/.virtualenvssource /usr/bin/virtualenvwrapper.sh ç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä½¿é…ç½®ç”Ÿæ•ˆ1source ~/.bashrc åˆ›å»ºenv1mkvirtualenv explame ä½¿ç”¨pipå®‰è£…é¡¹ç›®éœ€è¦çš„åŒ… WSGIåœ¨é¡¹ç›®ç›®å½•ä¸‹æ–°å»ºnginx_wsgi.pyæ–‡ä»¶1touch nginx_wsgi.py æ·»åŠ å¦‚ä¸‹å†…å®¹12345678910111213141516171819import sysimport siteimport os # site-packagessite.addsitedir(&apos;/home/nginxuser/.virtualenvs/example/lib/python2.7/site-packages&apos;)# Add the project directory# sys.path.append(&apos;/home/nginxuser/nginxuser&apos;)PROJECT_DIR = &apos;/home/nginxuser/projects/example&apos;sys.path.insert(0, PROJECT_DIR)os.environ[&apos;DJANGO_SETTINGS_MODULE&apos;] = &apos;example.settings.prod&apos;# Activate your virtual envactivate_env = os.path.expanduser(&quot;/home/nginxuser/.virtualenvs/example/bin/activate_this.py&quot;)execfile(activate_env, dict(__file__=activate_env)) # after activite envfrom django.core.wsgi import get_wsgi_application application = get_wsgi_application() Nginxå®‰è£…1yum install nginx æ£€æŸ¥é…ç½®æ˜¯å¦æœ‰é”™1nginx -t -c /etc/nginx/nginx.conf å¯åŠ¨nginx1service nginx start è®¾ç½®å¼€æœºè‡ªå¯1systemctl enable nginx åˆ›å»ºç”¨æˆ·12useradd nginxuserpasswd nginxuser ä¿®æ”¹nginxä¸»é…ç½®1vim /etc/nginx/nginx.conf éæ³¨é‡Šé¦–è¡Œ1user nginx æ”¹ä¸º1user nginxuser ä¸ç„¶å¯èƒ½ä¼šå‡ºç°ç½‘ç«™é™æ€æ–‡ä»¶è®¿é—®æŠ¥403é—®é¢˜ã€‚ æ–°å»ºç½‘ç«™è¿è¡Œé…ç½®1vim /etc/nginx/conf.d/example.conf 12345678910111213141516171819server &#123; listen 80; server_name example.com; charset utf-8; client_max_body_size 75M; access_log /home/nginxuser/projects/example/nginxlogs/access.log; error_log /home/nginxuser/projects/example/nginxlogs/error.log; location /static &#123; alias /home/nginxuser/projects/explame/static; &#125; location / &#123; proxy_pass http://127.0.0.1:8000; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; &#125; &#125; jk Gunicornå®‰è£…1pip install gunicorn é¡¹ç›®æ ¹ç›®å½•ä¸‹æ·»åŠ gunicornè¿è¡Œé…ç½®æ–‡ä»¶gunicorn.conf.py123456import multiprocessingbind = &quot;127.0.0.1:8000&quot;workers = 2errorlog = &quot;/home/nginxuser/example/gunicorn.error.log&quot;#loglevel = &quot;debug&quot;proc_name = &quot;gunicorn_example&quot; å¯åŠ¨1sudo gunicorn example.nginx_wsgi:application -c /home/nginxuser/projects/example/gunicorn.conf.py åå°è¿è¡Œ1sudo nohup gunicorn example.nginx_wsgi:application -c /home/nginxuser/projects/example/gunicorn.conf.py&amp; å¦‚æœè¿è¡ŒæŠ¥é”™å…ˆä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ä¸‹nginxé…ç½®æ˜¯å¦æœ‰é”™1nginx -t -c /etc/nginx/nginx.conf Supervisorå®‰è£…1pip install supervisor åˆ›å»ºç®¡ç†è¿›ç¨‹é…ç½®æ–‡ä»¶1vim /etc/supervisord.d/example.ini ï¼ˆéœ€è¦æ³¨æ„ï¼šç”¨ supervisord ç®¡ç†æ—¶ï¼Œgunicorn çš„ daemon é€‰é¡¹éœ€è¦è®¾ç½®ä¸º Falseï¼‰12345678910111213141516[program:example]directory = /home/nginxuser/projects/example ; ç¨‹åºçš„å¯åŠ¨ç›®å½•command = gunicorn example.nginx_wsgi:application -c /home/nginxuser/projects/example/gunicorn.conf.py ; å¯åŠ¨å‘½ä»¤ï¼Œå¯ä»¥çœ‹å‡ºä¸æ‰‹åŠ¨åœ¨å‘½ä»¤è¡Œå¯åŠ¨çš„å‘½ä»¤æ˜¯ä¸€æ ·çš„autostart = true ; åœ¨ supervisord å¯åŠ¨çš„æ—¶å€™ä¹Ÿè‡ªåŠ¨å¯åŠ¨startsecs = 5 ; å¯åŠ¨ 5 ç§’åæ²¡æœ‰å¼‚å¸¸é€€å‡ºï¼Œå°±å½“ä½œå·²ç»æ­£å¸¸å¯åŠ¨äº†autorestart = true ; ç¨‹åºå¼‚å¸¸é€€å‡ºåè‡ªåŠ¨é‡å¯startretries = 3 ; å¯åŠ¨å¤±è´¥è‡ªåŠ¨é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤æ˜¯ 3user = nginx ; ç”¨å“ªä¸ªç”¨æˆ·å¯åŠ¨redirect_stderr = true ; æŠŠ stderr é‡å®šå‘åˆ° stdoutï¼Œé»˜è®¤ falsestdout_logfile_maxbytes = 20MB ; stdout æ—¥å¿—æ–‡ä»¶å¤§å°ï¼Œé»˜è®¤ 50MBstdout_logfile_backups = 20 ; stdout æ—¥å¿—æ–‡ä»¶å¤‡ä»½æ•°; stdout æ—¥å¿—æ–‡ä»¶ï¼Œéœ€è¦æ³¨æ„å½“æŒ‡å®šç›®å½•ä¸å­˜åœ¨æ—¶æ— æ³•æ­£å¸¸å¯åŠ¨ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨åˆ›å»ºç›®å½•ï¼ˆsupervisord ä¼šè‡ªåŠ¨åˆ›å»ºæ—¥å¿—æ–‡ä»¶ï¼‰stdout_logfile = /data/logs/usercenter_stdout.log; å¯ä»¥é€šè¿‡ environment æ¥æ·»åŠ éœ€è¦çš„ç¯å¢ƒå˜é‡ï¼Œä¸€ç§å¸¸è§çš„ç”¨æ³•æ˜¯ä¿®æ”¹ PYTHONPATH; environment=PYTHONPATH=$PYTHONPATH:/path/to/somewhere å†’å·åé¢è¦æœ‰ç©ºæ ¼ å¯åŠ¨ä½¿ç”¨-cæŒ‡å®šé…ç½®æ–‡ä»¶ã€‚1supervisord -c /etc/supervisord.conf å¦‚æœå¯åŠ¨æ—¶é‡åˆ°ä»¥ä¸‹æŠ¥é”™ä¿¡æ¯12Error: Another program is already listening on a port that one of our HTTP servers is configured to use. Shut this program down first before starting supervisord.For help, use /use/bin/supervisord -h å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è§£å†³1sudo unlink /var/run/supervisor/supervisor.sock å‘½ä»¤è¡Œå®¢æˆ·ç«¯å·¥å…·supervisorctlå¯åŠ¨æ—¶éœ€è¦ä½¿ç”¨å’Œsupervisorctlä½¿ç”¨ä¸€æ ·çš„é…ç½®æ–‡ä»¶ã€‚1supervisorctl -c /etc/supervisord.conf å¯åŠ¨åè¿›å…¥supervisorctlçš„shellï¼Œåœ¨æ­¤shellé‡Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤123456status # æŸ¥çœ‹ç¨‹åºçŠ¶æ€start example # å¯åŠ¨exampleç¨‹åºstop example # å…³é—­exampleç¨‹åºrestart example # é‡å¯exampleç¨‹åºreread # è¯»å–æœ‰æ›´æ–°ï¼ˆå¢åŠ ï¼‰çš„é…ç½®æ–‡ä»¶ï¼Œä¸ä¼šå¯åŠ¨æ–°æ·»åŠ çš„ç¨‹åºupdate # é‡å¯é…ç½®æ–‡ä»¶ä¿®æ”¹è¿‡çš„ç¨‹åº ä¹Ÿå¯ä»¥ä¸è¿›shellæ‰§è¡Œä»¥ä¸Šå‘½ä»¤123456supervisorctl status # æŸ¥çœ‹ç¨‹åºçŠ¶æ€supervisorctl start example # å¯åŠ¨exampleç¨‹åºsupervisorctl stop example # å…³é—­exampleç¨‹åºsupervisorctl restart example # é‡å¯exampleç¨‹åºsupervisorctl reread # è¯»å–æœ‰æ›´æ–°ï¼ˆå¢åŠ ï¼‰çš„é…ç½®æ–‡ä»¶ï¼Œä¸ä¼šå¯åŠ¨æ–°æ·»åŠ çš„ç¨‹åºsupervisorctl update # é‡å¯é…ç½®æ–‡ä»¶ä¿®æ”¹è¿‡çš„ç¨‹åº å¼€å¯webç®¡ç†ç•Œé¢å¦‚æœè¦å¼€å¯webç®¡ç†ç•Œé¢ï¼Œæ‰“å¼€/etc/supervisord.confæŠŠä¸‹é¢å‡ è¡Œå–æ¶ˆæ³¨é‡Šå³å¯1234:[inet_http_server] ; inet (TCP) server disabled by default:port=127.0.0.1:9001 ; (ip_address:port specifier, *:port for all iface):username=user ; (default is no username (open server)):password=123 ; (default is no password (open server))]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Django</tag>
        <tag>centOS</tag>
        <tag>Nginx</tag>
        <tag>Gunicorn</tag>
        <tag>MySQL</tag>
        <tag>Supervisor</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[npmå…¥é—¨å‘½ä»¤]]></title>
    <url>%2F2016%2F07%2F06%2Fnpm%E5%85%A5%E9%97%A8%E5%91%BD%E4%BB%A4%2F</url>
    <content type="text"><![CDATA[æ›´æ–°è®°å½•2016-07-06 åˆç¨¿ åŸºç¡€å‘½ä»¤æ˜¾ç¤ºnpmç‰ˆå·123npm -v# æˆ–npm version å®‰è£…æ¨¡å—123456# å¸¦-gä¸ºå…¨å±€å®‰è£…# æœ¬åœ°å®‰è£…ï¼špackageä¼šè¢«ä¸‹è½½åˆ°å½“å‰æ‰€åœ¨ç›®å½•ï¼Œä¹Ÿåªèƒ½åœ¨å½“å‰ç›®å½•ä¸‹ä½¿ç”¨ã€‚# å…¨å±€å®‰è£…ï¼špackageä¼šè¢«ä¸‹è½½åˆ°åˆ°ç‰¹å®šçš„ç³»ç»Ÿç›®å½•ä¸‹ï¼Œå®‰è£…çš„packageèƒ½å¤Ÿåœ¨æ‰€æœ‰ç›®å½•ä¸‹ä½¿ç”¨ã€‚npm install &lt;package&gt; -g# ç®€å†™npm i &lt;package&gt; -g å‡çº§å…¨å±€å®‰è£…çš„æŒ‡å®šæ¨¡å—1npm update &lt;package&gt; -g å‡çº§å½“å‰ç›®å½•ä¸‹çš„æŒ‡å®šæ¨¡å—1npm update &lt;package&gt; å‡çº§å½“å‰ç›®å½•ä¸‹å…¨éƒ¨æ¨¡å—1npm update å‡çº§nodeè‡ªèº«123456# å®‰è£…ä¸€ä¸ªå«nçš„æ¨¡å—npm install -g n# å‡çº§åˆ°æœ€æ–°ç¨³å®šç‰ˆn stable# å‡çº§åˆ°æŒ‡å®šç‰ˆæœ¬n v0.10.26 å¸è½½ç§»é™¤æŒ‡å®šæ¨¡å—12npm uninstall &lt;package&gt;# åˆ«åï¼šremove, rm, r, un, unlink æ˜¾ç¤ºå·²å®‰è£…æ¨¡å—1npm list æ˜¾ç¤ºæ¨¡å—è¯¦ç»†ä¿¡æ¯1npm show &lt;package&gt; æŸ¥çœ‹å…¨å±€åŒ…å®‰è£…è·¯å¾„1npm root -g æŸ¥çœ‹å½“å‰åŒ…å®‰è£…è·¯å¾„1npm root æŸ¥çœ‹npmé…ç½®1npm config list æŸ¥çœ‹å¸®åŠ©1npm help æŸ¥çœ‹ç›¸å…³å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£1npm help &lt;command&gt;]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>npm</tag>
        <tag>Nodejs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Chromeæ‰©å±•/æ’ä»¶/åº”ç”¨æ¨è]]></title>
    <url>%2F2016%2F06%2F01%2Fchrome%E6%89%A9%E5%B1%95-%E6%8F%92%E4%BB%B6-%E5%BA%94%E7%94%A8%E6%8E%A8%E8%8D%90%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡è¿‡æœŸï¼Œè¯·å‰è¡Œä½è‡ªç”¨è½¯ä»¶æ¨èæŸ¥çœ‹æœ€æ–°å†…å®¹ æ’ä»¶/æ‰©å±• Adblock Pluså¹¿å‘Šæ‹¦æˆªå™¨ï¼Œè°ç”¨è°çŸ¥é“ã€‚ Checker Plus for Gmailâ„¢Gmail/Inboxæ’ä»¶ï¼Œä¸ç”¨æ‰“å¼€ç½‘é¡µå¤„ç†é‚®ä»¶ã€‚ Wappalyzeræ¢æµ‹å½“å‰ç½‘é¡µæ­£åœ¨ä½¿ç”¨çš„å¼€æºè½¯ä»¶æˆ–è€…jsç±»åº“ï¼Œwebå¼€å‘è€…å¿…å¤‡ç¥å™¨ã€‚ crxMouse Chrome Gesturesé¼ æ ‡æ‰‹åŠ¿ã€‚ Ghosteryäº†è§£è°åœ¨è·Ÿè¸ªæ‚¨çš„ç½‘é¡µæµè§ˆæ“ä½œï¼Œå¹¶å¯ç¦ç”¨è·Ÿè¸ªè¡Œä¸ºã€‚ Google Keep Chrome æ‰©å±•ç¨‹åºå°†ç½‘é¡µå¿«é€Ÿçš„ä¿å­˜åˆ°Google Keepä¸­ã€‚ Googleç¿»è¯‘æ”¯ä»˜åœ¨ç½‘é¡µä¸­åˆ’è¯ç¿»è¯‘ã€‚ åˆ’è¯ç¿»è¯‘åˆ’è¯ç¿»è¯‘ï¼Œæ”¯æŒè°·æ­Œã€ç™¾åº¦ã€æœ‰é“ã€å¿…åº”å››å¤§ç¿»è¯‘å’Œæœ—è¯»å¼•æ“ï¼Œè®¿é—®Googleæ¯”è¾ƒå› éš¾çš„çš„å¯ä»¥ç”¨è¿™ä¸ªã€‚ LastPasså…è´¹çš„å¯†ç ç®¡ç†ç®¡ç†å™¨ã€‚ MindMap Tabåœ¨æ–°æ ‡ç­¾é¡µä¸­å¿«é€Ÿç¼–è¾‘æ€ç»´å¯¼å›¾ã€‚ Octotreeåœ¨æµè§ˆå™¨å·¦ä¾§æ ‘å½¢å±•ç¤ºGithubä»£ç ã€‚ Prism Prettyç¾åŒ–ä»£ç ï¼ˆhtmlã€cssã€jsã€jsonâ€¦â€¦ï¼‰ Proxy SwitchyOmegaä½ æ‡‚çš„ã€‚ Pushbulletå¿«é€Ÿçš„å¾€å…¶å®ƒè®¾å¤‡å‘é€æ¶ˆæ¯ã€‚ Save to Pocketå¿«é€Ÿä¿å­˜ç½‘é¡µåˆ°Pocketã€‚ Search by Image (by Google)æµè§ˆå™¨å³é”®å¢åŠ Googleçš„ä»¥å›¾æœå›¾åŠŸèƒ½ã€‚ v2ex plusä¼˜é›…ä¾¿æ·çš„ V2EX æ‰©å±•ã€‚ Web Timeræ¯ä¸ªç½‘ç«™åœç•™æ—¶é—´ç»Ÿè®¡ã€‚ ä¸ºçŸ¥ç¬”è®°ç½‘é¡µå‰ªè¾‘å™¨é…åˆä¸ºçŸ¥ç¬”è®°ï¼Œå¿«é€Ÿä¿å­˜ç½‘é¡µå†…å®¹åˆ°ä¸ºçŸ¥ç¬”è®°ã€‚ äºŒç»´ç ï¼ˆç”ŸæˆåŠè¯†åˆ«ï¼‰ç”Ÿæˆæˆ–è¯†åˆ«äºŒç»´ç ã€‚ æƒ æƒ è´­ç‰©åŠ©æ‰‹åœ¨ä¸»æµç”µå•†ç½‘ç«™é¡µé¢ä¸Šæä¾›å•†å“çš„å†å²ä»·æ ¼ï¼ŒåŠåœ¨åŒæ¬¾å•†å“åœ¨å…¶å®ƒå¹³å°çš„ä»·æ ¼æ¯”è¾ƒã€‚ æ–°æµªå¾®åšå›¾åºŠå¾®åšæ˜¯ä¸ªå¥½å›¾åºŠã€‚ ç½‘é¡µæˆªå›¾:æ³¨é‡Š&amp;æ‰¹æ³¨æ•è·æ•´ä¸ªé¡µé¢æˆ–ä»»ä½•éƒ¨åˆ†ï¼ŒçŸ©å½¢ï¼Œåœ†å½¢ï¼Œç®­å¤´ï¼Œçº¿æ¡å’Œæ–‡å­—ï¼Œæ¨¡ç³Šæ•æ„Ÿä¿¡æ¯ï¼Œä¸€é”®ä¸Šä¼ åˆ†äº«ã€‚ åº”ç”¨ PostmanåŠŸèƒ½å¼ºå¤§çš„æ¥å£è°ƒè¯•å·¥å…·ã€‚ Google Keep - è®°äº‹å’Œæ¸…å•ä¸è§£é‡Šã€‚ Pocketä¸è§£é‡Šã€‚ JSON Editorå›¾å½¢åŒ–jsonç¼–è¾‘å·¥å…·ã€‚]]></content>
      <categories>
        <category>ä¼˜åŒ–è¾…åŠ©</category>
      </categories>
      <tags>
        <tag>Chrome</tag>
        <tag>å·¥å…·</tag>
        <tag>æ‰©å±•</tag>
        <tag>æ’ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Django 1.9æ–‡æ¡£é˜…è¯»ç¬”è®°]]></title>
    <url>%2F2016%2F04%2F04%2Fdjango1-9%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[æ›´æ–°è®°å½•2016-04-04 åˆç¨¿2016-06-30 æ›´æ–°å†…å®¹ æ¨¡å‹Model _meta API é™åˆ¶æ™®é€šå­—æ®µçš„é€‰æ‹©èŒƒå›´choicesï¼Œvalue-textï¼Œæ˜¾ç¤ºget_foo_display() æ¨¡å‹ç»§æ‰¿ æŠ½è±¡åŸºç±» é»˜è®¤ç»§æ‰¿å…ƒç±» å¤šè¡¨ç»§æ‰¿ ä¸€èˆ¬æƒ…å†µä¸ç»§æ‰¿å…ƒç±» ä»£ç†æ¨¡å‹ å¤šé‡ç»§æ‰¿ä¸»è¦ç”¨äºmix-inç±» å¤šè¡¨ç»§æ‰¿æ—¶ä½¿ç”¨parent_link=Trueæ˜¾ç¤ºæŒ‡å®šOneToOneå­—æ®µ æ¨¡å‹å­—æ®µå‚è€ƒä¸å°šæœªå®šä¹‰çš„æ¨¡å‹å…³è”ä½¿ç”¨æ¨¡å‹åå­—ï¼ˆå­—ç¬¦ä¸²ï¼‰è€Œéæœ¬èº«ï¼ˆç±»ï¼‰ å…³è”è‡ªå·±ä½¿ç”¨self related_name relate_query_name å¤–é”®å…³è”åˆ°ç‰¹å®šå­—æ®µto_field é™åˆ¶å¤–é”®çš„é€‰æ‹©èŒƒå›´ï¼ˆå¯ä»¥æ˜¯ä¸€ä¸ªå­—å…¸ã€ä¸€ä¸ªQ å¯¹è±¡æˆ–è€…ä¸€ä¸ªè¿”å›å­—å…¸æˆ–Qå¯¹è±¡çš„å¯è°ƒç”¨å¯¹è±¡ï¼‰limit_choices_to å¤–é”®å…³è”å¯¹è±¡åˆ é™¤è¡Œä¸ºon_delete 1.8ä»¥åä¿å­˜æ¨¡å‹æ—¶ï¼Œæœªä¿å­˜çš„å¤–é”®å¯¹è±¡å°†è¢«å¿½ç•¥ï¼Œé™¤éè®¾ç½®allow_unsaved_instance_assignment=True å…³è”è‡ªèº«çš„å¤šå¯¹å¤šå…³ç³»é»˜è®¤å¯¹ç§°ï¼Œå–æ¶ˆå¯¹ç§°è®¾ç½®symmetrical=False ImageFieldä¸­çš„height_fieldå’Œwidth_fieldæ˜¯ç”¨æ¥å­˜å‚¨å­˜å…¥å›¾ç‰‡çš„é«˜åº¦å’Œå®½åº¦å€¼çš„ ##æ‰§è¡ŒæŸ¥è¯¢ å¯è‡ªå®šä¹‰æŸ¥è¯¢ï¼ˆé«˜çº§æŸ¥æ‰¾ï¼‰excludeå¤šæ¡ä»¶æŸ¥è¯¢æ—¶æ˜¯ç”¨orå…³ç³»è€Œä¸æ˜¯andå…³ç³» F()ç”¨äºæ¨¡å‹å†…éƒ¨å­—æ®µé—´çš„æ¯”è¾ƒæ”¯æŒåŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•ã€é™¤æ³•ã€å–æ¨¡ä»¥åŠå¹‚è®¡ç®—ç­‰ç®—æœ¯æ“ä½œæ”¯æŒ.bitand() å’Œ.bitor()ä½æ“ä½œï¼Œupdate()ä¹Ÿå¯ä»¥ä½¿ç”¨F()ä½†æœ‰é™åˆ¶ï¼ˆåœ¨update ä¸­ä½ ä¸å¯ä»¥ä½¿ç”¨F() å¯¹è±¡å¼•å…¥join â€”â€” ä½ åªå¯ä»¥å¼•ç”¨æ­£åœ¨æ›´æ–°çš„æ¨¡å‹çš„å­—æ®µï¼‰ æŸ¥è¯¢é›†ç¼“å­˜å½“åªå¯¹æŸ¥è¯¢é›†çš„éƒ¨åˆ†è¿›è¡Œæ±‚å€¼æ—¶ä¼šæ£€æŸ¥ç¼“å­˜ï¼Œ ä½†æ˜¯å¦‚æœè¿™ä¸ªéƒ¨åˆ†ä¸åœ¨ç¼“å­˜ä¸­ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æŸ¥è¯¢è¿”å›çš„è®°å½•éƒ½å°†ä¸ä¼šè¢«ç¼“å­˜ã€‚123&gt;&gt;&gt; queryset = Entry.objects.all()&gt;&gt;&gt; print([p.headline for p in queryset]) # Evaluate the query set.&gt;&gt;&gt; print([p.pub_date for p in queryset]) # Re-use the cache from the evaluation. 123&gt;&gt;&gt; queryset = Entry.objects.all()&gt;&gt;&gt; print queryset[5] # Queries the database&gt;&gt;&gt; print queryset[5] # Queries the database again 1234&gt;&gt;&gt; queryset = Entry.objects.all()&gt;&gt;&gt; [entry for entry in queryset] # Queries the database&gt;&gt;&gt; print queryset[5] # Uses cache&gt;&gt;&gt; print queryset[5] # Uses cache Q()å¯ä½¿ç”¨Qå¯¹è±¡è¿›è¡Œå¤æ‚æŸ¥è¯¢ åˆ¤æ–­ä¸¤ç›¸æ¨¡å‹å®ä¾‹æ˜¯å¦ç›¸åŒï¼Œç›´æ¥ä½¿ç”¨==æ¯”è¾ƒå³å¯ é»˜è®¤æ‰¹é‡åˆ é™¤å¯¹è±¡æ—¶ä¸ä¼šè°ƒç”¨å®ä¾‹çš„deleteæ–¹æ³• æ‹·è´å®ä¾‹ï¼ŒæŠŠpkè®¾ç½®ä¸ºNoneå†saveå³å¯ï¼ˆå¦‚æœæ˜¯ç»§æ‰¿çš„ï¼Œåˆ™pkå’Œidéƒ½éœ€è¦è®¾ç½®ä¸ºNoneï¼‰ update()æ–¹æ³•ä¹Ÿä¸ä¼šè°ƒç”¨æ¨¡å‹çš„save()æ–¹æ³•ï¼Œä¸ä¼šå‘å‡ºpre_saveå’Œpost_saveä¿¡å·ï¼Œå­—æ®µçš„auto_nowä¹Ÿä¸ä¼šèµ·ä½œç”¨ ä¸€å¯¹å¤šå…³è”å¯¹è±¡è®¿é—®ä¼šç¼“å­˜123&gt;&gt;&gt; e = Entry.objects.get(id=2)&gt;&gt;&gt; print(e.blog) # Hits the database to retrieve the associated Blog.&gt;&gt;&gt; print(e.blog) # Doesn't hit the database; uses cached version. è‡ªå®šä¹‰åå‘ç®¡ç†å™¨1.7+123456789from django.db import models class Entry(models.Model): #... objects = models.Manager() # Default Manager entries = EntryManager() # Custom Manager b = Blog.objects.get(id=1)b.entry_set(manager='entries').all() æŸ¥è¯¢é›†API å‚è€ƒèšåˆä¸€æ¬¡åˆ›å»ºå¤šæ¡æ•°æ®ï¼ˆåªæœ‰ä¸€æ¡sqlï¼‰bulk_create æ ¹æ®æä¾›çš„ä¸€ç»„pkæŸ¥è¯¢å‡ºæ‰€æœ‰å¯¹åº”çš„å¯¹è±¡in_bulk åœ¨æŸ¥ä½œè€…åˆ—è¡¨æ—¶è¦æŸ¥æ¯ä¸ªä½œè€…æœ‰å‡ ç¯‡åšæ–‡123456789&gt;&gt;&gt; from django.db.models import Count&gt;&gt;&gt; authors = Author.object.all().annotate(Count('blog'))# authors[0]ä½œè€…çš„åšæ–‡æ•°&gt;&gt;&gt; authors[0].blog__count3# æˆ–&gt;&gt;&gt; authors = Author.object.all().annotate(number_of_blog=Count('blog'))&gt;&gt;&gt; authors[0].number_of_blog3 ç®—å‡ºæ‰€æœ‰ä½œè€…çš„å¹´é¾„æ€»åˆï¼ˆä¸éœ€è¦å…¶å®ƒæ•°æ®ï¼‰12&gt;&gt;&gt; ageAuthor.objects.all().aggregate(Sum('age'))&#123;'age__sum': 26&#125; annotateå’Œaggregateéƒ½å¯å†™å…¥å¤šä¸ªæ³¨è§£è¡¨è¾¾å¼annotateå’Œaggregateå¯èšåˆå…³è”å¯¹è±¡ å¯¹æ³¨è§£è¿›è¡Œè¿‡æ»¤123# æŸ¥è¯¢å‡ºä½œè€…æ•°å¤§äº1çš„ä¹¦æœ¬# åªæœ‰ä¸€æ¡sqlBook.objects.annotate(num_authors=Count('authors')).filter(num_authors__gt=1) ä½†é¡ºåºä¸ä¸€æ ·ï¼Œç»“æœä¹Ÿä¸åŒï¼Œå¦‚ï¼š12Publisher.objects.annotate(num_books=Count('book')).filter(book__rating__gt=3.0)Publisher.objects.filter(book__rating__gt=3.0).annotate(num_books=Count('book')) å¯¹æ³¨è§£é¡¹è¿›è¡Œæ’åº1Book.objects.annotate(num_authors=Count('authors')).order_by('num_authors') values()ä½¿ç”¨æ³¨è§£æ—¶è¦å°å¿ƒï¼Œå¦‚æœvalues()åœ¨æ³¨è§£ä¹‹å‰ï¼Œä¼šå¯¹ç»“æœè¿›è¡Œåˆ†ç»„ï¼Œæ³¨è§£ä¼šä½œç”¨åœ¨åˆ†ç»„ä¸Šè€Œä¸æ˜¯æ•´ä¸ªæŸ¥è¯¢é›†ä¸Š ä¸é»˜è®¤æ’åºäº¤æ¢æˆ–order_by()Â¶ åœ¨æŸ¥è¯¢é›†ä¸­çš„order_by() éƒ¨åˆ†(æˆ–æ˜¯åœ¨æ¨¡å‹ä¸­é»˜è®¤å®šä¹‰çš„æ’åºé¡¹) ä¼šåœ¨é€‰æ‹©è¾“å‡ºæ•°æ®æ—¶è¢«ç”¨åˆ°ï¼Œå³ä½¿è¿™äº›å­—æ®µæ²¡æœ‰åœ¨ values() è°ƒç”¨ä¸­è¢«æŒ‡å®šã€‚è¿™äº›é¢å¤–çš„å­—æ®µå¯ä»¥å°†ç›¸ä¼¼çš„æ•°æ®è¡Œåˆ†åœ¨ä¸€èµ·ï¼Œä¹Ÿå¯ä»¥è®©ç›¸åŒçš„æ•°æ®è¡Œç›¸åˆ†ç¦»ã€‚åœ¨åšè®¡æ•°æ—¶ï¼Œ å°±ä¼šè¡¨ç°åœ°æ ¼å¤–æ˜æ˜¾ï¼š é€šè¿‡ä¾‹å­ä¸­çš„æ–¹æ³•ï¼Œå‡è®¾æœ‰ä¸€ä¸ªè¿™æ ·çš„æ¨¡å‹ï¼š 123456from django.db import models class Item(models.Model): name = models.CharField(max_length=10) data = models.IntegerField() class Meta: ordering = ["name"] å…³é”®çš„éƒ¨åˆ†å°±æ˜¯åœ¨æ¨¡å‹é»˜è®¤æ’åºé¡¹ä¸­è®¾ç½®çš„nameå­—æ®µã€‚å¦‚æœä½ æƒ³çŸ¥é“æ¯ä¸ªéé‡å¤çš„dataå€¼å‡ºç°çš„æ¬¡æ•°ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š 12# Warning: not quite correct!Item.objects.values("data").annotate(Count("id")) â€¦è¿™éƒ¨åˆ†ä»£ç æƒ³é€šè¿‡ä½¿ç”¨å®ƒä»¬å…¬å…±çš„ data å€¼æ¥åˆ†ç»„ Itemå¯¹è±¡ï¼Œç„¶ååœ¨æ¯ä¸ªåˆ†ç»„ä¸­å¾—åˆ° id å€¼çš„æ€»æ•°ã€‚ä½†æ˜¯ä¸Šé¢é‚£æ ·åšæ˜¯è¡Œä¸é€šçš„ã€‚è¿™æ˜¯å› ä¸ºé»˜è®¤æ’åºé¡¹ä¸­çš„ nameä¹Ÿæ˜¯ä¸€ä¸ªåˆ†ç»„é¡¹ï¼Œæ‰€ä»¥è¿™ä¸ªæŸ¥è¯¢ä¼šæ ¹æ®éé‡å¤çš„ (data, name) è¿›è¡Œåˆ†ç»„ï¼Œè€Œè¿™å¹¶ä¸æ˜¯ä½ æœ¬æ¥æƒ³è¦çš„ç»“æœã€‚æ‰€ä»¥ï¼Œä½ åº”è¯¥è¿™æ ·æ”¹å†™ï¼š 1Item.objects.values("data").annotate(Count("id")).order_by() â€¦è¿™æ ·å°±æ¸…ç©ºäº†æŸ¥è¯¢ä¸­çš„æ‰€æœ‰æ’åºé¡¹ã€‚ ä½ ä¹Ÿå¯ä»¥åœ¨å…¶ä¸­ä½¿ç”¨ data ï¼Œè¿™æ ·å¹¶ä¸ä¼šæœ‰å‰¯ä½œç”¨ï¼Œè¿™æ˜¯å› ä¸ºæŸ¥è¯¢åˆ†ç»„ä¸­åªæœ‰è¿™ä¹ˆä¸€ä¸ªè§’è‰²äº†ã€‚ è¿™ä¸ªè¡Œä¸ºä¸æŸ¥è¯¢é›†æ–‡æ¡£ä¸­æåˆ°çš„ distinct() ä¸€æ ·ï¼Œè€Œä¸”ç”Ÿæˆè§„åˆ™ä¹Ÿä¸€æ ·ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½ ä¸æƒ³åœ¨ç»“æœä¸­ç”±é¢å¤–çš„å­—æ®µæ‰®æ¼”è¿™ä¸ªè§’è‰²ï¼Œé‚£å°±æ¸…ç©ºæ’åºé¡¹ï¼Œæˆ–æ˜¯è‡³å°‘ä¿è¯å®ƒä»…èƒ½è®¿é—® values()ä¸­çš„å­—æ®µã€‚ é™æ€æ–‡ä»¶http://python.usyiyi.cn/django/intro/tutorial06.htmlhttp://python.usyiyi.cn/django/ref/templates/builtins.html 12345678&#123;% load static %&#125;&lt;link rel="stylesheet" type="text/css" href="&#123;% static user_stylesheet %&#125;" /&gt;&lt;link rel="stylesheet" type="text/css" href="&#123;% static 'polls/style.css' %&#125;" /&gt;&lt;link rel="stylesheet" type="text/css" href="&#123;% get_static_prefix %&#125;pools/style.css" /&gt;&#123;% get_static_prefix as STATIC_PREFIX %&#125;&lt;link rel="stylesheet" type="text/css" href="&#123;&#123; STATIC_PREFIX &#125;&#125;pools/style.css" /&gt;&#123;% static "images/hi.jpg" as myphoto %&#125;&lt;img src="&#123;&#123; myphoto &#125;&#125;"&gt;&lt;/img&gt; è¿˜æœ‰get_media_prefix æ¨¡å‹å®ä¾‹å‚è€ƒä»æ•°æ®åº“ä¸­é‡æ–°åŠ è½½å€¼Model.refresh_from_db(using=None, fields=None, **kwargs) è¿”å›æ¨¡å‹ä¸­å½“å‰æ‰€æœ‰å»¶è¿Ÿå­—æ®µçš„å±æ€§åç§°Model.get_deferred_fields() éªŒè¯å¯¹è±¡ å­—æ®µçš„åŸºæœ¬éªŒè¯ä¼šæœ€å…ˆè·‘ï¼Œä½†ä¸ç®¡å‰é¢è¿è¡Œæ˜¯å¦é€šè¿‡ï¼Œå¯¹äºæ¯ä¸ªå­—æ®µï¼Œå¦‚æœField.clean() æ–¹æ³•æŠ›å‡º ValidationErrorï¼Œé‚£ä¹ˆå°†ä¸ä¼šè°ƒç”¨è¯¥å­—æ®µå¯¹åº”çš„clean_()æ–¹æ³•ã€‚ ä½†æ˜¯ï¼Œå‰©ä½™çš„å­—æ®µçš„éªŒè¯æ–¹æ³•ä»ç„¶ä¼šæ‰§è¡Œã€‚å…ˆè·‘formé‡ŒéªŒè¯ï¼Œå†è·‘modleéªŒè¯å…ˆè·‘éªŒè¯å™¨ï¼Œå†è·‘cleanå…ˆè·‘å•ä¸ªå­—æ®µéªŒè¯ï¼Œå†è·‘æ•´ä½“éªŒè¯Model.clean_field()ä¼šè¦†ç›–Modelé‡Œæ‰€æœ‰å­—æ®µçš„éªŒè¯å™¨ï¼Œä½†ä¸ä¼šå¯¹Formé‡Œçš„éªŒè¯å™¨äº§ç”Ÿå½±å“ éªŒè¯æ¨¡å‹çš„å­—æ®µModel.clean_fields(exclude=None)éªŒè¯æ¨¡å‹çš„å®Œæ•´æ€§Model.clean()éªŒè¯æ¨¡å‹çš„å”¯ä¸€æ€§Model.validate_unique(exclude=None)è°ƒç”¨full_clean()æ—¶ï¼Œä¸Šé¢ä¸‰ä¸ªæ–¹æ³•éƒ½ä¼šæ‰§è¡Œï¼ˆæ‰§è¡Œé¡ºåºå³ä¸Šé¢çš„ä¹¦å†™é¡ºåºï¼‰ï¼ŒModelFormçš„is_valid()ä¹Ÿä¼šæ‰§è¡Œä¸Šæ‰€æœ‰éªŒè¯Model.full_clean(exclude=None, validate_unique=True) save()æ—¶ï¼Œfull_clean()ä¸ä¼šè¢«è°ƒç”¨ï¼Œå¦‚æœæƒ³éªŒè¯æ•°æ®ï¼Œå¯æ‰‹åŠ¨è°ƒç”¨ Model.clean()æ—¶ï¼Œå¼•å‘ç‰¹å®šå­—æ®µçš„å¼‚å¸¸ä½¿ç”¨ä¸€ä¸ªå­—å…¸å®ä¾‹åŒ–ValidationErrorå³å¯æˆ–ä½¿ç”¨add_error(field, msg)æ–¹æ³• åœ¨æ•°æ®åº“å­—æ®µå€¼çš„åŸºç¡€ä¸Šè¿›è¡Œç®€å•çš„ç®—æ³•æ“ä½œï¼Œåº”è¯¥å°½é‡ä½¿ç”¨F()è¡¨è¾¾å¼ï¼Œé¿å…é—®é¢˜ç«æ€æ¡ä»¶ æŒ‡å®šè¦ä¿å­˜çš„å­—æ®µ å¦‚æœä¼ é€’ç»™save() çš„update_fields å…³é”®å­—å‚æ•°ä¸€ä¸ªå­—æ®µåç§°åˆ—è¡¨ï¼Œé‚£ä¹ˆå°†åªæœ‰è¯¥åˆ—è¡¨ä¸­çš„å­—æ®µä¼šè¢«æ›´æ–°ã€‚å¦‚æœä½ æƒ³æ›´æ–°å¯¹è±¡çš„ä¸€ä¸ªæˆ–å‡ ä¸ªå­—æ®µï¼Œè¿™å¯èƒ½æ˜¯ä½ æƒ³è¦çš„ã€‚ä¸è®©æ¨¡å‹çš„æ‰€æœ‰å­—æ®µéƒ½æ›´æ–°å°†ä¼šå¸¦æ¥ä¸€äº›è½»å¾®çš„æ€§èƒ½æå‡ã€‚ä¾‹å¦‚ï¼š 12product.name = 'Name changed again'product.save(update_fields=['name']) update_fields å‚æ•°å¯ä»¥æ˜¯ä»»ä½•åŒ…å«å­—ç¬¦ä¸²çš„å¯è¿­ä»£å¯¹è±¡ã€‚ç©ºçš„update_fieldså¯è¿­ä»£å¯¹è±¡å°†ä¼šå¿½ç•¥ä¿å­˜ã€‚å¦‚æœä¸ºNoneå€¼ï¼Œå°†æ‰§è¡Œæ‰€æœ‰å­—æ®µä¸Šçš„æ›´æ–°ã€‚ æŒ‡å®šupdate_fieldså°†å¼ºåˆ¶ä½¿ç”¨æ›´æ–°æ“ä½œã€‚ å½“ä¿å­˜é€šè¿‡å»¶è¿Ÿæ¨¡å‹åŠ è½½ï¼ˆonly() æˆ–defer()ï¼‰è¿›è¡Œè®¿é—®çš„æ¨¡å‹æ—¶ï¼Œåªæœ‰ä»æ•°æ®åº“ä¸­åŠ è½½çš„å­—æ®µæ‰ä¼šå¾—åˆ°æ›´æ–°ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæœ‰ä¸ªè‡ªåŠ¨çš„update_fieldsã€‚å¦‚æœä½ èµ‹å€¼æˆ–è€…æ”¹å˜å»¶è¿Ÿå­—æ®µçš„å€¼ï¼Œè¯¥å­—æ®µå°†ä¼šæ·»åŠ åˆ°æ›´æ–°çš„å­—æ®µä¸­ã€‚ new in 1.9ä½¿ç”¨Model.delete()åˆ é™¤å¤šè¡¨ç»§æ‰¿çš„å­è¡¨æ•°æ®æ—¶ï¼Œä½¿ç”¨keep_parents=Trueå¯ä»¥ä¿ç•™ä¸Šçº§æ•°æ®ï¼Œé»˜è®¤ä¸ºFalse`è¿”å›å€¼ä¸ºåˆ é™¤æ•°æ®çš„æ¡æ•° DateFieldå’ŒDateTimeFieldå­—æ®µå¦‚æœnull=Falseåˆ™æ”¯æŒä¸‹é¢ä¸¤ä¸ªæ–¹æ³•12Model.get_next_by_FOO(**kwargs)Â¶ Model.get_previous_by_FOO(**kwargs) ç®¡ç†å™¨djangoé‡åˆ°çš„ç¬¬ä¸€ä¸ªç®¡ç†å™¨ä¸ºé»˜è®¤ç®¡ç†å™¨ å¦‚æœéœ€è¦è®¿é—®å…³è”å¯¹è±¡è°ƒç”¨å…³è”å¯¹è±¡çš„é»˜è®¤ç®¡ç†å™¨ï¼Œéœ€è¦åœ¨ç®¡ç†å™¨ä¸­åŠ use_for_related_fields=Trueï¼Œä¸ç„¶ä¼šè°ƒç”¨æœ´ç´ ç®¡ç†å™¨1234567891011121314151617181920212223242526272829303132# -*- coding: utf-8 -*- from django.db import models class DefaultManager(models.Manager): def get_queryset(self): queryset = super(DefaultManager, self).get_quertset().filter(is_delete=False) return queryset class Author(models.Model): name = models.CharField(max_length=100) is_delete = models.BooleanField() objects = DefaultManager() class Post(models.Model): author = models.ForeignKey(Author) title = models.CharField(max_length=100) content = models.TextField() is_delete = models.BooleanField() objects = DefaultManager() author = Author.objects.get(pk=1)post = Post.objects.get(pk=2) # è°ƒç”¨DefaultManagerç®¡ç†å™¨author.post_set.all()# è°ƒç”¨æœ´ç´ ç®¡ç†å™¨ï¼Œå¦‚æœè¦è°ƒç”¨DefaultManagerç®¡ç†å™¨ï¼Œéœ€è¦è®¾ç½®DefaultManagerç®¡ç†å™¨çš„ç±»å˜é‡use_for_related_fields=Truepost.author æ³¨ï¼šæœ´ç´ ç®¡ç†å™¨é‡Œæ‰¾ä¸åˆ°çš„æ–¹æ³•ä¼šåœ¨é»˜è®¤ç®¡ç†å™¨é‡ŒæŸ¥æ‰¾ ä»Managerä¸­è°ƒç”¨è‡ªå®šä¹‰çš„QuerySet è¿›è¡ŒåŸå§‹çš„SQLæŸ¥è¯¢1Manager.raw(raw_query, params=None, translations=None) django.db.connectionå¯¹è±¡æä¾›äº†å¸¸è§„æ•°æ®åº“è¿æ¥çš„æ–¹å¼ã€‚ä¸ºäº†ä½¿ç”¨æ•°æ®åº“è¿æ¥ï¼Œå…ˆè¦è°ƒç”¨connection.cursor()æ–¹æ³•æ¥è·å–ä¸€ä¸ªæ¸¸æ ‡å¯¹è±¡ä¹‹åï¼Œè°ƒç”¨cursor.execute(sql, [params])æ¥æ‰§è¡Œsqlè¯­å¥ï¼Œè°ƒç”¨cursor.fetchone()æˆ–è€…cursor.fetchall()æ¥è¿”å›ç»“æœè¡Œã€‚ æ•°æ®åº“äº‹åŠ¡è¯¦ç»†ç¬”è®°è§django1.8äº‹åŠ¡.md å°†æ¯ä¸ªHTTPè¯·æ±‚å°è£…åœ¨ä¸€ä¸ªæ•°æ®åº“äº‹åŠ¡ä¸­settingsä¸­è®¾ç½®ATOMIC_REQUESTS=True å•ç‹¬ç»™ä¸€ä¸ªæ–¹æ³•åŠ ä¸Šæ•°æ®åº“äº‹åŠ¡æ§åˆ¶ä½¿ç”¨atomic123456from django.db import transaction @transaction.atomicdef viewfunc(request): # This code executes inside a transaction. do_stuff() æˆ–123456789from django.db import transaction def viewfunc(request): # This code executes in autocommit mode (Django's default). do_stuff() with transaction.atomic(): # This code executes inside a transaction. do_more_stuff() é¿å…åœ¨ atomicé‡Œæ•è·å¼‚å¸¸! æŸ¥è¯¢è¡¨è¾¾å¼ä½¿ç”¨æ•°æ®åº“çš„æ–¹æ³•12from django.db.models import Func, F queryset.annotate(field_lower=Func(F('field'), function='LOWER')) æˆ–123class Lower(Func): function = 'LOWER' queryset.annotate(field_lower=Lower(F('field'))) æ¡ä»¶è¡¨è¾¾å¼é«˜çº§ç”¨æ³•æŸ¥çœ‹åœ¨çº¿ç‰ˆWhenCase æ•°æ®åº“å‡½æ•°Coalesce æ¥æ”¶ä¸€ä¸ªå«æœ‰è‡³å°‘ä¸¤ä¸ªå­—æ®µåç§°æˆ–è¡¨è¾¾å¼çš„åˆ—è¡¨ï¼Œè¿”å›ç¬¬ä¸€ä¸ªéç©ºçš„å€¼ï¼ˆç©ºå­—ç¬¦ä¸²ä¸è®¤ä¸ºæ˜¯ä¸€ä¸ªç©ºå€¼ï¼‰ å°†é—ç•™æ•°æ®åº“æ•´åˆåˆ°Djangoæ ¹æ®é—ç•™æ•°æ®åº“ç”Ÿæˆmodels1python manage.py inspectdb &gt; models.py ä¸ºæ¨¡å‹æä¾›åˆå§‹æ•°æ®ä½¿ç”¨fixtures123456789101112131415161718[ &#123; &quot;model&quot;: &quot;myapp.person&quot;, &quot;pk&quot;: 1, &quot;fields&quot;: &#123; &quot;first_name&quot;: &quot;John&quot;, &quot;last_name&quot;: &quot;Lennon&quot; &#125; &#125;, &#123; &quot;model&quot;: &quot;myapp.person&quot;, &quot;pk&quot;: 2, &quot;fields&quot;: &#123; &quot;first_name&quot;: &quot;Paul&quot;, &quot;last_name&quot;: &quot;McCartney&quot; &#125; &#125;] å¯¼å…¥æ•°æ®å‘½ä»¤1python manage.py loaddata &lt;fixturename&gt; æ•°æ®åº“è®¿é—®ä¼˜åŒ–æ·»åŠ ç´¢å¼•ï¼Œæ¯”ä»»ä½•æŸ¥è¯¢è¯­æ³•ä¼˜åŒ–éƒ½æ¥çš„é‡è¦ç†è§£æŸ¥è¯¢é›†QuerySetsæ˜¯å»¶è¿Ÿçš„ã€‚ä»€ä¹ˆæ—¶å€™å®ƒä»¬è¢«è®¡ç®—å‡ºæ¥ã€‚æ•°æ®åœ¨å†…å­˜ä¸­å¦‚ä½•å­˜å‚¨ã€‚ ä½¿ç”¨cached_propertyè£…é¥°å™¨ï¼Œåªè¦æ˜¯åŒä¸€ä¸ªå®ä¾‹ï¼Œä¸€ä¸ªæ–¹æ³•å°±åªä¼šæ‰§è¡Œä¸€æ¬¡ä½¿ç”¨withæ¨¡ç‰ˆæ ‡ç­¾ä½¿ç”¨iteratorè¿­ä»£å™¨ åœ¨æ•°æ®åº“ä¸­è€Œä¸æ˜¯pythonä¸­åšæ•°æ®åº“å·¥ä½œä½¿ç”¨è¿‡æ»¤å™¨å’Œåå°„è¿‡æ»¤å™¨å¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤ä½¿ç”¨F()è¡¨è¾¾å¼ä½¿ç”¨æ³¨è§£å’Œèšåˆä½¿ç”¨åŸå§‹SQL ç”¨å”¯ä¸€çš„æˆ–è¢«ç´¢å¼•çš„åˆ—æ¥æ£€ç´¢ç‹¬ç«‹å¯¹è±¡ åœ¨ä¸åŒä½ç½®å¤šæ¬¡è®¿é—®æ•°æ®åº“ï¼Œæ¯æ¬¡è·å–ä¸€ä¸ªæ•°æ®é›†ï¼Œä¸å¦‚åœ¨ä¸€æ¬¡æŸ¥è¯¢ä¸­è·å–å®ƒä»¬ã€‚æ¯”å¦‚å¾ªç¯çš„æ—¶å€™ã€‚ ä½¿ç”¨select_related()å’Œprefetch_related() ä¸æ£€ç´¢ä½ ä¸éœ€è¦çš„ä¿¡æ¯ä½¿ç”¨QuerySet.values()å’ŒQuerySet.values_list() ä½¿ç”¨QuerySet.defer()å’ŒQuerySet.only() è®¡ç®—æ•°é‡ä¸è¦ä½¿ç”¨len(queryset)è€Œæ˜¯ä½¿ç”¨QuerySet.count() åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç»“æœä½¿ç”¨QuerySet.exists()è€Œä¸æ˜¯ç”¨if queryset ä½†ä¸è¦è¿‡åº¦ä½¿ç”¨count()å’Œexists()ï¼Œå¦‚æœä½ æœ¬æ¥å°±éœ€è¦é‡Œé¢çš„æ•°æ®ï¼Œé‚£å°±ä¸è¦ä½¿ç”¨ ä½¿ç”¨QuerySet.update()å’ŒQuerySet.delete()æ‰¹é‡æ“ä½œæ•°æ® ç›´æ¥ä½¿ç”¨å¤–é”®çš„å€¼123entry.blog_id# è€Œä¸æ˜¯entry.blog.id å¦‚æœä½ å¹¶åœ¨æ„ç»“æœé›†çš„é¡ºåºï¼Œä¸è¦è¿›è¡Œæ’åºï¼Œç§»é™¤Meta.ordering åˆ›å»ºå¯¹è±¡æ—¶å°½å¯èƒ½ä½¿ç”¨bulk_create()æ¥å‡å°‘sqlæŸ¥è¯¢æ•°é‡è¿™ä¹Ÿé€‚ç”¨äºManyToManyFieldsçš„æƒ…å†µï¼Œä¸€èµ·addè€Œä¸æ˜¯ä¸€ä¸ªä¸€ä¸ªadd1234my_band.members.add(me, my_friend) #æ›´ä¼˜äº my_band.members.add(me)my_band.members.add(my_friend) URLè°ƒåº¦å™¨urlæ•è·çš„å‚æ•°æ°¸è¿œæ˜¯å­—ç¬¦ä¸² åœ¨æ ¹urlä¸Šè·å–çš„å‚æ•°ä¸å½±å“å‚æ•°ä¼ é€’123456789101112131415# In settings/urls/main.pyfrom django.conf.urls import include, url urlpatterns = [ url(r'^(?P&lt;username&gt;\w+)/blog/', include('foo.urls.blog')),] # In foo/urls/blog.pyfrom django.conf.urls import urlfrom . import views urlpatterns = [ url(r'^$', views.blog.index), url(r'^archive/$', views.blog.archive),] åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæ•è·çš„â€usernameâ€å˜é‡å°†è¢«å¦‚æœŸä¼ é€’ç»™include()æŒ‡å‘çš„URLconfã€‚ å¯åµŒå¥—123456from django.conf.urls import url urlpatterns = [ url(r'blog/(page-(\d+)/)?$', blog_articles), # bad url(r'comments/(?:page-(?P&lt;page_number&gt;\d+)/)?$', comments), # good] ä¼ é€’é¢å¤–çš„å‚æ•°123456from django.conf.urls import urlfrom . import views urlpatterns = [ url(r'^blog/(?P&lt;year&gt;[0-9]&#123;4&#125;)/$', views.year_archive, &#123;'foo': 'bar'&#125;),] å½“urlæ•è·çš„å‚æ•°å’Œå­—å…¸ä¸­ä¼ é€’çš„å‚æ•°åŒåæ—¶ï¼Œå°†å¿½ç•¥urlæ•è·çš„å‚æ•°è€Œä½¿ç”¨å­—å…¸é‡Œçš„å‚æ•°å€¼ ä¼ é€’é¢å¤–çš„å‚æ•°ç»™include()123456789101112131415# main.pyfrom django.conf.urls import include, url urlpatterns = [ url(r'^blog/', include('inner'), &#123;'blogid': 3&#125;),] # inner.pyfrom django.conf.urls import urlfrom mysite import views urlpatterns = [ url(r'^archive/$', views.archive), url(r'^about/$', views.about),] æ•ˆæœç­‰åŒ123456789101112131415# main.pyfrom django.conf.urls import include, urlfrom mysite import views urlpatterns = [ url(r'^blog/', include('inner')),] # inner.pyfrom django.conf.urls import url urlpatterns = [ url(r'^archive/$', views.archive, &#123;'blogid': 3&#125;), url(r'^about/$', views.about, &#123;'blogid': 3&#125;),] åæŸ¥å¸¦å‘½åç©ºé—´çš„URL ç¼–å†™è§†å›¾HttpResponseå­ç±»ï¼ŒçŠ¶æ€ç  HttpResponseRedirect ä¸´æ—¶é‡å®šå‘ï¼Œ302 HttpResponsePermanentRedirect æ°¸ä¹…é‡å®šå‘ï¼Œ301 HttpResponseNotModified æ²¡æœ‰ä»»ä½•ä¿®æ”¹ï¼Œ304 HttpResponseBadRequest è¯­ä¹‰æœ‰è¯¯ç ï¼Œå½“å‰è¯·æ±‚ä¸è¢«æœåŠ¡å™¨ç†è§£ï¼Œ400 HttpResponseNotFound é¡µé¢æ²¡æ‰¾åˆ°ï¼Œ404 HttpResponseForbidden æœåŠ¡å™¨ç†è§£è¯·æ±‚ï¼Œä½†æ‹’ç»æ‰§è¡Œï¼Œ403 HttpResponseNotAllowed è¯·æ±‚ä¸­æŒ‡å®šçš„è¯·æ±‚æ–¹å¼ä¸èƒ½ç”¨äºè¯·æ±‚ç›¸åº”èµ„æºï¼Œ405 HttpResponseGone è¯·æ±‚çš„èµ„æºåœ¨æœåŠ¡å™¨ä¸Šå·²ç»ä¸å¯ç”¨ï¼Œè€Œä¸”æ²¡æœ‰å·²çŸ¥çš„è½¬å‘åœ°å€ï¼Œ410 HttpResponseServerError æœåŠ¡å™¨é‡åˆ°äº†ä¸€ä¸ªæ„å¤–çš„é”™è¯¯ï¼Œå¯¼è‡´æ— æ³•å®Œæˆå¯¹è¯·æ±‚çš„å¤„ç†ï¼Œ500 HttpResponse(status=201) è‡ªå®šä¹‰è¿”å›çŠ¶æ€ç  é‡å†™é”™è¯¯è§†å›¾ï¼ˆåœ¨urlä¸­ï¼‰1234handler404 = &apos;mysite.views.my_custom_page_not_found_view&apos;handler500 = &apos;mysite.views.my_custom_error_view&apos; handler403 = &apos;mysite.views.my_custom_permission_denied_view&apos;handler400 = &apos;mysite.views.my_custom_bad_request_view&apos; Django çš„å¿«æ·å‡½æ•°template_nameå¯ä¼ ä¸€ä¸ªæ¨¡ç‰ˆåºåˆ—ï¼Œdjangoå°†ä½¿ç”¨å­˜åœ¨çš„ç¬¬ä¸€ä¸ªæ¨¡ç‰ˆ redirect(to, [permanent=False, ]*args, **kwargs)[source] ä¸ºä¼ é€’è¿›æ¥çš„å‚æ•°è¿”å›HttpResponseRedirect ç»™æ­£ç¡®çš„URL ã€‚å‚æ•°å¯ä»¥æ˜¯ï¼š ä¸€ä¸ªæ¨¡å‹ï¼šå°†è°ƒç”¨æ¨¡å‹çš„get_absolute_url() å‡½æ•° ä¸€ä¸ªè§†å›¾ï¼Œå¯ä»¥å¸¦æœ‰å‚æ•°ï¼šå°†ä½¿ç”¨urlresolvers.reverse æ¥åå‘è§£æåç§° ä¸€ä¸ªç»å¯¹çš„æˆ–ç›¸å¯¹çš„URLï¼Œå°†åŸæ ·ä½œä¸ºé‡å®šå‘çš„ä½ç½®ã€‚ é»˜è®¤è¿”å›ä¸€ä¸ªä¸´æ—¶çš„é‡å®šå‘ï¼›ä¼ é€’permanent=True å¯ä»¥è¿”å›ä¸€ä¸ªæ°¸ä¹…çš„é‡å®šå‘ã€‚ get_object_or_404(klass, *args, **kwargs)å¯ä»¥ä¼ Modelä¹Ÿå¯ä»¥ä¼ QuerySetå®ä¾‹å’Œå…³è”çš„ç®¡ç†å™¨get_list_or_404(klass, *args, **kwargs)å¯ä»¥ä¼ Modelä¹Ÿå¯ä»¥ä¼ QuerySetå®ä¾‹å’Œå…³è”çš„ç®¡ç†å™¨ è§†å›¾è£…é¥°å™¨æŒ‰éœ€å†…å®¹å¤„ç†django.views.decorators.httpåŒ…é‡Œçš„è£…é¥°å™¨å¯ä»¥åŸºäºè¯·æ±‚çš„æ–¹æ³•æ¥é™åˆ¶å¯¹è§†å›¾çš„è®¿é—®ã€‚è‹¥æ¡ä»¶ä¸æ»¡è¶³ä¼šè¿”å› django.http.HttpResponseNotAllowedã€‚require_http_methods(request_method_list)é™åˆ¶è§†å›¾åªèƒ½æœåŠ¡äºè§„å®šçš„httpæ–¹æ³•ï¼ˆéœ€è¦å¤§å†™ï¼‰require_GET()require_POST()require_safe()åªå…è®¸è§†å›¾æ¥å—GETå’ŒHEADæ–¹æ³•çš„è£…é¥°å™¨ã€‚ 1@condition(etag_func=None, last_modified_func=None) 1@last_modified(last_modified_func) æ ¹æ®æœ€åä¿®æ”¹æ—¶é—´æ¥å†³å®šæ˜¯å¦è¿è¡Œè§†å›¾ï¼Œå¯å‡å°‘æµé‡1@etag(etag_func) etagï¼ˆç‰ˆæœ¬ï¼Ÿï¼‰å’Œlast_modifiedä¸èƒ½åŒæ—¶ä½¿ç”¨ GZipå¯¹å†…å®¹è¿›è¡Œå‹ç¼©ï¼ŒèŠ‚çœæµé‡ï¼Œä½†å¢åŠ å¤„ç†æ—¶é—´ vary_on_cookievary_on_headersåŸºäºç‰¹å®šçš„è¯·æ±‚å¤´éƒ¨æ¥æ§åˆ¶ç¼“å­˜ never_cache Request å¯¹è±¡å’ŒResponse å¯¹è±¡HttpRequestå¯¹è±¡(é™¤éç‰¹æ®Šè¯´æ˜ï¼Œæ‰€æœ‰å±æ€§éƒ½æ˜¯åªè¯»ï¼Œsessionå±æ€§æ˜¯ä¸ªä¾‹å¤–)HttpRequest.scheme è¯·æ±‚æ–¹æ¡ˆï¼ˆé€šå¸¸ä¸ºhttpæˆ–httpsï¼‰HttpRequest.body å­—èŠ‚å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºåŸå§‹httpè¯·æ±‚æ­£æ–‡HttpRequest.path å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè¯·æ±‚çš„é¡µé¢çš„å®Œæ•´è·¯å¾„ï¼Œä¸åŒ…å«åŸŸåHttpRequest.path_info åœ¨æŸäº›Web æœåŠ¡å™¨é…ç½®ä¸‹ï¼Œä¸»æœºååçš„URL éƒ¨åˆ†è¢«åˆ†æˆè„šæœ¬å‰ç¼€éƒ¨åˆ†å’Œè·¯å¾„ä¿¡æ¯éƒ¨åˆ†ã€‚path_info å±æ€§å°†å§‹ç»ˆåŒ…å«è·¯å¾„ä¿¡æ¯éƒ¨åˆ†ï¼Œä¸è®ºä½¿ç”¨çš„Web æœåŠ¡å™¨æ˜¯ä»€ä¹ˆã€‚ä½¿ç”¨å®ƒä»£æ›¿path å¯ä»¥è®©ä»£ç åœ¨æµ‹è¯•å’Œå¼€å‘ç¯å¢ƒä¸­æ›´å®¹æ˜“åœ°åˆ‡æ¢ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœåº”ç”¨çš„WSGIScriptAlias è®¾ç½®ä¸ºâ€/minfoâ€ï¼Œé‚£ä¹ˆå½“path æ˜¯â€/minfo/music/bands/the_beatles/â€œ æ—¶path_info å°†æ˜¯â€/music/bands/the_beatles/â€œã€‚HttpRequest.method è¯·æ±‚ä½¿ç”¨çš„httpæ–¹æ³•ï¼Œå¤§å†™HttpRequest.encoding è¡¨ç¤ºæäº¤çš„æ•°æ®çš„ç¼–ç æ–¹å¼ï¼Œå¯å†™HttpRequest.GETHttpRequest.POSTHttpRequest.REQUESTä¸å»ºè®®ä½¿ç”¨ï¼Œä½¿ç”¨GETå’ŒPOSTä»£æ›¿HttpRequest.COOKIES å­—å…¸ï¼Œé”®å’Œå€¼éƒ½æ˜¯å­—ç¬¦ä¸²HttpRequest.FILES ç±»ä¼¼å­—å…¸çš„å¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰çš„ä¸Šä¼ æ–‡ä»¶ï¼Œå¸¦æœ‰enctype=&quot;multipart/form-data&quot;æ‰ä¼šæœ‰æ•°æ®HttpRequest.META æ ‡å‡†çš„pythonå­—å…¸ï¼ŒåŒ…å«æ‰€æœ‰httpè¯·æ±‚å¤´éƒ¨HttpRequest.userHttpRequest.session ç±»ä¼¼å­—å…¸çš„å¯¹è±¡HttpRequest.urlconf å¦‚æœå…¶å®ƒåœ°æ–¹è®¾ç½®äº†ï¼Œåˆ™ç”¨æ¥å–ä»£ROOT_URLCONFHttpRequest.resolver_match ä¼šåœ¨urlè§£æä¹‹åè®¾ç½®ï¼Œä¸€ä¸ªResolverMatchå®ä¾‹ï¼Œè¡¨ç¤ºè§£æä¹‹åçš„urlHttpRequest.get_host() è·å–åŸå§‹ä¸»æœºåœ°å€HttpRequest.get_port() è·å–è¯·æ±‚ç«¯ç«¯å£å·HttpRequest.get_full_path() è¿”å›å®Œæ•´çš„pathï¼ŒåŒ…æ‹¬æŸ¥è¯¢å­—ç¬¦ä¸²HttpRequest.build_absolute_uri(location) è¿”å›ç»å¯¹urlHttpRequest.get_signed_cookie(key, default=RAISE_ERROR, salt=&#39;&#39;, max_age=None) è¿”å›ç­¾åè¿‡çš„Cookieå¯¹åº”çš„å€¼HttpRequest.is_secure() å¦‚æœè¯·æ±‚æ˜¯é€šè¿‡httpså‘èµ·çš„ï¼Œåˆ™è¿”å›TrueHttpRequest.is_ajax() å¦‚æœè¯·æ±‚æ˜¯é€šè¿‡XMLHttpRequestå‘èµ·çš„ï¼Œåˆ™è¿”å›True12345HttpRequest.read(size=None)HttpRequest.readline()HttpRequest.readlines()HttpRequest.xreadlines()HttpRequest.__iter__() è¿™å‡ ä¸ªæ–¹æ³•å®ç°ç±»æ–‡ä»¶çš„æ¥å£ç”¨äºè¯»å–HttpRequestÂ· å®ä¾‹ QueryDictå¯¹è±¡request.POST å’Œrequest.GET çš„QueryDict åœ¨ä¸€ä¸ªæ­£å¸¸çš„è¯·æ±‚/å“åº”å¾ªç¯ä¸­æ˜¯ä¸å¯å˜çš„ã€‚è‹¥è¦è·å¾—å¯å˜çš„ç‰ˆæœ¬ï¼Œéœ€è¦ä½¿ç”¨.copy()ã€‚ TemplateResponse å’ŒSimpleTemplateResponseSimpleTemplateResponseTemplateResponseTemplateResponse å¯¹è±¡å’Œæ™®é€šçš„django.http.HttpResponse ä¸€æ ·å¯ä»¥ç”¨äºä»»ä½•åœ°æ–¹ã€‚å®ƒå¯ä»¥ç”¨æ¥ä½œä¸ºrender() å’Œrender_to_response() çš„å¦å¤–ä¸€ç§é€‰æ‹©ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸ªç®€å•çš„è§†å›¾ä½¿ç”¨ä¸€ä¸ªç®€å•æ¨¡æ¿å’ŒåŒ…å«æŸ¥è¯¢é›†çš„ä¸Šä¸‹æ–‡è¿”å›ä¸€ä¸ªTemplateResponseï¼š1234from django.template.response import TemplateResponse def blog_index(request): return TemplateResponse(request, 'entry_list.html', &#123;'entries': Entry.objects.all()&#125;) æ–‡ä»¶ä¸Šä¼ 1234def handle_uploaded_file(f): with open('some/file/name.txt', 'wb+') as destination: for chunk in f.chunks(): destination.write(chunk) éå†UploadedFile.chunks()ï¼Œè€Œä¸æ˜¯ä½¿ç”¨read()ï¼Œèƒ½ç¡®ä¿å¤§æ–‡ä»¶å¹¶ä¸ä¼šå ç”¨ç³»ç»Ÿè¿‡å¤šçš„å†…å­˜ã€‚ ä¸Šä¼ å¤„ç†å™¨12(&quot;django.core.files.uploadhandler.MemoryFileUploadHandler&quot;,&quot;django.core.files.uploadhandler.TemporaryFileUploadHandler&quot;,) MemoryFileUploadHandler å’ŒTemporaryFileUploadHandlerä¸€èµ·æä¾›äº†Djangoçš„é»˜è®¤æ–‡ä»¶ä¸Šä¼ è¡Œä¸ºï¼Œå°†å°æ–‡ä»¶è¯»å–åˆ°å†…å­˜ä¸­ï¼Œå¤§æ–‡ä»¶æ”¾ç½®åœ¨ç£ç›˜ä¸­ã€‚ ä½ å¯ä»¥ç¼–å†™è‡ªå®šä¹‰çš„å¤„ç†å™¨ï¼Œæ¥å®šåˆ¶Djangoå¦‚ä½•å¤„ç†æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰å¤„ç†å™¨æ¥é™åˆ¶ç”¨æˆ·çº§åˆ«çš„é…é¢ï¼Œåœ¨è¿è¡Œä¸­å‹ç¼©æ•°æ®ï¼Œæ¸²æŸ“è¿›åº¦æ¡ï¼Œç”šè‡³æ˜¯å‘å¦ä¸€ä¸ªå‚¨å­˜ä½ç½®ç›´æ¥å‘é€æ•°æ®ï¼Œè€Œä¸æŠŠå®ƒå­˜åˆ°æœ¬åœ°ã€‚å…³äºå¦‚ä½•è‡ªå®šä¹‰æˆ–è€…å®Œå…¨æ›¿æ¢å¤„ç†å™¨çš„è¡Œä¸ºï¼Œè¯¦è§ç¼–å†™è‡ªå®šä¹‰çš„ä¸Šä¼ å¤„ç†å™¨ã€‚ æ›´æ”¹ä¸Šä¼ å¤„ç†å™¨çš„è¡Œä¸º12345678DEFAULT_FILE_STORAGEFILE_CHARSETFILE_UPLOAD_HANDLERSFILE_UPLOAD_MAX_MEMORY_SIZEFILE_UPLOAD_PERMISSIONSFILE_UPLOAD_TEMP_DIRMEDIA_ROOTMEDIA_URL åœ¨è¿è¡Œä¸­æ›´æ”¹ä¸Šä¼ å¤„ç†å™¨1request.upload_handlers.insert(0, ProgressBarUploadHandler()) æ³¨æ„ ä½ åªå¯ä»¥åœ¨è®¿é—®request.POSTæˆ–è€…request.FILESä¹‹å‰ä¿®æ”¹ä¸Šä¼ å¤„ç†å™¨â€“ åœ¨ä¸Šä¼ å¤„ç†å·¥ä½œæ‰§è¡Œä¹‹åå†ä¿®æ”¹ä¸Šä¼ å¤„ç†å°±æ¯«æ— æ„ä¹‰äº†ã€‚å¦‚æœä½ åœ¨è¯»å–request.FILESä¹‹åå°è¯•ä¿®æ”¹request.upload_handlersï¼ŒDjangoä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ æ‰€ä»¥ï¼Œä½ åº”è¯¥åœ¨ä½ çš„è§†å›¾ä¸­å°½æ—©ä¿®æ”¹ä¸Šä¼ å¤„ç†å™¨ã€‚ CsrfViewMiddleware ä¹Ÿä¼šè®¿é—®request.POSTï¼Œå®ƒæ˜¯é»˜è®¤å¼€å¯çš„ã€‚æ„æ€æ˜¯ä½ éœ€è¦åœ¨ä½ çš„è§†å›¾ä¸­ä½¿ç”¨csrf_exempt()ï¼Œæ¥å…è®¸ä½ ä¿®æ”¹ä¸Šä¼ å¤„ç†å™¨ã€‚æ¥ä¸‹æ¥åœ¨çœŸæ­£å¤„ç†è¯·æ±‚çš„å‡½æ•°ä¸­ï¼Œéœ€è¦ä½¿ç”¨csrf_protect()ã€‚æ³¨æ„è¿™æ„å‘³ç€å¤„ç†å™¨å¯èƒ½ä¼šåœ¨CSRFéªŒè¯å®Œæˆä¹‹å‰å¼€å§‹æ¥æ”¶ä¸Šä¼ æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼š django.views.decorators.csrf import csrf_exempt, csrf_protect 1234567@csrf_exemptdef upload_file_view(request): request.upload_handlers.insert(0, ProgressBarUploadHandler()) return _upload_file_view(request) @csrf_protectdef _upload_file_view(request): ... # Process request Fileå¯¹è±¡Fileç±»ContentFileç±»ImageFileç±» æ¯”Fileå¤šäº†widthå’Œheightå±æ€§é™„åŠ åˆ°å¯¹è±¡çš„æ–‡ä»¶æœ‰é¢å¤–çš„æ–¹æ³•1File.save(name, content[, save=True]) æä¾›æ–‡ä»¶åå’Œå†…å®¹ä¿å­˜ä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œä¸ä¼šæ›¿æ¢å·²å­˜åœ¨æ–‡ä»¶ï¼Œä½†ä¼šåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå¹¶ä¸”æ›´æ–°å¯¹è±¡æ¥æŒ‡å‘å®ƒã€‚æµ‹è¯•å‡ºæ¥ç›´æ¥car.save()ä¹Ÿä¸ä¼šè¦†ç›–å·²å­˜åœ¨æ–‡ä»¶ï¼Œå¦‚æœæœ‰é‡å†™ä¼šåœ¨åŸæœ‰åå­—åé¢åŠ å­—ç¬¦ä¸²å¦‚æœsaveä¸ºTrueï¼Œæ¨¡å‹çš„save()æ–¹æ³•ä¼šåœ¨æ–‡ä»¶ä¿å­˜ä¹‹åè°ƒç”¨ã€‚è¿™å°±æ˜¯è¯´ï¼Œä¸‹é¢ä¸¤è¡Œï¼š123456&gt;&gt;&gt; car.photo.save('myphoto.jpg', content, save=False)&gt;&gt;&gt; car.save()``` ç­‰ä»·äºï¼š```python&gt;&gt;&gt; car.photo.save('myphoto.jpg', content, save=True) ä»æ¨¡å‹å®ä¾‹ä¸­ç§»é™¤æ–‡ä»¶ï¼Œå¹¶ä¸”åˆ é™¤å†…éƒ¨æ–‡ä»¶1File.delete([save=True]) åœ¨é¡µé¢å±•ç¤ºä¸­ï¼ŒImageFileè‡ªå¸¦çš„æ¸…é™¤å‹¾é€‰æ¡†å‹¾é€‰ååªæ˜¯æ¸…é™¤äº†æ•°æ®åº“ä¸­è¿™å…·å­—æ®µçš„å€¼ï¼Œå¹¶ä¸ä¼šåˆ é™¤æ–‡ä»¶ç³»ç»Ÿé‡Œå¯¹åº”çš„æ–‡ä»¶ï¼Œè€ŒFile.delete()ä¼šåˆ é™¤æ–‡ä»¶ç³»ç»Ÿé‡Œçš„æ–‡ä»¶ æ–‡ä»¶å‚¨å­˜APIDefaultStorageFileSystemStorageStorage ç®¡ç†æ–‡ä»¶123456from django.db import models class Car(models.Model): name = models.CharField(max_length=255) price = models.DecimalField(max_digits=5, decimal_places=2) photo = models.ImageField(upload_to='cars') photoæœ‰ä»¥ä¸‹æ–¹æ³•photo.pathç›¸å¯¹è·¯å¾„photo.urlç»å¯¹è·¯å¾„ å®é™…æµ‹è¯•æœ‰å‡ºå…¥1234567891011# å®˜æ–¹ç¤ºä¾‹&gt;&gt;&gt; car.photo.path'/media/cars/chevy.jpg'&gt;&gt;&gt; car.photo.url'http://media.example.com/cars/chevy.jpg'# å®é™…æµ‹è¯•ç»“æœ&gt;&gt;&gt; car.photo.path'E:\workspace\parking\parking\upload\20151230171832_0.jpg'&gt;&gt;&gt; car.photo.url'/upload/20151230171832_0.jpg' æ›´æ”¹ä¸€ä¸ªæ–‡ä»¶çš„å­˜å‚¨ä½ç½®123456789101112&gt;&gt;&gt; import os&gt;&gt;&gt; from django.conf import settings&gt;&gt;&gt; initial_path = car.photo.path&gt;&gt;&gt; car.photo.name = 'cars/chevy_ii.jpg'&gt;&gt;&gt; new_path = settings.MEDIA_ROOT + car.photo.name&gt;&gt;&gt; # Move the file on the filesystem&gt;&gt;&gt; os.rename(initial_path, new_path)&gt;&gt;&gt; car.save()&gt;&gt;&gt; car.photo.path'/media/cars/chevy_ii.jpg'&gt;&gt;&gt; car.photo.path == new_pathTrue ç¼–å†™è‡ªå®šä¹‰å­˜å‚¨ç³»ç»Ÿ å¿…é¡»æ˜¯django.core.files.storage.Storageçš„å­ç±» Djangoå¿…é¡»èƒ½å¤Ÿä¸å¸¦ä»»ä½•å‚æ•°æ¥å®ä¾‹åŒ– å¿…é¡»å®ç° _open() å’Œ _save()æ–¹æ³•ï¼Œä»¥åŠä»»ä½•é€‚åˆäºä½ çš„å‚¨å­˜ç±»çš„å…¶å®ƒæ–¹æ³• ä½ çš„å‚¨å­˜ç±»å¿…é¡»æ˜¯ å¯ä»¥ææ„çš„ï¼Œæ‰€ä»¥å®ƒåœ¨è¿ç§»ä¸­çš„ä¸€ä¸ªå­—æ®µä¸Šä½¿ç”¨çš„æ—¶å€™å¯ä»¥è¢«åºåˆ—åŒ–ã€‚åªè¦ä½ çš„å­—æ®µæ‹¥æœ‰è‡ªå·±å¯ä»¥åºåˆ—åŒ–çš„å‚æ•°ï¼Œä½ å°±å¯ä»¥ä¸ºå®ƒä½¿ç”¨django.utils.deconstruct.deconstructibleç±»è£…é¥°å™¨ï¼ˆè¿™ä¹Ÿæ˜¯Djangoç”¨åœ¨FileSystemStorageä¸Šçš„ä¸œè¥¿ï¼‰ åŸºäºç±»çš„è§†å›¾åŸºäºç±»çš„å†…å»ºé€šç”¨è§†å›¾ListViewç±»è§†å›¾ä¸­ï¼Œé»˜è®¤çš„å¯¹è±¡åˆ—è¡¨åé™¤äº†object_listï¼Œè¿˜æœ‰ä¸€ä¸ª&lt;model_name&gt;_list ä½¿ç”¨åŸºäºç±»çš„è§†å›¾å¤„ç†è¡¨å•å¦‚æœå¯¹åº”æ¨¡å‹å­˜åœ¨get_absolute_urlæ–¹æ³•çš„å‰æä¸‹CreateViewå’ŒUpdateViewç±»è§†å›¾çš„success_urlé»˜è®¤ä½¿ç”¨get_absolute_url å¦‚ä½•å®šä¹‰form_classï¼Œå³ä½¿form_classæ˜¯ModelFormä¹Ÿè¿˜æ˜¯éœ€è¦æŒ‡å®šæ¨¡å‹ å¦‚æœæ²¡æœ‰å®šä¹‰form_classï¼Œåˆ™å¿…é¡»å®šä¹‰fieldsï¼Œfieldså’Œform_classä¸èƒ½åŒæ—¶å­˜åœ¨ å¦‚æœæ¨¡å‹æŸä¸ªå­—æ®µå­˜çš„æ˜¯æ¨¡æ¿è·¯å¾„ï¼Œå¹¶ä¸”æƒ³é€šè¿‡æ­¤å­—æ®µæ¥åŠ¨æ€çš„æ§åˆ¶è¡¨å•é¡µçš„æ¨¡æ¿ï¼Œå¯é€šè¿‡template_name_fieldæ¥æŒ‡å®šæ­¤å­—æ®µã€‚ MixinåŸºäºç±»çš„è§†å›¾çš„MixinContextMixinæ‰€æœ‰åŸºäºç±»çš„é€šç”¨è§†å›¾çš„è¿™ä¸ªæ¨¡æ¿Context éƒ½åŒ…å«ä¸€ä¸ªview å˜é‡æŒ‡å‘è§†å›¾å®ä¾‹ã€‚ Use alters_data where appropriateæ³¨æ„ï¼Œå°†è§†å›¾å®ä¾‹åŒ…å«åœ¨æ¨¡æ¿Context ä¸­å¯èƒ½å°†æœ‰æ½œåœ¨å±é™©çš„æ–¹æ³•æš´éœ²ç»™æ¨¡æ¿ä½œè€…ã€‚ä¸ºäº†é¿å…åœ¨æ¨¡æ¿ä¸­è¢«è°ƒç”¨ç±»ä¼¼è¿™æ ·çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨è¿™äº›æ–¹æ³•ä¸Šè®¾ç½®alters_data=Trueã€‚æ›´å¤šä¿¡æ¯ï¼Œå‚è§æ¸²æŸ“æ¨¡æ¿Context çš„æ–‡æ¡£ã€‚å¾ˆæ˜¾ç„¶ï¼Œè°ƒç”¨æŸäº›å˜é‡ä¼šå¸¦æ¥å‰¯ä½œç”¨ï¼Œå…è®¸æ¨¡æ¿ç³»ç»Ÿè®¿é—®å®ƒä»¬å°†æ˜¯æ„šè ¢çš„è¿˜ä¼šå¸¦æ¥å®‰å…¨æ¼æ´ã€‚ æ¯ä¸ªDjango æ¨¡å‹å¯¹è±¡çš„delete() æ–¹æ³•å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚æ¨¡æ¿ç³»ç»Ÿä¸åº”è¯¥å…è®¸ä¸‹é¢çš„è¡Œä¸ºï¼š I will now delete this valuable data. è®¾ç½®å¯è°ƒç”¨å˜é‡çš„alters_data å±æ€§å¯ä»¥é¿å…è¿™ç‚¹ã€‚å¦‚æœå˜é‡è®¾ç½®alters_data=True ï¼Œæ¨¡æ¿ç³»ç»Ÿå°†ä¸ä¼šè°ƒç”¨å®ƒï¼Œè€Œä¼šæ— æ¡ä»¶ä½¿ç”¨string_if_invalid æ›¿æ¢è¿™ä¸ªå˜é‡ã€‚Django æ¨¡å‹å¯¹è±¡è‡ªåŠ¨ç”Ÿæˆçš„delete() å’Œsave() æ–¹æ³•è‡ªåŠ¨ è®¾ç½®alters_data=Trueã€‚ ä¾‹å¦‚ï¼š123def sensitive_function(self): self.database_record.delete() sensitive_function.alters_data = True æœ‰æ—¶å€™ï¼Œå¤„äºæŸäº›åŸå› ä½ å¯èƒ½æƒ³å…³é—­è¿™ä¸ªåŠŸèƒ½ï¼Œå¹¶å‘Šè¯‰æ¨¡æ¿ç³»ç»Ÿæ— è®ºä»€ä¹ˆæƒ…å†µä¸‹éƒ½ä¸è¦è°ƒç”¨å˜é‡ã€‚è®¾ç½®å¯è°ƒç”¨å¯¹è±¡çš„do_not_call_in_templates å±æ€§çš„å€¼ä¸ºTrue å¯ä»¥å®ç°è¿™ç‚¹ã€‚æ¨¡æ¿ç³»ç»Ÿçš„è¡Œä¸ºå°†ç±»ä¼¼è¿™ä¸ªå˜é‡æ˜¯ä¸å¯è°ƒç”¨çš„ï¼ˆä¾‹å¦‚ï¼Œä½ å¯ä»¥è®¿é—®å¯è°ƒç”¨å¯¹è±¡çš„å±æ€§ï¼‰ã€‚query_pk_and_slugå¦‚æœä¸ºTrue,get_object()å°†ä½¿ç”¨ä¸¤è€…ä¸€èµ·æ¥æŸ¥æ‰¾ã€‚å¯ä»¥é˜²æ­¢åªä½¿ç”¨pkæ—¶ï¼Œå¦‚æœpkè¿ç»­ï¼Œç›´æ¥è¢«æ”»å‡»è€…éƒ½éå†pkè·å–æ•´ä¸ªåˆ—è¡¨ å†…å»ºåŸºäºç±»çš„è§†å›¾çš„API123urlpatterns = [ url(r'^view/$', MyView.as_view(size=42)),] è§†å›¾å‚æ•°çš„çº¿ç¨‹å®‰å…¨æ€§ä¼ é€’ç»™è§†å›¾çš„å‚æ•°åœ¨è§†å›¾çš„æ¯ä¸ªå®ä¾‹ä¹‹é—´å…±äº«ã€‚è¿™è¡¨ç¤ºä¸åº”è¯¥ä½¿ç”¨åˆ—è¡¨ã€å­—å…¸æˆ–å…¶å®ƒå¯å˜å¯¹è±¡ä½œä¸ºè§†å›¾çš„å‚æ•°ã€‚å¦‚æœä½ çœŸè¿™ä¹ˆåšè€Œä¸”å¯¹å…±äº«çš„å¯¹è±¡åšè¿‡ä¿®æ”¹ï¼ŒæŸä¸ªç”¨æˆ·çš„è¡Œä¸ºå¯èƒ½å¯¹åé¢è®¿é—®åŒä¸€ä¸ªè§†å›¾çš„ç”¨æˆ·äº§ç”Ÿå½±å“ã€‚ åŸºäºç±»çš„é€šç”¨è§†å›¾ â€”â€” ç´¢å¼•ä½¿ç”¨Djangoè¾“å‡ºCSV12345678910111213import csvfrom django.http import HttpResponse def some_view(request): # Create the HttpResponse object with the appropriate CSV header. response = HttpResponse(content_type='text/csv') response['Content-Disposition'] = 'attachment; filename="somefilename.csv"' writer = csv.writer(response) writer.writerow(['First row', 'Foo', 'Bar', 'Baz']) writer.writerow(['Second row', 'A', 'B', 'C', '"Testing"', "Here's a quote"]) return response ä½¿ç”¨Djangoè¾“å‡ºPDF12345678910111213141516171819from reportlab.pdfgen import canvasfrom django.http import HttpResponse def some_view(request): # Create the HttpResponse object with the appropriate PDF headers. response = HttpResponse(content_type='application/pdf') response['Content-Disposition'] = 'attachment; filename="somefilename.pdf"' # Create the PDF object, using the response object as its "file." p = canvas.Canvas(response) # Draw things on the PDF. Here's where the PDF generation happens. # See the ReportLab documentation for the full list of functionality. p.drawString(100, 100, "Hello world.") # Close the PDF object cleanly, and we're done. p.showPage() p.save() return response ä¸­é—´ä»¶ä¸­é—´ä»¶çš„é¡ºåºå¾ˆé‡è¦æ¥å—è¯·æ±‚æ—¶ï¼Œè‡ªä¸Šå‘ä¸‹è°ƒç”¨ä¸­é—´ä»¶è¿”å›å“åº”æ—¶ï¼Œè‡ªä¸‹å‘ä¸Šè°ƒç”¨ä¸­é—´ä»¶process_request(request)åœ¨djangoå†³å®šæ‰§è¡Œå“ªä¸ªè§†å›¾ä¹‹å‰ï¼ˆä¹Ÿå°±æ˜¯è§£æurlä¹‹å‰ï¼‰è¢«è°ƒç”¨è¿”å›Noneç»§ç»­å¤„ç†è¯·æ±‚è¿”å›HttpResponseä¸å†å»è°ƒç”¨å…¶å®ƒçš„requestã€view æˆ–exception ä¸­é—´ä»¶ï¼Œæˆ–å¯¹åº”çš„è§†å›¾ï¼Œç›´æ¥è°ƒç”¨å“åº”é˜¶æ®µçš„ä¸­é—´ä»¶ï¼Œå¹¶è¿”å›ç»“æœ process_view(request, view_func, view_args, view_kwargs)æ³¨ï¼šview_argså’Œview_kwargséƒ½ä¸åŒ…å«requeståœ¨djangoè°ƒç”¨è§†å›¾ä¹‹å‰è¢«è°ƒç”¨è¿”å›Noneç»§ç»­å¤„ç†è¯·æ±‚è¿”å›HttpResponseä¸å†å»è°ƒç”¨å…¶å®ƒçš„view æˆ–exception ä¸­é—´ä»¶ï¼Œæˆ–å¯¹åº”çš„è§†å›¾ï¼Œç›´æ¥è°ƒç”¨å“åº”é˜¶æ®µçš„ä¸­é—´ä»¶ï¼Œå¹¶è¿”å›ç»“æœ æ³¨æ„åœ¨ä¸­é—´ä»¶å†…éƒ¨ï¼Œä»process_request æˆ–process_view ä¸­è®¿é—®request.POST æˆ–request.REQUEST å°†é˜»ç¢è¯¥ä¸­é—´ä»¶ä¹‹åçš„æ‰€æœ‰è§†å›¾æ— æ³•ä¿®æ”¹è¯·æ±‚çš„ä¸Šä¼ å¤„ç†ç¨‹åºï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¦é¿å…è¿™æ ·ä½¿ç”¨ã€‚ç±»CsrfViewMiddlewareå¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸ªä¾‹å¤–ï¼Œå› ä¸ºå®ƒæä¾›csrf_exempt() å’Œcsrf_protect()ä¸¤ä¸ªè£…é¥°å™¨ï¼Œå…è®¸è§†å›¾æ˜¾å¼æ§åˆ¶åœ¨å“ªä¸ªç‚¹éœ€è¦å¼€å¯CSRFéªŒè¯ã€‚ process_template_response(request, response)åœ¨è§†å›¾åˆšå¥½æ‰§è¡Œå®Œæ¯•ä¹‹åè¢«è°ƒç”¨å¿…é¡»è¿”å›ä¸€ä¸ªå®ç°äº†renderæ–¹æ³•çš„å“åº”å¯¹è±¡ process_response(request, response)åœ¨æ‰€æœ‰å“åº”è¿”å›æµè§ˆå™¨ä¹‹å‰è¢«è°ƒç”¨å¿…é¡»è¿”å›HttpResponseæˆ–è€…StreamingHttpResponseå¯¹è±¡å¤„ç†æµå¼å“åº” process_exception(request, exception)åœ¨è§†å›¾æŠ›å‡ºå¼‚å¸¸æ—¶è¢«è°ƒç”¨è¿”å›Noneè¿”å›HttpResponse process_template_responseå’Œå“åº”ä¸­é—´ä»¶ä¼šè¢«è°ƒç”¨åœ¨å¤„ç†å“åº”æœŸé—´ï¼Œä¸­é—´ä»¶çš„æ‰§è¡Œé¡ºåºæ˜¯å€’åºæ‰§è¡Œçš„ï¼Œè¿™åŒ…æ‹¬process_exceptionï¼Œå¦‚æœä¸€ä¸ªä¸­é—´ä»¶çš„process_exceptionè¿”å›äº†ä¸€ä¸ªå“åº”ï¼Œé‚£ä¹ˆè¿™ä¸ªä¸­é—´ä»¶ä¸Šé¢çš„ä¸­é—´ä»¶ä¸­çš„process_exceptionéƒ½ä¸ä¼šè¢«è°ƒç”¨ __init__()å¤§å¤šæ•°ä¸­é—´ä»¶ç±»éƒ½ä¸éœ€è¦åˆå§‹åŒ–æ–¹æ³•djangoåˆå§‹åŒ–ä¸­é—´ä»¶æ— éœ€ä»»ä½•å‚æ•°ï¼Œæ‰€ä»¥ä¸èƒ½å®šä¹‰ä¸€ä¸ªæœ‰å‚æ•°çš„__init__æ–¹æ³•initä¸ä¼šæ¯æ¬¡è¯·æ±‚éƒ½æ‰§è¡Œï¼Œåªåœ¨WebæœåŠ¡å™¨å“åº”ç¬¬ä¸€ä¸ªè¯·æ±‚æ—¶æ‰§è¡Œ æ ‡è®°ä¸­é—´ä»¶ä¸è¢«ä½¿ç”¨initæŠ›å‡ºdjango.core.exceptions.MiddlewareNotUsed`å¼‚å¸¸ï¼Œdjangoä¼šä»ä¸­é—´ä»¶å¤„ç†è¿‡ç¨‹ä¸­ç§»åŠ¨è¿™éƒ¨åˆ†ä¸­é—´ä»¶ï¼Œå¹¶ä¸”å½“DEBUGä¸ºTrueçš„æ—¶å€™åœ¨django.requestè®°å½•å™¨ä¸­è®°å½•è°ƒè¯•ä¿¡æ¯ã€‚ ä¸­é—´ä»¶ç±»ä¸èƒ½æ˜¯ä»»ä½•ç±»çš„å­ç±» ä¸­é—´ä»¶å¯ä»¥æ”¾åœ¨pythonè·¯å¾„ä¸­çš„ä»»åŠ¡ä½ç½®æ­£å¸¸123456789101112131415161718192021A.initB.initC.initD.initA.process_requestB.process_requestC.process_requestD.process_requestA.process_viewB.process_viewC.process_viewD.process_view D.process_template_responseC.process_template_responseB.process_template_responseA.process_template_responseD.process_responstC.process_responstB.process_responstA.process_responst è§†å›¾å¼‚å¸¸1234567891011121314151617A.initB.initC.initD.initA.process_requestB.process_requestC.process_requestD.process_requestA.process_viewB.process_viewC.process_viewD.process_viewD.process_responstC.process_responstB.process_responstA.process_responst djangoä¸­å¯ç”¨çš„ä¸­é—´ä»¶class CommonMiddlewareDISALLOWED_USER_AGENTSç¦ç”¨åŒ¹é…çš„user-agentsè®¿é—®ç½‘ç«™APPEND_SLASHå¦‚æœurlç»“å°¾æ²¡æœ‰æ–œæ ç»“å°¾ï¼Œå¹¶ä¸”æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„urlï¼Œdjangoä¼šåœ¨ç»“å°¾åŠ ä¸Šæ–œæ å†åŒ¹é…ä¸€æ¬¡PREPEND_WWWå¦‚æœurlä¼šé‡å®šå‘åˆ°wwwåˆ°å¤´çš„ç½‘å€USE_ETAGSè®¾ç½®æ¥å¤„ç†ETagã€‚å¦‚æœè®¾ç½®USE_ETAGSä¸ºTrueï¼ŒDjangoä¼šé€šè¿‡MD5-hashingå¤„ç†é¡µé¢çš„å†…å®¹æ¥ä¸ºæ¯ä¸€ä¸ªé¡µé¢è¯·æ±‚è®¡ç®—Etagï¼Œå¹¶ä¸”å¦‚æœåˆé€‚çš„è¯ï¼Œå®ƒå°†ä¼šå‘é€æºå¸¦Not Modifiedçš„å“åº”ã€‚ class BrokenLinkEmailsMiddlewareå‘MANAGERS å‘é€æ­»é“¾æé†’é‚®ä»¶ class GZipMiddlewareä¸ºæ”¯æŒGZipå‹ç¼©çš„æµè§ˆå™¨å‹ç¼©å†…å®¹å»ºè®®æ”¾åœ¨ä¸­é—´ä»¶é…ç½®åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå¯é€šè¿‡gzip_page()è£…é¥°å™¨ä½¿ç”¨ç‹¬ç«‹çš„GZipå‹ç¼© class ConditionalGetMiddlewareclass LocaleMiddewareåŸºäºè¯·æ±‚ä¸­çš„æ•°æ®å¼€å¯è¯­è¨€é€‰æ‹©ï¼Œå®ƒå¯ä»¥ä¸ºæ¯ä¸ªç”¨æˆ·è¿›è¡Œå®šåˆ¶ã€‚ class MessageMiddlewareå¼€å¯åŸºäºCookieå’Œä¼šè¯çš„æ¶ˆæ¯æ”¯æŒ class SecurityMiddlewareä¸­é—´ä»¶çš„æ’åº æ¨¡ç‰ˆDjangoTemplateså¼•æ“OPTIONSé…ç½®é¡¹ä¸­æ¥å—ä»¥ä¸‹å‚æ•°string_if_invalidå½“æ¨¡ç‰ˆå˜é‡æ— æ•ˆæ—¶ï¼Œä½¿ç”¨æ­¤å€¼ä»£æ›¿å¯ä½¿ç”¨commentå’Œendcommentè¿›è¡Œå¤šè¡Œæ³¨é‡Š Djangoæ¨¡ç‰ˆè¯­è¨€å½“æ¨¡ç‰ˆç³»ç»Ÿé‡åˆ°.æ—¶ï¼ŒæŒ‰ä¸‹é¢é¡ºåºæŸ¥è¯¢ä»æŠ€æœ¯ä¸Šæ¥è¯´ï¼Œå½“æ¨¡ç‰ˆç³»ç»Ÿé‡åˆ°ç‚¹(â€œ.â€)ï¼Œå®ƒå°†ä»¥è¿™æ ·çš„é¡ºåºæŸ¥è¯¢ï¼š å­—å…¸æŸ¥è¯¢ï¼ˆDictionary lookupï¼‰ å±æ€§æˆ–æ–¹æ³•æŸ¥è¯¢ï¼ˆAttribute or method lookupï¼‰ æ•°å­—ç´¢å¼•æŸ¥è¯¢ï¼ˆNumeric index lookupï¼‰ æ¨¡ç‰ˆå˜é‡æœ€ç»ˆè§£é‡Šæˆå­—é¢é‡ï¼Œè€Œä¸æ˜¯å˜é‡å€¼ loadå¯æ¥å—å¤šä¸ªåº“åç§°load humanize i18nloadä¸æ”¯æŒç»§æ‰¿ å†…ç½®æ ‡ç­¾ä¸è¿‡æ»¤å™¨æ ‡ç­¾filterå¯¹ä¸€æ®µå†…å®¹è¿›è¡Œè¿‡æ»¤ï¼Œä½¿ç”¨|å¯¹å¤šä¸ªè¿‡æ»¤å™¨è¿›è¡Œè¿æ¥ï¼Œä¸”è¿‡æ»¤å™¨å¯ä»¥æœ‰å‚æ•°æ¯”å¦‚ä¸€æ®µçº¯æ–‡æœ¬ä¸èƒ½ä½¿ç”¨ä¹‹å‰è¯´çš„è¿‡æ»¤å™¨å†™æ³•ï¼Œåˆ™å¯ä»¥ä½¿ç”¨filterfirstofè¾“å‡ºç¬¬ä¸€ä¸ªä¸ä¸ºFalseçš„å‚æ•°1&#123;% firstof var1 var2|safe var3 &quot;&lt;strong&gt;fallback value&lt;/strong&gt;&quot;|safe %&#125; ifchangedæ£€æŸ¥å¾ªç¯ä¸­çš„ä¸€ä¸ªå€¼ä»æœ€è¿‘ä¸€æ¬¡é‡å¤å…¶æ˜¯å¦æ”¹å˜ï¼Œæ”¯æŒ`else withå¯å¾€includeçš„æ¨¡ç‰ˆé‡Œä¼ ä¸Šä¸‹æ–‡ä»¶å˜é‡1&#123;% include &quot;name_snippet.html&quot; with person=&quot;Jane&quot; greeting=&quot;Hello&quot; %&#125; 1&#123;% include &quot;name_snippet.html&quot; with greeting=&quot;Hi&quot; only %&#125; 1&#123;% lorem %&#125; è®¾è®¡äººå‘˜å·¥å…·ï¼Œå¥½åƒæ˜¯ç”Ÿæˆéšæœºå•è¯å’Œæ®µè½123&#123;% lorem %&#125;&#123;% lorem 3 p %&#125;&#123;% lorem 10 w random %&#125; äººæ€§åŒ–apnumberè½¬æ¢æ•´æ•°æˆ–æ•´æ•°çš„å­—ç¬¦ä¸²å½¢å¼ä¸ºè‹±æ–‡æè¿°1 ä¼šå˜æˆoneintcommaè½¬æ¢æˆç¬¬ä¸‰ä½å¸¦ä¸€ä¸ªé€—å·4500 ä¼šå˜æˆ 4,500intwordå°†å¤§çš„æ•´æ•°è½¬æ¢ä¸ºå‹å¥½çš„æ–‡å­—è¡¨ç¤º1000000 ä¼šå˜æˆ 1.0 millionnaturaldayå¯¹äºå½“å¤©æˆ–è€…ä¸€å¤©ä¹‹å†…çš„æ—¥æœŸï¼Œ è¿”å›â€œä»Šå¤©â€ï¼Œâ€œæ˜å¤©â€æˆ–è€…â€œæ˜¨å¤©â€ï¼Œè§†æƒ…å†µè€Œå®šã€‚å¦åˆ™ï¼Œä½¿ç”¨ä¼ è¿›æ¥çš„æ ¼å¼å­—ç¬¦ä¸²ç»™æ—¥æœŸæ ¼å¼åŒ–naturaltimeå¯¹äºæ—¥æœŸæ—¶é—´çš„å€¼ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æ¥è¡¨ç¤ºå¤šå°‘ç§’ã€åˆ†é’Ÿæˆ–è€…å°æ—¶ä¹‹å‰ä¾‹å¦‚ï¼ˆå…¶ä¸­â€œç°åœ¨â€æ˜¯2007å¹´2æœˆ17æ—¥16æ—¶30åˆ†0ç§’ï¼‰ï¼š17 Feb 2007 16:30:00 ä¼šå˜æˆ now17 Feb 2007 16:29:31 ä¼šå˜æˆ 29 seconds agoordinalå°†ä¸€ä¸ªæ•´æ•°æˆ–æ˜¯æ•´æ•°çš„å­—ç¬¦ä¸²ï¼Œè½¬æ¢ä¸ºå®ƒçš„åºæ•°è¯1 ä¼šå˜æˆ 1st2 ä¼šå˜æˆ 2nd3 ä¼šå˜æˆ 3rd Django æ¨¡æ¿è¯­è¨€ï¼šé¢å‘Pythonç¨‹åºå‘˜string_if_invalidå»ºè®®åªåœ¨è°ƒè¯•æ—¶è®¾ç½®ï¼Œè°ƒè¯•å®Œæˆåå°±å…³é—­ï¼Œå¼€å‘æ—¶æœ€å¥½ä¸è¦ä½¿ç”¨ï¼Œä¸ç„¶å¯èƒ½ä¼šé‡åˆ°æ¸²æŸ“é—®é¢˜ æ¯ä¸ªä¸Šä¸‹æ–‡éƒ½åŒ…å«True False None [ä½¿ç”¨Contextå¯¹è±¡]è¿™é‡Œæ¯”è¾ƒéš¾ç†è§£1234Context.get(key, otherwise=None)Context.pop()Context.push()Context.update(other_dict) ä¸Šä¸‹æ–‡å¤„ç†å™¨åº”ç”¨çš„æ—¶æœºä¸Šä¸‹æ–‡å¤„ç†å™¨åº”ç”¨åœ¨ä¸Šä¸‹æ–‡æ•°æ®çš„é¡¶ç«¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šä¸‹æ–‡å¤„ç†å™¨å¯èƒ½è¦†ç›–ä½ æä¾›ç»™Context æˆ–RequestContext çš„å˜é‡ï¼Œæ‰€ä»¥è¦æ³¨æ„é¿å…ä¸ä¸Šä¸‹æ–‡å¤„ç†å™¨æä¾›çš„å˜é‡åé‡å¤ã€‚å¦‚æœæƒ³è¦ä¸Šä¸‹æ–‡æ•°æ®çš„ä¼˜å…ˆçº§é«˜äºä¸Šä¸‹æ–‡å¤„ç†å™¨ï¼Œä½¿ç”¨ä¸‹é¢çš„æ¨¡å¼ï¼š123from django.template import RequestContextrequest_context = RequestContext(request)request_context.push(&#123;"my_name": "Adrian"&#125;) Django é€šè¿‡è¿™ç§æ–¹å¼å…è®¸ä¸Šä¸‹æ–‡æ•°æ®åœ¨render() å’Œ TemplateResponse ç­‰API ä¸­è¦†ç›–ä¸Šä¸‹æ–‡å¤„ç†å™¨ã€‚ä½ è¿˜å¯ä»¥èµ‹äºˆRequestContextä¸€ä¸ªé¢å¤–çš„å¤„ç†å™¨åˆ—è¡¨ï¼Œä½¿ç”¨ç¬¬ä¸‰ä¸ªå¯é€‰çš„ä½ç½®å‚æ•°processorsã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼ŒRequestContext å®ä¾‹è·å¾—ä¸€ä¸ªip_address å˜é‡123456def some_view(request): # ... c = RequestContext(request, &#123; 'foo': 'bar', &#125;, ['ip_address':'127.0.0.1']) return HttpResponse(t.render(c)) ä¸Šé¢ä¾‹å­ä¸­ip_addressä¹Ÿä¼šåŠ å…¥åˆ°ä¸Šä¸‹æ–‡ä¸­ å†…å»ºçš„æ¨¡æ¿ä¸Šä¸‹æ–‡å¤„ç†å™¨ä¸‹é¢æ˜¯å†…å¥¸çš„ä¸Šä¸‹æ–‡å¤„ç†å™¨æ‰€æ·»åŠ çš„å†…å®¹django.contrib.auth.context_processors.auth user perms django.template.context_processors.debug debug sql_queryesä¸€ä¸ª{â€˜sqlâ€™: â€¦, â€˜timeâ€™: â€¦} å­—å…¸çš„åˆ—è¡¨ï¼Œè¡¨ç¤ºè¯·æ±‚æœŸé—´åˆ°ç›®å‰ä¸ºæ­¢å‘ç”Ÿçš„æ¯ä¸ªSQL æŸ¥è¯¢åŠèŠ±è´¹çš„æ—¶é—´ã€‚è¿™ä¸ªåˆ—è¡¨æŒ‰æŸ¥è¯¢çš„é¡ºåºæ’åºï¼Œå¹¶ç›´åˆ°è®¿é—®æ—¶æ‰ç”Ÿæˆã€‚ django.template.context_processors.i18n MEDIA_URL django.template.context_processors.static STATIC_URL django.template.context_processors.csrf csrf_token django.template.context_processors.request request django.contrib.messages.context_processors.messages messages DEFAULT_MESSAGE_LEVELS è‡ªå®šä¹‰æ¨¡æ¿æ ‡ç­¾å’Œè¿‡æ»¤å™¨è‡ªå®šä¹‰è¿‡æ»¤å™¨12345678910111213from django import templateregister = template.Library()@register.filter(name='cut') register.filter('cut', cut)register.filter('lower', lower)# ordef cut(value, arg): return value.replace(arg, '') @register.filterdef lower(value): return value.lower() å¯ä½¿ç”¨SafeDataæ¥éªŒè¯æ˜¯å¦æ˜¯å®‰å…¨æ•°æ®123if isinstance(value, SafeData): # Do something with the "safe" string. ... æˆ–ä½¿ç”¨is_safeæ¥æ§åˆ¶åªæ¥æ”¶çš„å®‰å…¨çš„æ•°æ®123@register.filter(is_safe=True)def myfilter(value): return value è‡ªå®šä¹‰æ ‡ç­¾12345678import datetimefrom django import template register = template.Library() @register.simple_tagdef current_time(format_string): return datetime.datetime.now().strftime(format_string) 1&#123;% show_results poll %&#125; å†™ä¸€ä¸ªæ ‡ç­¾ï¼Œå®ç°ä¸‹é¢çš„æ•ˆæœ12345&lt;ul&gt; &lt;li&gt;First choice&lt;/li&gt; &lt;li&gt;Second choice&lt;/li&gt; &lt;li&gt;Third choice&lt;/li&gt;&lt;/ul&gt; ä¾‹å­1å¼€å§‹1234@register.inclusion_tag('results.html')def show_results(poll): choices = poll.choice_set.all() return &#123;'choices': choices&#125; results.html12345&lt;ul&gt;&#123;% for choice in choices %&#125; &lt;li&gt; &#123;&#123; choice &#125;&#125; &lt;/li&gt;&#123;% endfor %&#125;&lt;/ul&gt; ä¾‹å­1ç»“æŸ å¯ä½¿ç”¨takes_context=Trueç›´æ¥è®¿é—®ä¸Šä¸‹æ–‡ä»¶ä¸­çš„æ•°æ®1234567@register.inclusion_tag('link.html', takes_context=True)def jump_link(context): # å› ä¸ºtakes_context=Trueæ‰€ä»¥è¿™é‡Œçš„contextå°±æ˜¯ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥ä»é‡Œé¢æ‹¿æƒ³è¦çš„æ•°æ®ï¼Œå¦‚æœæœ‰å¤šä¸ªå‚æ•°ï¼Œæ–¹æ³•é‡Œçš„ç¬¬ä¸€ä¸ªå‚æ•°åå¿…é¡»æ˜¯context return &#123; 'link': context['home_link'], 'title': context['home_title'], &#125; link.html1&lt;a href="&#123;&#123; link &#125;&#125;"&gt;&#123;&#123; title &#125;&#125;&lt;/a&gt;. é¡µé¢ç›´æ¥å†™1&#123;% jump_link %&#125; ä½ç½®å‚æ•°å’Œå…³é”®å­—å‚æ•°å’Œpythonè¯­æ³•ä¸€æ ·123456@register.inclusion_tag('my_template.html')def my_tag(a, b, *args, **kwargs): warning = kwargs['warning'] profile = kwargs['profile'] ... return ... 1&#123;% my_tag 123 "abcd" book.title warning=message|lower profile=user.profile %&#125; è¿˜æœ‰ä¸€ä¸ªregister.assignment_tagä¸register.simple_tagåŠŸèƒ½ä¸€æ ·ï¼Œä¸çŸ¥é“æœ‰ä»€ä¹ˆç‰¹æ®Šä½œç”¨ ä½¿ç”¨è¡¨å•ä¸€äº›è¡¨å•è¾“å…¥è‡ªå¸¦æœ‰html5çš„éªŒè¯ï¼Œè¦ç¦ç”¨è¿™äº›éªŒè¯å¯ä»¥è®¾ç½®formæ ‡ç­¾çš„novalidateå±æ€§ is_boundå¯ä»¥åˆ¤æ–­ä¸€ä¸ªè¡¨å•æ˜¯å¦å…·æœ‰ç»‘å®šæ•°æ®12345678# æœªç»‘å®šè¡¨å•f = ContactForm()data = &#123;'subject': 'hello', 'message': 'Hi there', 'sender': 'foo@example.com', 'cc_myself': True&#125;# å·²ç»‘å®šçš„è¡¨å•f = ContactForm(data) å½“è¡¨å•é€šè¿‡is_valid()æ–¹æ³•éªŒè¯åï¼Œå¯ä»¥ç›´æ¥åœ¨form.cleaned_dataä¸­æ‹¿å€¼ï¼Œå¹¶ä¸”æ˜¯å·²ç»è½¬æ¢å¥½çš„pythonæ ¼å¼çš„æ•°æ®ï¼Œä½†ä»ç„¶å¯ä»¥ä»request.POSTç›´æ¥è®¿é—®åˆ°æœªéªŒè¯çš„æ•°æ®ã€‚ è¡¨å•æ’åˆ— è¡¨å•å±æ€§å­—æ®µhtmlæ ‡ç­¾å­—æ®µçš„lablehtmlæ ‡ç­¾å­—æ®µlableæ ‡ç­¾ä¸Šçš„forå€¼ï¼Œä¹Ÿæ˜¯å­—æ®µæ ‡ç­¾ä¸Šçš„id éšè—å­—æ®µåˆ—è¡¨æ˜¾ç¤ºçš„å­—æ®µåˆ—è¡¨ é”™è¯¯ä¿¡æ¯ä¸æ˜¯ç‰¹å®šå­—æ®µçš„é”™è¯¯å…¨éƒ¨é”™è¯¯ï¼Œä¸€ä¸ªå­—å…¸å­—æ®µé”™è¯¯ å¯ä»formä»éå†å‡ºfieldæœ‰ä»¥ä¸‹å±æ€§`Modelæˆ–æ˜¯Formä¸Šçš„labelçš„å€¼æ•´ä¸ªlabelæ ‡ç­¾ï¼ŒåŒ…å«å†’å·å­—æ®µçš„idå­—æ®µçš„å€¼å­—æ®µçš„nameï¼Œè€ƒè™‘è¡¨å•çš„å‰ç¼€å­—æ®µçš„å¸®åŠ©æ–‡æ¡£å­—æ®µçš„é”™è¯¯åˆ¤æ–­å­—æ®µæ˜¯å¦éšè—è¡¨å•ç±»ä¸­Fieldçš„å®ä¾‹ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥è®¿é—®Field`å±æ€§ï¼Œå¦‚1name.field.max_length è¡¨å• API12345678# æœªç»‘å®šè¡¨å•f = ContactForm()data = &#123;'subject': 'hello', 'message': 'Hi there', 'sender': 'foo@example.com', 'cc_myself': True&#125;# å·²ç»‘å®šçš„è¡¨å•f = ContactForm(data) è¡¨å•å®ä¾‹ä¸€ä½†åˆ›å»ºï¼Œæ•°æ®ä¸å¯æ›´æ”¹ Form.clean()Form.is_valid()Form.errors Form.errorsè®¿é—®errors å±æ€§å¯ä»¥è·å¾—é”™è¯¯ä¿¡æ¯çš„ä¸€ä¸ªå­—å…¸ï¼š12&gt;&gt;&gt; f.errors&#123;'sender': ['Enter a valid email address.'], 'subject': ['This field is required.']&#125; åœ¨è¿™ä¸ªå­—å…¸ä¸­ï¼Œé”®ä¸ºå­—æ®µçš„åç§°ï¼Œå€¼ä¸ºè¡¨ç¤ºé”™è¯¯ä¿¡æ¯çš„Unicode å­—ç¬¦ä¸²ç»„æˆçš„åˆ—è¡¨ã€‚é”™è¯¯ä¿¡æ¯ä¿å­˜åœ¨åˆ—è¡¨ä¸­æ˜¯å› ä¸ºå­—æ®µå¯èƒ½æœ‰å¤šä¸ªé”™è¯¯ä¿¡æ¯ã€‚ä½ å¯ä»¥åœ¨è°ƒç”¨is_valid() ä¹‹å‰è®¿é—®errorsã€‚è¡¨å•çš„æ•°æ®å°†åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨is_valid() æˆ–è€…è®¿é—®errors æ—¶éªŒè¯ã€‚éªŒè¯åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œæ— è®ºä½ è®¿é—®errors æˆ–è€…è°ƒç”¨is_valid() å¤šå°‘æ¬¡ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœéªŒè¯è¿‡ç¨‹æœ‰å‰¯ä½œç”¨ï¼Œè¿™äº›å‰¯ä½œç”¨å°†åªè§¦å‘ä¸€æ¬¡ã€‚ Form.errors.as_data() è¿”å›ä¸€ä¸ªå­—å…¸ï¼Œå®ƒæ˜ å°„å­—æ®µåˆ°åŸå§‹çš„ValidationError å®ä¾‹ Form.errors.as_json(escape_html=False) è¿”å›JSON åºåˆ—åŒ–åçš„é”™è¯¯ã€‚ Form.add_error(field, error) è¿™ä¸ªæ–¹æ³•å…è®¸åœ¨Form.clean() æ–¹æ³•å†…éƒ¨æˆ–ä»è¡¨å•çš„å¤–éƒ¨ä¸€èµ·ç»™å­—æ®µæ·»åŠ é”™è¯¯ä¿¡æ¯Form.add_error() ä¼šè‡ªåŠ¨åˆ é™¤cleaned_data ä¸­çš„ç›¸å…³å­—æ®µ Form.has_error(field, code=None) è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºä¸€ä¸ªå­—æ®µæ˜¯å¦å…·æœ‰æŒ‡å®šé”™è¯¯code çš„é”™è¯¯ã€‚å½“code ä¸ºNone æ—¶ï¼Œå¦‚æœå­—æ®µæœ‰ä»»ä½•é”™è¯¯å®ƒéƒ½å°†è¿”å›Trueã€‚è‹¥è¦æ£€æŸ¥éå­—æ®µé”™è¯¯ï¼Œä½¿ç”¨NON_FIELD_ERRORS ä½œä¸ºfield å‚æ•°ã€‚ Form.non_field_errors() è¿™ä¸ªæ–¹æ³•è¿”å›Form.errors ä¸­ä¸æ˜¯ä¸ç‰¹å®šå­—æ®µç›¸å…³è”çš„é”™è¯¯ã€‚å®ƒåŒ…å«åœ¨Form.clean() ä¸­å¼•å‘çš„ValidationError å’Œä½¿ç”¨Form.add_error(None, â€œâ€¦â€) æ·»åŠ çš„é”™è¯¯ã€‚ æœªç»‘å®šè¡¨å•çš„è¡Œä¸ºéªŒè¯æ²¡æœ‰ç»‘å®šæ•°æ®çš„è¡¨å•æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†è¿™ç§æƒ…å†µï¼š 12345&gt;&gt;&gt; f = ContactForm()&gt;&gt;&gt; f.is_valid()False&gt;&gt;&gt; f.errors&#123;&#125; Form.initial1&gt;&gt;&gt; f = ContactForm(initial=&#123;'subject': 'Hi there!'&#125;) è¿™äº›å€¼åªæ˜¾ç¤ºåœ¨æ²¡æœ‰ç»‘å®šçš„è¡¨å•ä¸­ï¼Œå³ä½¿æ²¡æœ‰æä¾›ç‰¹å®šå€¼å®ƒä»¬ä¹Ÿä¸ä¼šä½œä¸ºåå¤‡çš„å€¼ã€‚ä¼˜å…ˆçº§é«˜äºFormä¸­çš„initial12345678910&gt;&gt;&gt; from django import forms&gt;&gt;&gt; class CommentForm(forms.Form):... name = forms.CharField(initial='class')... url = forms.URLField()... comment = forms.CharField()&gt;&gt;&gt; f = CommentForm(initial=&#123;'name': 'instance'&#125;, auto_id=False)&gt;&gt;&gt; print(f)&lt;tr&gt;&lt;th&gt;Name:&lt;/th&gt;&lt;td&gt;&lt;input type="text" name="name" value="instance" /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;Url:&lt;/th&gt;&lt;td&gt;&lt;input type="url" name="url" /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;Comment:&lt;/th&gt;&lt;td&gt;&lt;input type="text" name="comment" /&gt;&lt;/td&gt;&lt;/tr&gt; Form.has_changed()ä¹Ÿæœ‰Field.has_changed()æ–¹æ³•æ£€æŸ¥è¡¨å•æ•°æ®æ˜¯å¦ä»åˆå§‹æ•°æ®å‘ç”Ÿæ”¹å˜å½“æäº¤è¡¨å•æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°æ„å»ºè¡¨å•å¹¶æä¾›åˆå§‹å€¼ï¼Œè¿™æ ·å¯ä»¥å®ç°æ¯”è¾ƒï¼š12&gt;&gt;&gt; f = ContactForm(request.POST, initial=data)&gt;&gt;&gt; f.has_changed() å¦‚æœrequest.POST ä¸­çš„æ•°æ®ä¸initial ä¸­çš„ä¸åŒï¼Œhas_changed() å°†ä¸ºTrueï¼Œå¦åˆ™ä¸ºFalseã€‚ è®¡ç®—çš„ç»“æœæ˜¯é€šè¿‡è°ƒç”¨è¡¨å•æ¯ä¸ªå­—æ®µçš„Field.has_changed() å¾—åˆ°çš„ã€‚ Form.fieldsä»è¡¨å•ä¸­è®¿é—®å­—æ®µæ˜¯ä¸€ä¸ªOrderedDictå¯ä½ å¯ä»¥ä¿®æ”¹è¡¨å•å®ä¾‹çš„å­—æ®µæ¥æ”¹å˜å­—æ®µåœ¨è¡¨å•ä¸­çš„è¡¨ç¤ºï¼š12345&gt;&gt;&gt; f.as_table().split('\n')[0]'&lt;tr&gt;&lt;th&gt;Name:&lt;/th&gt;&lt;td&gt;&lt;input name="name" type="text" value="instance" /&gt;&lt;/td&gt;&lt;/tr&gt;'&gt;&gt;&gt; f.fields['name'].label = "Username"&gt;&gt;&gt; f.as_table().split('\n')[0]'&lt;tr&gt;&lt;th&gt;Username:&lt;/th&gt;&lt;td&gt;&lt;input name="name" type="text" value="instance" /&gt;&lt;/td&gt;&lt;/tr&gt;' æ³¨æ„ä¸è¦æ”¹å˜base_fields å±æ€§ï¼Œå› ä¸ºä¸€æ—¦ä¿®æ”¹å°†å½±å“åŒä¸€ä¸ªPython è¿›ç¨‹ä¸­æ¥ä¸‹æ¥æ‰€æœ‰çš„ContactForm å®ä¾‹ï¼š1234&gt;&gt;&gt; f.base_fields['name'].label = "Username"&gt;&gt;&gt; another_f = CommentForm(auto_id=False)&gt;&gt;&gt; another_f.as_table().split('\n')[0]'&lt;tr&gt;&lt;th&gt;Username:&lt;/th&gt;&lt;td&gt;&lt;input name="name" type="text" value="class" /&gt;&lt;/td&gt;&lt;/tr&gt;' cleaned_data å§‹ç»ˆåª åŒ…å«è¡¨å•ä¸­å®šä¹‰çš„å­—æ®µï¼Œå³ä½¿ä½ åœ¨æ„å»ºè¡¨å• æ—¶ä¼ é€’äº†é¢å¤–çš„æ•°æ®ã€‚cleaned_data å§‹ç»ˆåª åŒ…å«è¡¨å•ä¸­å®šä¹‰çš„å­—æ®µï¼Œå³ä½¿ä½ åœ¨æ„å»ºè¡¨å• æ—¶ä¼ é€’äº†é¢å¤–çš„æ•°æ®ã€‚å½“è¡¨å•åˆæ³•æ—¶ï¼Œcleaned_data å°†åŒ…å«æ‰€æœ‰å­—æ®µçš„é”®å’Œå€¼ï¼Œå³ä½¿ä¼ é€’çš„æ•°æ®ä¸åŒ…å«æŸäº›å¯é€‰å­—æ®µçš„å€¼ã€‚ Form.cleaned_dataForm.as_pForm.as_ulForm.as_table Form.error_css_class Form.required_css_classåœ¨Formç±»ä¸‹å¯ä»¥ç”¨ä¸Šé¢ä¸¤ä¸ªå±æ€§å®šä¹‰é”™è¯¯æ ·å¼å’Œå¿…å¡«æ ·å¼ï¼Œæ²¡æœ‰é»˜è®¤å€¼ï¼Œrequired_css_classä¹Ÿä¼šå›åœ¨labelæ ‡ç­¾ä¸Š Form.auto_idæ§åˆ¶è¡¨å•ä¸Šçš„labelå’Œè¡¨å•å…ƒç´ çš„idï¼Œå€¼ä¸ºTrueï¼ŒFalseæˆ–å­—ç¬¦ä¸²ï¼Œæ”¯æŒ%så ä½ç¬¦ï¼Œè¡¨ç¤ºå½“å‰å­—æ®µå å¦‚æœauto_id è®¾ç½®ä¸ºä»»ä½•å…¶å®ƒçš„çœŸå€¼ â€”â€” ä¾‹å¦‚ä¸åŒ…å«%s çš„å­—ç¬¦ä¸² â€”â€” é‚£ä¹ˆå…¶è¡Œä¸ºå°†ç±»ä¼¼auto_id ç­‰äºTrueã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œauto_id è®¾ç½®ä¸ºâ€™id_%sâ€™ã€‚ Form.label_suffixé»˜è®¤ä¸ºè‹±æ–‡çš„: BoundField12345form = ContactForm()for boundfield in form: print(boundfield)# æˆ–from['name'] BoundField.errorsBoundField.label_tag(contents=None, attrs=None, label_suffix=None)BoundField.css_classes()BoundField.value()æä¾›åˆå§‹å€¼ï¼Œä¼šè¢«ç»‘å®šå€¼è¦†ç›–BoundField.id_for_label Form.is_multipart()å¯åˆ¤æ–­è¡¨å•æ˜¯å¦éœ€è¦multipart1234567&#123;% if form.is_multipart %&#125; &lt;form enctype="multipart/form-data" method="post" action="/foo/"&gt;&#123;% else %&#125; &lt;form method="post" action="/foo/"&gt;&#123;% endif %&#125;&#123;&#123; form &#125;&#125;&lt;/form&gt; å­ç±»åŒ–è¡¨å•æ—¶å¯é€šè¿‡è®¾ç½®Noneæ¥åˆ é™¤ä»çˆ¶ç±»ä¸­ç»§æ‰¿è¿‡æ¥çš„å­—æ®µ1234567891011&gt;&gt;&gt; from django import forms &gt;&gt;&gt; class ParentForm(forms.Form):... name = forms.CharField()... age = forms.IntegerField() &gt;&gt;&gt; class ChildForm(ParentForm):... name = None &gt;&gt;&gt; ChildForm().fields.keys()... ['age'] Form.prefixå¦‚æœåœ¨é¡µé¢ä¸­éœ€è¦æ”¾å¤šä¸ªç›¸åŒçš„è¡¨å•ï¼Œå¯ä»¥è®¾ç½®è¡¨å•çš„å‰ç¼€12345678&gt;&gt;&gt; father = PersonForm()&gt;&gt;&gt; print(father.as_ul())&lt;li&gt;&lt;label for="id_first_name"&gt;First name:&lt;/label&gt; &lt;input type="text" name="first_name" id="id_first_name" /&gt;&lt;/li&gt;&lt;li&gt;&lt;label for="id_last_name"&gt;Last name:&lt;/label&gt; &lt;input type="text" name="last_name" id="id_last_name" /&gt;&lt;/li&gt;&gt;&gt;&gt; mother = PersonForm(prefix="mother")&gt;&gt;&gt; print(mother.as_ul())&lt;li&gt;&lt;label for="id_mother-first_name"&gt;First name:&lt;/label&gt; &lt;input type="text" name="mother-first_name" id="id_mother-first_name" /&gt;&lt;/li&gt;&lt;li&gt;&lt;label for="id_mother-last_name"&gt;Last name:&lt;/label&gt; &lt;input type="text" name="mother-last_name" id="id_mother-last_name" /&gt;&lt;/li&gt; è¡¨å•å­—æ®µField.has_change()æ£€æŸ¥å­—æ®µçš„å€¼æ˜¯å¦ä»åˆå§‹å€¼å‘ç”Ÿæ”¹å˜ å†…å»ºå­—æ®µBooleanFieldWidgetï¼šCheckboxInputé”™è¯¯ä¿¡æ¯çš„é”®ï¼šrequired CharFieldWidgetï¼šTextInputé”™è¯¯ä¿¡æ¯çš„é”®ï¼šrequired`max_lengthmin_length` æ¥æ”¶ä¸¤ä¸ªå¯é€‰å‚æ•° `max_lengthmin_length` ChoiceFieldWidtgetï¼šSelecté”™è¯¯ä¿¡æ¯çš„é”®ï¼šrequired`invalid_choiceinvalid_choiceé”™è¯¯æ¶ˆæ¯å¯èƒ½åŒ…å«%(value)sï¼Œå®ƒå°†è¢«é€‰æ‹©çš„é€‰é¡¹æ›¿æ¢æ‰ã€‚ æ¥æ”¶ä¸€ä¸ªé¢å¤–çš„å¿…é€‰å‚æ•°choices`æ˜¯ä¸€ä¸ªäºŒå…ƒç»„ç»„æˆçš„å¯è¿­ä»£å¯¹è±¡ TypeChoiceFieldWidgetï¼šSelecté”™è¯¯ä¿¡æ¯çš„é”®ï¼šrequired`invalid_choiceæ¥æ”¶é¢å¤–çš„å‚æ•°choicesæ˜¯ä¸€ä¸ªäºŒå…ƒç»„ç»„æˆçš„å¯è¿­ä»£å¯¹è±¡coerceæ¥æ”¶ä¸€ä¸ªå‚æ•°å¹¶è¿”å›å¼ºåˆ¶è½¬æ¢åçš„å€¼çš„ä¸€ä¸ªå‡½æ•°ã€‚ä¾‹å¦‚å†…å»ºçš„intã€floatã€bool å’Œå…¶å®ƒç±»å‹ã€‚é»˜è®¤ä¸ºid å‡½æ•°ã€‚æ³¨æ„å¼ºåˆ¶è½¬æ¢åœ¨è¾“å…¥éªŒè¯ç»“æŸåå‘ç”Ÿï¼Œæ‰€ä»¥å®ƒå¯èƒ½å¼ºåˆ¶è½¬æ¢ä¸åœ¨ choices ä¸­çš„å€¼empty_value` ç”¨äºè¡¨ç¤ºâ€œç©ºâ€çš„å€¼ã€‚é»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²ï¼›None æ˜¯å¦å¤–ä¸€ä¸ªå¸¸è§çš„é€‰é¡¹ã€‚æ³¨æ„è¿™ä¸ªå€¼ä¸ä¼šè¢«coerce å‚æ•°ä¸­æŒ‡å®šçš„å‡½æ•°å¼ºåˆ¶è½¬æ¢ï¼Œæ‰€ä»¥è¯·æ ¹æ®æƒ…å†µè¿›è¡Œé€‰æ‹© DateFieldWidgetï¼šDateInputé”™è¯¯ä¿¡æ¯çš„é”®ï¼šrequired`invalidæ¥æ”¶ä¸€ä¸ªå¯é€‰å‚æ•°input_formatsä¸€ä¸ªæ ¼å¼çš„åˆ—è¡¨ï¼Œç”¨äºè½¬æ¢ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ºdatateim.date`å¯¹è±¡é»˜è®¤ä¸º123[&apos;%Y-%m-%d&apos;, # &apos;2006-10-25&apos;&apos;%m/%d/%Y&apos;, # &apos;10/25/2006&apos;&apos;%m/%d/%y&apos;] # &apos;10/25/06&apos; å¦å¤–ï¼Œå¦‚æœä½ åœ¨è®¾ç½®ä¸­æŒ‡å®šUSE_L10N=Falseï¼Œä»¥ä¸‹çš„æ ¼å¼ä¹Ÿå°†åŒ…å«åœ¨é»˜è®¤çš„è¾“å…¥æ ¼å¼ä¸­ï¼š12345678[&apos;%b %d %Y&apos;, # &apos;Oct 25 2006&apos;&apos;%b %d, %Y&apos;, # &apos;Oct 25, 2006&apos;&apos;%d %b %Y&apos;, # &apos;25 Oct 2006&apos;&apos;%d %b, %Y&apos;, # &apos;25 Oct, 2006&apos;&apos;%B %d %Y&apos;, # &apos;October 25 2006&apos;&apos;%B %d, %Y&apos;, # &apos;October 25, 2006&apos;&apos;%d %B %Y&apos;, # &apos;25 October 2006&apos;&apos;%d %B, %Y&apos;] # &apos;25 October, 2006&apos; DateTimeFieldWidgetï¼šDateTimeInputé”™è¯¯ä¿¡æ¯çš„é”®ï¼šrequired`invalidæ¥æ”¶ä¸€ä¸ªå¯é€‰å‚æ•°input_formatsä¸€ä¸ªæ ¼å¼çš„åˆ—è¡¨ï¼Œç”¨äºè½¬æ¢ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ºdatetime.datetime`å¯¹è±¡é»˜è®¤ä¸º123456789[&apos;%Y-%m-%d %H:%M:%S&apos;, # &apos;2006-10-25 14:30:59&apos;&apos;%Y-%m-%d %H:%M&apos;, # &apos;2006-10-25 14:30&apos;&apos;%Y-%m-%d&apos;, # &apos;2006-10-25&apos;&apos;%m/%d/%Y %H:%M:%S&apos;, # &apos;10/25/2006 14:30:59&apos;&apos;%m/%d/%Y %H:%M&apos;, # &apos;10/25/2006 14:30&apos;&apos;%m/%d/%Y&apos;, # &apos;10/25/2006&apos;&apos;%m/%d/%y %H:%M:%S&apos;, # &apos;10/25/06 14:30:59&apos;&apos;%m/%d/%y %H:%M&apos;, # &apos;10/25/06 14:30&apos;&apos;%m/%d/%y&apos;] # &apos;10/25/06&apos; DecimalFieldWidgetï¼šå½“Field.localizeæ˜¯Falseæ—¶ä¸ºNumberInputï¼Œå¦åˆ™ä¸ºTextInputé”™è¯¯ä¿¡æ¯çš„é”®ï¼šrequired`invalidmax_valuemin_digitsmax_decimal_placesmax_whole_digitsmax_valueå’Œmin_valueé”™è¯¯ä¿¡æ¯å¯èƒ½åŒ…å«%(limit_value)sï¼Œå®ƒä»¬å°†è¢«çœŸæ­£çš„é™åˆ¶å€¼æ›¿æ¢ã€‚ç±»ä¼¼åœ°ï¼Œmax_digitsã€max_decimal_placeså’Œmax_whole_digitsé”™è¯¯æ¶ˆæ¯å¯èƒ½åŒ…å«%(max)sæ¥æ”¶å››ä¸ªå¯é€‰å‚æ•°max_valuemin_valuemax_digitsæœ€å¤§ä½æ•°decimal_places`æœ€å¤§å°æ•°ä½ DurationFieldWidgetï¼šTextInputé”™è¯¯ä¿¡æ¯çš„é”®ï¼šrequired`invalid` EmailFieldWidgetï¼šEmailInputé”™è¯¯ä¿¡æ¯çš„é”®ï¼šrequired`invalidæ¥æ”¶ä¸¤ä¸ªå¯é€‰å‚æ•°max_lengthmin_length` FileFieldWidgetï¼šClearableFileInputé”™è¯¯ä¿¡æ¯çš„é”®ï¼šrequired`invalidmissingemptymax_length` æ¥æ”¶ä¸¤ä¸ªå¯é€‰å‚æ•° `max_lengthallow_empty_fileå¦‚æœæä¾›ï¼Œè¿™ä¸¤ä¸ªå‚æ•°ç¡®ä¿æ–‡ä»¶åçš„æœ€å¤§é•¿åº¦ï¼Œè€Œä¸”å³ä½¿æ–‡ä»¶å†…å®¹ä¸ºç©ºæ—¶éªŒè¯ä¹Ÿä¼šæˆåŠŸmax_lengthé”™è¯¯ä¿¡æ¯è¡¨ç¤ºæ–‡ä»¶åçš„é•¿åº¦ã€‚åœ¨é”™è¯¯ä¿¡æ¯ä¸­ï¼Œ%(max)då°†æ›¿æ¢ä¸ºæ–‡ä»¶çš„æœ€å¤§é•¿åº¦ï¼Œ%(length)d` å°†æ›¿æ¢ä¸ºå½“å‰æ–‡ä»¶åçš„é•¿åº¦ FilePathFieldWidgetï¼šSelecté”™è¯¯ä¿¡æ¯çš„é”®ï¼šrequired`invalid_choiceè¿™ä¸ªå­—æ®µå…è®¸ä»ä¸€ä¸ªç‰¹å®šçš„ç›®å½•é€‰æ‹©æ–‡ä»¶ æ¥æ”¶äº”ä¸ªå‚æ•°pathå¿…é¡» æƒ³è¦åˆ—å‡ºçš„ç›®å½•çš„ç»å¯¹è·¯å¾„recursiveå¯é€‰ å¸ƒå°”å€¼ï¼Œé»˜è®¤ä¸ºFalseï¼Œæ˜¯å¦éœ€è¦é€’å½’è¿™ä¸ªç›®å½•matchå¯é€‰ æ­£åˆ™è¡¨è¾¾å¼è¡¨ç¤ºä¸€ä¸ªæ¨¡å¼ï¼Œåªæœ‰åŒ¹é…è¿™ä¸ªè¡¨è¾¾å¼çš„åç§°æ‰ä¼šå…è®¸ä½œä¸ºé€‰é¡¹allow_fileså¯é€‰ å¸ƒå°”å€¼ï¼Œé»˜è®¤ä¸ºTrueï¼Œè¡¨ç¤ºæ˜¯å¦åº”è¯¥åŒ…å«æŒ‡å®šä½ç½®çš„æ–‡ä»¶ï¼Œå®ƒå’Œallow_folderså¿…é¡»æœ‰ä¸€ä¸ªä¸ºTrueallow_folderså¯é€‰ å¸ƒå°”å€¼ï¼Œé»˜è®¤ä¸ºTrueï¼Œè¡¨ç¤ºæ˜¯å¦åº”è¯¥åŒ…å«æŒ‡å®šä½ç½®çš„ç›®å½•ï¼Œå’Œallow_fileså¿…é¡»æœ‰ä¸€ä¸ªä¸ºTrue` FloatFieldWidgetï¼šå½“Field.localizeæ˜¯False æ—¶ä¸ºNumberInputï¼Œå¦åˆ™ä¸ºTextInputé”™è¯¯ä¿¡æ¯çš„é”®ï¼šrequired`invalidmax_valuemin_valueæ¥æ”¶ä¸¤ä¸ªå¯é€‰å‚æ•°max_valuemin_value` ImageFieldWidgetï¼šClearableFileInputé”™è¯¯ä¿¡æ¯çš„é”®ï¼šrequired`invalidmissingemptyinvalid_image` IntegerFieldWidgetï¼šå½“Field.localizeæ˜¯Falseæ—¶ä¸ºNumberInputï¼Œå¦åˆ™ä¸ºTextInputé”™è¯¯ä¿¡æ¯çš„é”®ï¼šrequired`invalidmax_valuemin_valueæ¥æ”¶ä¸¤ä¸ªå¯é€‰å‚æ•°max_valuemin_value` IPAddressField1.7å¼ƒç”¨ GenericIPAddressFieldWidgetï¼šTextInputé”™è¯¯ä¿¡æ¯çš„é”®ï¼šrequired`invalidæ¥æ”¶ä¸¤ä¸ªå¯é€‰å‚æ•°protocolunpack_ipv4` MultipleChoiceFieldWidgetï¼šSelectMultipleé”™è¯¯ä¿¡æ¯çš„é”®ï¼šrequired`invalid_choiceinvalid_list` TypedMultipleChoiceFieldNullBooleanFieldRegexFieldSlugFieldTimeFieldURLFieldUUIDFieldè¾“å‡ºæ—¶éœ€è¦.hex ComboField12345678&gt;&gt;&gt; from django.forms import ComboField&gt;&gt;&gt; f = ComboField(fields=[CharField(max_length=20), EmailField()])&gt;&gt;&gt; f.clean('test@example.com')'test@example.com'&gt;&gt;&gt; f.clean('longemailaddress@example.com')Traceback (most recent call last):...ValidationError: ['Ensure this value has at most 20 characters (it has 28).'] MultiValueFieldSplitDateTimeFieldModelChoiceField12345# A custom empty labelfield1 = forms.ModelChoiceField(queryset=..., empty_label="(Nothing)") # No empty labelfield2 = forms.ModelChoiceField(queryset=..., empty_label=None) ModelMultipleChoiceFieldWidgetså¤„ç†æ–‡æœ¬è¾“å…¥çš„Widget TextInput NumberInput EmailInput URLInput PasswordInput HiddenInput DateInput DateTimeInput TimeInput Textarea é€‰æ‹©å’Œå¤é€‰æ¡†Widget CheckboxInput Select NullBooleanSelect SelectMultiple RadioSelect CheckboxSelectMultiple æ–‡ä»¶ä¸Šä¼ Widget FileInput ClearableFileInput å¤åˆWidget MultipleHiddenInput SplitDateTimeWidget SplitHiddenDateTimeWidget SelectDateWidget ä»æ¨¡å‹åˆ›å»ºè¡¨å•ä¸‹é¢ä¸¤ç§æ–¹æ³•æ•ˆæœç›¸åŒ12345678author = Author(title='Mr')form = PartialAuthorForm(request.POST, instance=author)form.save()# orform = PartialAuthorForm(request.POST)author = form.save(commit=False)author.title = 'Mr'author.save() æ˜¾å¼å®šä¹‰çš„å­—æ®µä¸ä¼šä»å¯¹äºçš„æ¨¡å‹ä¸­è·å–å±æ€§ï¼Œä¾‹å¦‚ max_length æˆ–requiredã€‚ å¦‚æœä½ å¸Œæœ›ä¿æŒæ¨¡å‹ä¸­æŒ‡å®šçš„è¡Œä¸ºï¼Œä½ å¿…é¡»è®¾ç½®åœ¨å£°æ˜è¡¨å•å­—æ®µæ—¶æ˜¾å¼è®¾ç½®ç›¸å…³çš„å‚æ•°ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœArticle æ¨¡å‹åƒä¸‹é¢è¿™æ ·ï¼š1234class Article(models.Model): headline = models.CharField(max_length=200, null=True, blank=True, help_text="Use puns liberally") content = models.TextField() è€Œä½ æƒ³ä¸ºheadline åšä¸€äº›è‡ªå®šä¹‰çš„éªŒè¯ï¼Œåœ¨ä¿æŒblank å’Œhelp_text å€¼çš„åŒæ—¶ï¼Œä½ å¿…é¡»å®šä¹‰è¿™æ ·å®šä¹‰ArticleFormï¼š 1234567class ArticleForm(ModelForm): headline = MyFormField(max_length=200, required=False, help_text="Use puns liberally") class Meta: model = Article fields = ['headline', 'content'] åˆ›å»ºç®€å•çš„è¡¨å•æˆ–è¡¨å•é›†å¯ä»¥ä½¿ç”¨modelform_factory()`modelformset_factory()`æ–¹æ³•æ¥æ–°å»ºã€‚ å¯ç”¨å­—æ®µçš„æœ¬åœ°åŒ–åŠŸèƒ½Â¶ é»˜è®¤æƒ…å†µä¸‹ï¼ŒModelForm ä¸­çš„å­—æ®µä¸ä¼šæœ¬åœ°åŒ–å®ƒä»¬çš„æ•°æ®ã€‚ä½ å¯ä»¥ä½¿ç”¨Meta ç±»çš„localized_fields å±æ€§æ¥å¯ç”¨å­—æ®µçš„æœ¬åœ°åŒ–åŠŸèƒ½ã€‚123456&gt;&gt;&gt; from django.forms import ModelForm&gt;&gt;&gt; from myapp.models import Author&gt;&gt;&gt; class AuthorForm(ModelForm):... class Meta:... model = Author... localized_fields = ('birth_date',) å¦‚æœlocalized_fields è®¾ç½®ä¸º&#39;__all__&#39;è¿™ä¸ªç‰¹æ®Šçš„å€¼ï¼Œæ‰€æœ‰çš„å­—æ®µéƒ½å°†æœ¬åœ°åŒ–ã€‚ æä¾›çš„åˆå§‹å€¼ä¼šè¦†ç›–ä»å®ä¾‹å–å¾—çš„å€¼123456&gt;&gt;&gt; article = Article.objects.get(pk=1)&gt;&gt;&gt; article.headline'My headline'&gt;&gt;&gt; form = ArticleForm(initial=&#123;'headline': 'Initial headline'&#125;, instance=article)&gt;&gt;&gt; form['headline'].value()'Initial headline' å¦‚æœä¸éœ€è¦å¾ˆå¤šè‡ªå®šä¹‰ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å·¥å‚æ–¹æ³•æ¥ç”Ÿæˆè¡¨å•ç±»1234&gt;&gt;&gt; from django.forms.models import modelform_factory&gt;&gt;&gt; from myapp.models import Book&gt;&gt;&gt; BookForm = modelform_factory(Book, fields=("author", "title"))&gt; 123&gt;&gt;&gt; from django.forms import Textarea&gt;&gt;&gt; Form = modelform_factory(Book, form=BookForm,... widgets=&#123;"title": Textarea()&#125;) 1&gt;&gt;&gt; Form = modelform_factory(Author, form=AuthorForm, localized_fields=("birth_date",)) è¡¨å•é›†123&gt;&gt;&gt; from django.forms.models import modelformset_factory&gt;&gt;&gt; from myapp.models import Author&gt;&gt;&gt; AuthorFormSet = modelformset_factory(Author, fields=('name', 'title')) ä½¿ç”¨modelç”Ÿæˆçš„formseté»˜è®¤å¸¦ä¸€ä¸ªåŒ…å«å…¨éƒ¨å¯¹è±¡çš„querysetformset`save()`ä¹‹åï¼Œä¼šæœ‰æ–°çš„å±æ€§123models.BaseModelFormSet.changed_objectsmodels.BaseModelFormSet.deleted_objectsmodels.BaseModelFormSet.new_objects max_numä¸ºæœ€å¤§çš„è¡¨å•æ•°ï¼Œå¦‚æœåˆå§‹queryseté•¿åº¦æ¯”max_numï¼Œåˆ™æŒ‰ç…§querysetæ¥ï¼Œextraæ˜¯å¯ä»¥é¢å¤–æ·»åŠ çš„ç©ºè¡¨å•çš„ä¸ªæ•°ï¼Œä½†extraå’Œqueryseté•¿åº¦ç›¸åŠ å¦‚æœå¤§äºmax_numï¼Œåˆ™extraå’Œå®ä¾‹è®¾ç½®å¯èƒ½è¡¨ç°ä¸ä¸€æ ·ï¼Œå¦‚queryseté•¿åº¦ä¸º2ï¼Œmax_numä¸º4ï¼Œextraä¸ç®¡æ˜¯2è¿˜æ˜¯5ï¼Œæœ€ç»ˆè¡¨ç°å‡ºæ¥éƒ½æ˜¯2ã€‚1AuthorFormSet = modelformset_factory(Author, fields=('name',), max_num=4, extra=2) max_numé»˜è®¤åªå½±å“æ˜¾ç¤ºï¼Œä¸å½±å“éªŒè¯ï¼Œå¦‚æœéœ€è¦å½±å“éªŒè¯æ·»åŠ validate_max=Trueå³å¯ è¡¨å•ç´ æ ( Media ç±»)Formå’ŒWidgetéƒ½å¯ä»¥å®šä¹‰ç´ æ 12345678from django import forms class CalendarWidget(forms.TextInput): class Media: css = &#123; 'all': ('pretty.css',) &#125; js = ('animations.js', 'actions.js') ä½¿ç”¨CalendarWidgetä¼šè‡ªåŠ¨å¼•å…¥ä¸‹åˆ—èµ„æº123&lt;link href="http://static.example.com/pretty.css" type="text/css" media="all" rel="stylesheet" /&gt;&lt;script type="text/javascript" src="http://static.example.com/animations.js"&gt;&lt;/script&gt;&lt;script type="text/javascript" src="http://static.example.com/actions.js"&gt;&lt;/script&gt; Widgetä¼šé»˜è®¤ç»§æ‰¿çˆ¶ç±»çš„ç´ æï¼Œå¦‚æœä¸æƒ³ç»§æ‰¿åœ¨Mediaé‡Œä½¿ç”¨extendç¦æ­¢ã€‚ åŠ¨æ€å®šä¹‰12345class CalendarWidget(forms.TextInput): def _media(self): return forms.Media(css=&#123;'all': ('pretty.css',)&#125;, js=('animations.js', 'actions.js')) media = property(_media) ä¸¤ä¸ªMediaå®ä¾‹å¯ä»¥ç›¸åŠ 12345678910111213141516171819&gt;&gt;&gt; from django import forms&gt;&gt;&gt; class CalendarWidget(forms.TextInput):... class Media:... css = &#123;... 'all': ('pretty.css',)... &#125;... js = ('animations.js', 'actions.js') &gt;&gt;&gt; class OtherWidget(forms.TextInput):... class Media:... js = ('whizbang.js',) &gt;&gt;&gt; w1 = CalendarWidget()&gt;&gt;&gt; w2 = OtherWidget()&gt;&gt;&gt; print(w1.media + w2.media)&lt;link href="http://static.example.com/pretty.css" type="text/css" media="all" rel="stylesheet" /&gt;&lt;script type="text/javascript" src="http://static.example.com/animations.js"&gt;&lt;/script&gt;&lt;script type="text/javascript" src="http://static.example.com/actions.js"&gt;&lt;/script&gt;&lt;script type="text/javascript" src="http://static.example.com/whizbang.js"&gt;&lt;/script&gt; è¡¨å•Media12345678910111213141516&gt;&gt;&gt; class ContactForm(forms.Form):... date = DateField(widget=CalendarWidget)... name = CharField(max_length=40, widget=OtherWidget)...... class Media:... css = &#123;... 'all': ('layout.css',)... &#125; &gt;&gt;&gt; f = ContactForm()&gt;&gt;&gt; f.media&lt;link href="http://static.example.com/pretty.css" type="text/css" media="all" rel="stylesheet" /&gt;&lt;link href="http://static.example.com/layout.css" type="text/css" media="all" rel="stylesheet" /&gt;&lt;script type="text/javascript" src="http://static.example.com/animations.js"&gt;&lt;/script&gt;&lt;script type="text/javascript" src="http://static.example.com/actions.js"&gt;&lt;/script&gt;&lt;script type="text/javascript" src="http://static.example.com/whizbang.js"&gt;&lt;/script è¡¨å•é›†è¡¨å•é›†æ§åˆ¶max_nummin_numvalidate_maxvalidate_mincan_ordercan_delete å…¶ä¸­can_order`can_delete`é»˜è®¤ä»¥ä»¥ä¸‹å½¢å¼å±•ç° å¦‚æœæ˜¯ä½¿ç”¨Modelç”Ÿæˆçš„è¡¨å•é›†ï¼Œå¦‚æœdeleteåï¼Œåœ¨è°ƒç”¨formset.save()ä¼šè‡ªåŠ¨åˆ é™¤ç›¸åº”çš„æ•°æ®ï¼Œä½†å¦‚æœè°ƒç”¨äº†formset.save(commit=False)ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨åˆ é™¤ï¼ˆ1.6æˆ–æ›´æ—©ç‰ˆè¿˜æ˜¯ä¼šè‡ªåŠ¨åˆ é™¤ï¼‰123&gt;&gt;&gt; instances = formset.save(commit=False)&gt;&gt;&gt; for obj in formset.deleted_objects:... obj.delete() å¦‚æœè¦å…¼å®¹1.6æˆ–æ›´æ—©ç‰ˆï¼Œå¯ä»¥è¿™ä¹ˆå†™12345678&gt;&gt;&gt; try:&gt;&gt;&gt; # For Django 1.7+&gt;&gt;&gt; for obj in formset.deleted_objects:&gt;&gt;&gt; obj.delete()&gt;&gt;&gt; except AssertionError:&gt;&gt;&gt; # Django 1.6 and earlier already deletes the objects, trying to&gt;&gt;&gt; # delete them a second time raises an AssertionError.&gt;&gt;&gt; pass åœ¨è¡¨å•é›†é‡Œæ·»åŠ é¢å¤–çš„å­—æ®µ123456789101112131415&gt;&gt;&gt; from django.forms.formsets import BaseFormSet&gt;&gt;&gt; from django.forms.formsets import formset_factory&gt;&gt;&gt; from myapp.forms import ArticleForm&gt;&gt;&gt; class BaseArticleFormSet(BaseFormSet):... def add_fields(self, form, index):... super(BaseArticleFormSet, self).add_fields(form, index)... form.fields["my_field"] = forms.CharField() &gt;&gt;&gt; ArticleFormSet = formset_factory(ArticleForm, formset=BaseArticleFormSet)&gt;&gt;&gt; formset = ArticleFormSet()&gt;&gt;&gt; for form in formset:... print(form.as_table())&lt;tr&gt;&lt;th&gt;&lt;label for="id_form-0-title"&gt;Title:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type="text" name="form-0-title" id="id_form-0-title" /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;&lt;label for="id_form-0-pub_date"&gt;Pub date:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type="text" name="form-0-pub_date" id="id_form-0-pub_date" /&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;&lt;label for="id_form-0-my_field"&gt;My field:&lt;/label&gt;&lt;/th&gt;&lt;td&gt;&lt;input type="text" name="form-0-my_field" id="id_form-0-my_field" /&gt;&lt;/td&gt;&lt;/tr&gt; è¡¨å•é›†å¯¹åº”çš„æ¨¡ç‰ˆå†™æ³•12345&lt;form method="post" action=""&gt; &lt;table&gt; &#123;&#123; formset &#125;&#125; &lt;/table&gt;&lt;/form&gt; ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ¸²æŸ“ï¼Œä¸èƒ½ç¼ºå°‘12345678&lt;form method="post" action=""&gt; &#123;&#123; formset.management_form &#125;&#125; &lt;table&gt; &#123;% for form in formset &#123;&#123; form &#125;&#125; &#123;% endfor &lt;/table&gt;&lt;/form&gt; å¦‚æœæ˜¯æ‰‹åŠ¨æ¸²æŸ“ï¼Œcan_order`can_delete`éœ€è¦æ‰‹åŠ¨æ·»åŠ 123456789101112&lt;form method="post" action=""&gt; &#123;&#123; formset.management_form &#125;&#125; &#123;% for form in formset &lt;ul&gt; &lt;li&gt;&#123;&#123; form.title &#125;&#125;&lt;/li&gt; &lt;li&gt;&#123;&#123; form.pub_date &#125;&#125;&lt;/li&gt; &#123;% if formset.can_delete &lt;li&gt;&#123;&#123; form.DELETE &#125;&#125;&lt;/li&gt; &#123;% endif &lt;/ul&gt; &#123;% endfor&lt;/form&gt; åœ¨ä¸€ä¸ªè§†å›¾ä¸­ä½¿ç”¨å¤šä¸ªFormSetéœ€è¦å›å‰ç¼€prefix1234567891011121314151617181920from django.forms.formsets import formset_factoryfrom django.shortcuts import render_to_responsefrom myapp.forms import ArticleForm, BookForm def manage_articles(request): ArticleFormSet = formset_factory(ArticleForm) BookFormSet = formset_factory(BookForm) if request.method == 'POST': article_formset = ArticleFormSet(request.POST, request.FILES, prefix='articles') book_formset = BookFormSet(request.POST, request.FILES, prefix='books') if article_formset.is_valid() and book_formset.is_valid(): # do something with the cleaned_data on the formsets. pass else: article_formset = ArticleFormSet(prefix='articles') book_formset = BookFormSet(prefix='books') return render_to_response('manage_articles.html', &#123; 'article_formset': article_formset, 'book_formset': book_formset, &#125;) è¡¨å•éªŒè¯å’Œå­—æ®µéªŒè¯æ ¼å¼æ ‡å‡†æŠ›å‡ºå•ä¸ªé”™è¯¯12345raise ValidationError( _('Invalid value: %(value)s'), code='invalid', params=&#123;'value': '42'&#125;,) æ‹›è˜å¤šä¸ªé”™è¯¯1234567891011# Goodraise ValidationError([ ValidationError(_('Error 1'), code='error1'), ValidationError(_('Error 2'), code='error2'),]) # Badraise ValidationError([ _('Error 1'), _('Error 2'),]) åˆ›å»ºä¸€ä¸ªæ–°çš„è¡¨å•å­—æ®µæ·»åŠ é»˜è®¤éªŒè¯1234567891011121314151617181920from django import formsfrom django.core.validators import validate_email class MultiEmailField(forms.Field): def to_python(self, value): "Normalize data to a list of strings." # Return an empty list if no input was given. if not value: return [] return value.split(',') def validate(self, value): "Check if value consists only of valid emails." # Use the parent's handling of required fields, etc. super(MultiEmailField, self).validate(value) for email in value: validate_email(email) Django çš„è®¾ç½®django-admin å·¥å…· å½“ä½¿ç”¨django-admin æ—¶ï¼Œ ä½ å¯ä»¥è®¾ç½®åªè®¾ç½®ç¯å¢ƒå˜é‡ä¸€æ¬¡ï¼Œæˆ–è€…æ¯æ¬¡è¿è¡Œè¯¥å·¥å…·æ—¶æ˜¾å¼ä¼ é€’è®¾ç½®æ¨¡å—ã€‚ ä¾‹å¦‚ï¼ˆUnix Bash shellï¼‰ï¼š12export DJANGO_SETTINGS_MODULE=mysite.settingsdjango-admin runserver ä¾‹å¦‚ï¼ˆWindows shellï¼‰ï¼š12set DJANGO_SETTINGS_MODULE=mysite.settingsdjango-admin runserver ä½¿ç”¨â€“settings å‘½ä»¤è¡Œå‚æ•°å¯ä»¥æ‰‹å·¥æŒ‡å®šè®¾ç½®ï¼š1django-admin runserver --settings=mysite.settings ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¯ä»¥æŸ¥è¯¢è®¾ç½®ä¸é»˜è®¤è®¾ç½®çš„ä¸åŒ1python manage.py diffsettings åœ¨django appä¸­ä½¿ç”¨è®¾ç½®åº”ä½¿ç”¨ä»¥ä¸‹å¯¼å…¥æ–¹å¼1from django.conf import settings æ³¨æ„ï¼Œdjango.conf.settings ä¸æ˜¯ä¸€ä¸ªæ¨¡å— â€”â€” å®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚æ‰€ä»¥ä¸å¯ä»¥å¯¼å…¥æ¯ä¸ªå•ç‹¬çš„è®¾ç½®ï¼š1from django.conf.settings import DEBUG # This won't work. ä¸è¦åœ¨åº”ç”¨è¿è¡Œæ—¶æ”¹å˜è®¾ç½® å®Œæ•´åˆ—è¡¨è®¾ç½®(Settings)CSRF_COOKIE_SECURE=Trueåªé€šè¿‡HTTPSä¼ é€’cookie DATABASES[&#39;CONN_MAX_AGE&#39;]æ•°æ®åº“è¿æ¥çš„æˆšæ—¶é—´ï¼Œé»˜è®¤ä¸º0ï¼ˆå†å²é—ç•™è¡Œä¸ºï¼‰ï¼Œè®¾ç½®ä¸ºNoneè¡¨ç¤ºæ— é™çš„æŒä¹…è¿æ¥DECIMAL_SEPARATORç±»å‹æ•°æ®çš„åˆ†éš”ç¬¦é»˜è®¤ä¸ºç‚¹.DISALLOWED_USER_AGENTSç¼–å†™æ­£åˆ™è¡¨è¾¾å¼å…ƒç»„ç¦ç”¨ä»£ç è®¿é—®ï¼Œéœ€è¦å¯ç”¨CommonMiddlewareä¸­é—´ä»¶INTERNAL_IPSè®¾ç½®å…¬å¸å†…å®¹çš„ipï¼Œåœ¨äº›ipåˆ—è¡¨ä¸­çš„ipå¯ä»¥è®¿é—®admindocä¸‹çš„ä¹¦ç­¾ åº”ç”¨1234567# rock_n_roll/apps.py from django.apps import AppConfig class RockNRollConfig(AppConfig): name = 'rock_n_roll' verbose_name = "Rock â€™nâ€™ roll" 123# rock_n_roll/__init__.py default_app_config = 'rock_n_roll.apps.RockNRollConfig' AppConfigå¯é…ç½®çš„å±æ€§ AppConfig.name AppConfig.label AppConfig.verbose_name Appconfig.path AppConfigåªè¯»å±æ€§ AppConfig.module Appconfig.models_module AppConfigæ–¹æ³• AppConfig.get_models() AppConfig..get_model(model_name) AppConfigevaluate.ready() 123&gt;&gt;&gt; from django.apps import apps&gt;&gt;&gt; apps.get_app_config('admin').verbose_name'Admin' APP apps.ready apps.get_app_configs() apps.get_app_config(app_label) apps.is_installed(app_name) apps.get_model(app_label, model_name) Djangoå¼‚å¸¸æ ¸å¿ƒå¼‚å¸¸django.core.exceptions ObjectDoesNotExistå¯¹è±¡ä¸å­˜åœ¨DoesNotExistçš„åŸºç±»å¯¹ObjectDoesNotExistçš„try/exceptä¼šä¸ºæ‰€æœ‰æ¨¡å‹æ•è·åˆ°æ‰€æœ‰DoesNotExist å¼‚å¸¸123456from django.core.exceptions import ObjectDoesNotExisttry: e = Entry.objects.get(id=3) b = Blog.objects.get(id=1)except ObjectDoesNotExist: print("Either the entry or blog doesn't exist.") FieldDoesNotExistå½“è¢«è¯·æ±‚çš„å­—æ®µåœ¨æ¨¡å‹æˆ–æ¨¡å‹çš„çˆ¶ç±»ä¸­ä¸å­˜åœ¨æ—¶ï¼ŒFieldDoesNotExistå¼‚å¸¸ç”±æ¨¡å‹çš„ _meta.get_field()æ–¹æ³•æŠ›å‡º MultipleObjectsReturnedæŸ¥è¯¢æ—¶ï¼Œé¢„æœŸåªæœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯è¿”å›äº†å¤šä¸ªå¯¹è±¡ä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ SuspiciousOperationå½“ç”¨æˆ·è¿›è¡Œçš„æ“ä½œåœ¨å®‰å…¨æ–¹é¢å¯ç–‘çš„æ—¶å€™ï¼ŒæŠ›å‡ºæ­¤å¼‚å¸¸ï¼Œä¾‹å¦‚ï¼Œç¯¡æ”¹cookieå­ç±» DisallowedHost DisallowedModelAdminLookup DisallowedModelAdminToField DisallowedRedirect InvalidSessionKey SuspiciousFileOperation SuspiciousMultipartForm SuspiciousSession PermissionDeniedå½“ç”¨æˆ·ä¸è¢«å…è®¸æ¥æ‰§è¡Œè¯·æ±‚çš„æ“ä½œæ—¶äº§ç”Ÿ ViewDoesNotExistå½“è¯·æ±‚çš„è§†å›¾ä¸å­˜åœ¨æ—¶æŠ›å‡ºæ­¤å¼‚å¸¸ MiddlewareNotUsedå½“ä¸­é—´ä»¶æ²¡æœ‰åœ¨æœåŠ¡å™¨é…ç½®ä¸­å‡ºç°æ—¶ï¼ŒæŠ›å‡ºæ­¤å¼‚å¸¸ ImproperlyConfigureddjangoé…ç½®ä¸å½“æ—¶æŠ›å‡ºæ­¤å¼‚å¸¸ï¼Œå¦‚settings.pyä¸­çš„å€¼ä¸æ­£ç¡®æˆ–è€…ä¸å¯è§£æ FieldErrorå½“æ¨¡å‹ä¸Šçš„å­—æ®µå‡ºç°é—®é¢˜æ—¶ï¼ŒæŠ›å‡ºæ­¤å¼‚å¸¸ï¼Œç”±ä»¥ä¸‹åŸå› é€ æˆï¼š æ¨¡å‹ä¸­çš„å­—æ®µä¸æŠ½è±¡åŸºç±»ä¸­çš„å­—æ®µé‡å æ’åºé€ æˆäº†ä¸€ä¸ªæ­»å¾ªç¯ å…³é”®è¯ä¸èƒ½ç”±è¿‡æ»¤å™¨å‚æ•°è§£æ å­—æ®µä¸èƒ½ç”±æŸ¥è¯¢å‚æ•°ä¸­çš„å…³é”®è¯å†³å®š è¿æ¥ï¼ˆjoinï¼‰ä¸èƒ½åœ¨æŒ‡å®šå¯¹è±¡ä¸Šä½¿ç”¨ å­—æ®µåç§°ä¸å¯ç”¨ æŸ¥è¯¢åŒ…å«äº†æ— æ•ˆçš„order_byå‚æ•° ValidationErrorå½“è¡¨å•æˆ–æ¨¡å‹å­—æ®µéªŒè¯å¤±è´¥æ—¶æŠ›å‡ºæ­¤å¼‚å¸¸ NON_FIELD_ERRORSåœ¨è¡¨å•æˆ–è€…æ¨¡å‹ä¸­ä¸å±äºç‰¹å®šå­—æ®µçš„ValidationErrorè¢«å½’ç±»ä¸ºNON_FIELD_ERRORS URLè§£æå™¨å¼‚å¸¸ Resolver404django.http.Http404çš„å­ç±»å½“å‘resolveä¼ é€’çš„è·¯å¾„ä¸èƒ½åŒ¹é…åˆ°å¯¹åº”è§†å›¾æ—¶æŠ›å‡ºæ­¤å¼‚å¸¸ NoReverseMatchå½“ä½ çš„URLconfä¸­çš„ä¸€ä¸ªåŒ¹é…çš„URLä¸èƒ½åŸºäºæä¾›çš„å‚æ•°è¯†åˆ«æ—¶ï¼ŒæŠ›å‡ºæ­¤å¼‚å¸¸ æ•°æ®åº“å¼‚å¸¸æ•°æ®åº“å¼‚å¸¸ç”±django.dbå¯¼å…¥ Error InterfaceError DatabaseError DataError OperationalError IntegrityError InternalError ProgrammingError NotSupportedError HTTPå¼‚å¸¸HTTPå¼‚å¸¸ç”±django.httpå¯¼å…¥ UnreadablePostErrorç”¨æˆ·å–æ¶ˆä¸Šä¼ æ—¶æŠ›å‡ºæ­¤å¼‚å¸¸ äº‹åŠ¡å¼‚å¸¸äº‹åŠ¡å¼‚å¸¸å®šä¹‰ç”±django.db.transactionå¯¼å…¥ æµ‹è¯•æ¡†æ¶å¼‚å¸¸ç”±DJango django.test åŒ…æä¾›çš„å¼‚å¸¸ RedirectCycleErrorå½“æµ‹è¯•å®¢æˆ·ç«¯æ£€æµ‹åˆ°é‡å®šå‘çš„å¾ªç¯æˆ–è€…è¿‡é•¿çš„é“¾æ—¶æŠ›å‡ºæ­¤å¼‚å¸¸ Pythonå¼‚å¸¸Djangoåœ¨é€‚å½“çš„æ—¶å€™ä¹Ÿä¼šæŠ›å‡ºPythonçš„å†…å»ºå¼‚å¸¸ django-admin and manage.py dumpdataè¯¥å‘½ä»¤å°†æ‰€æœ‰ä¸è¢«å‘½ååº”ç”¨ç›¸å…³è”çš„æ•°æ®åº“ä¸­çš„æ•°æ®è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºã€‚å¦‚æœåœ¨dumpdateå‘½ä»¤åé¢æœªæŒ‡å®šDjangoåº”ç”¨åï¼Œåˆ™Djangoé¡¹ç›®ä¸­å®‰è£…çš„æ‰€æœ‰åº”ç”¨çš„æ•°æ®éƒ½å°†è¢«dumpåˆ°fixtureä¸­dumpdata --output data.json flusæ¸…ç©ºæ•°æ®åº“ï¼Œé‡æ–°è£…è½½åˆå§‹æ•°æ® --noinput --database --no-initial-data inspectdbæ ¹æ®æ•°æ®åº“ç»“æ„ç”Ÿæˆmodel1python manage.py inspectdb &gt; models.py loaddataå¯¼å…¥fixtureæ•°æ® runserverå¯åŠ¨æœ¬åœ°ä¸Šä¸€ä¸ªè½»é‡çº§çš„WebæœåŠ¡å™¨ï¼Œé»˜è®¤å¤šçº¿ç¨‹--noreloadç¦ç”¨è‡ªåŠ¨é‡æ–°è½½å…¥--nothreadingç¦ç”¨å¤šçº¿ç¨‹ 1runserver 0.0.0.0:80 æ·»åŠ è‡ªå®šä¹‰çš„å‘½ä»¤å‘åº”ç”¨ä¸‹æ·»åŠ management/commandsç›®å½•ï¼ŒDjangoä¼šä¸ºæ­¤ç›®å½•ä¸‹çš„æ‰€æœ‰æ²¡æœ‰å¸¦ä¸‹åˆ’çº¿å¼€å¤´çš„pythonæ¨¡å—éƒ½æ³¨å†Œä¸€ä¸ªmanage.pyå‘½ä»¤ã€‚åœ¨Python 2ä¸Šï¼Œè¯·ç¡®ä¿managementå’Œmanagement/commandsä¸¤ä¸ªç›®å½•éƒ½åŒ…å«__init__.py æ–‡ä»¶ã€‚ 12345678910111213141516171819202122from django.core.management.base import BaseCommand, CommandErrorfrom polls.models import Poll class Command(BaseCommand): help = 'Closes the specified poll for voting' def add_arguments(self, parser): # å‘½ä»¤è¡Œæ¥æ”¶ä¸€ä¸ªæˆ–å¤šä¸ªpoll_idå€¼ # parser.add_argument('poll_id', nargs='+', type=int) def handle(self, *args, **options): for poll_id in options['poll_id']: try: poll = Poll.objects.get(pk=poll_id) except Poll.DoesNotExist: raise CommandError('Poll "%s" does not exist' % poll_id) poll.opened = False poll.save() self.stdout.write('Successfully closed poll "%s"' % poll_id)]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Django</tag>
        <tag>æ–‡æ¡£</tag>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Django REST frameworkä¹‹ç‰ˆæœ¬å·version]]></title>
    <url>%2F2016%2F01%2F28%2Fdjango-rest-framework%E4%B9%8B%E7%89%88%E6%9C%AC%E5%8F%B7version%2F</url>
    <content type="text"><![CDATA[drfæ”¯æŒä»¥ä¸‹å½¢å¼ä¼ è¾“ç‰ˆæœ¬å· header 123GET /bookings/ HTTP/1.1Host: example.comAccept: application/json; version=1.0 URL Path 123GET /v1/bookings/ HTTP/1.1Host: example.comAccept: application/json 1234567urlpatterns = [ url( r&apos;^(?P&lt;version&gt;(v1|v2))/bookings/$&apos;, bookings_list, name=&apos;bookings-list&apos; ),] Namespace 123GET /v1/something/ HTTP/1.1Host: example.comAccept: application/json 1234urlpatterns = [ url(r&apos;^v1/bookings/&apos;, include(&apos;bookings.urls&apos;, namespace=&apos;v1&apos;)), url(r&apos;^v2/bookings/&apos;, include(&apos;bookings.urls&apos;, namespace=&apos;v2&apos;))] Host Name 123GET /bookings/ HTTP/1.1Host: v1.example.comAccept: application/json Query Parameter 123GET /something/?version=0.1 HTTP/1.1Host: example.comAccept: application/json drfé»˜è®¤æ˜¯å…³é—­ç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½ï¼Œå¦‚éœ€è¦å¼€å¯ï¼Œå¯åœ¨settings.pyé‡Œæ·»åŠ å¯¹åº”çš„è®¾ç½®123456789REST_FRAMEWORK = &#123; â€¦â€¦ 'DEFAULT_VERSIONING_CLASS': 'rest_framework.versioning.AcceptHeaderVersioning', # 'DEFAULT_VERSIONING_CLASS': 'rest_framework.versioning.URLPathVersioning', # 'DEFAULT_VERSIONING_CLASS': 'rest_framework.versioning.NamespaceVersioning', # 'DEFAULT_VERSIONING_CLASS': 'rest_framework.versioning.HostNameVersioning', # 'DEFAULT_VERSIONING_CLASS': 'rest_framework.versioning.QueryParameterVersioning', â€¦â€¦&#125; å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ºæ¯ä¸ªè§†å›¾å•ç‹¬æ·»åŠ ï¼Œä¸è¿‡ä¸å»ºè®®è¿™ä¹ˆåš12class ProfileList(APIView): versioning_class = versioning.QueryParameterVersioning å¼€å¯ç‰ˆæœ¬æ§åˆ¶ä¹‹åï¼Œå°±å¯ä»¥ä»requestå–å¾—ç‰ˆæœ¬å·request.versionï¼ˆå½“ç„¶ä½ settings.pyé‡Œé…ç½®çš„æ˜¯ä»€ä¹ˆæ–¹å¼ï¼Œå°±ç”¨ä»€ä¹ˆæ–¹å¼ä¼ ç‰ˆæœ¬å·ï¼Œè¿™æ ·å°±æ‰å¯ä»¥ä»requesté‡Œè·å–åˆ°ç‰ˆæœ¬å·ï¼‰1234def get_serializer_class(self): if self.request.version == 'v1': return AccountSerializerVersion1 return AccountSerializer å¯åŠ¨ç‰ˆæœ¬æ§åˆ¶åï¼Œurlé€†å‘è§£ææ–¹æ³•éœ€è¦ä¼ å…¥requestå‚æ•°123from rest_framework.reverse import reverse reverse('bookings-list', request=request) å¦‚æœæ˜¯ä½¿ç”¨Namespaceæ—¶çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œå› ä¸ºé…ç½®äº†DEFAULT_VERSIONING_CLASSï¼Œæ‰€ä»¥è®¾ç½®view_nameæ—¶ä¸éœ€è¦æ·»åŠ v1:å‰ç¼€ï¼Œè§django rest frameworkå…¥é—¨ç¬”è®°.md æœ€ååœ¨è®¾ç½®é‡Œæ·»åŠ ä»¥ä¸‹å…¨å±€è®¾ç½®æ¥æ§åˆ¶èƒ½è®¿é—®çš„ç‰ˆæœ¬12'DEFAULT_VERSION': None, #é»˜è®¤ç‰ˆæœ¬ï¼Œrequesté‡Œæ²¡æœ‰ç‰ˆæœ¬ä¿¡æ¯æ—¶ï¼Œä½¿ç”¨çš„ç‰ˆæœ¬ï¼Œé»˜è®¤ä¸ºNone'ALLOWED_VERSIONS': [None, 'v1', 'v2'], #å…è®¸è®¿é—®çš„ç‰ˆæœ¬ï¼Œå¦‚æœè®¿é—®çš„ç‰ˆæœ¬ä¸åœ¨åˆ—è¡¨ä¸­ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ ä¹Ÿå¯ä»¥ä¸ºæ¯ä¸ªè§†å›¾å•ç‹¬è®¾ç½®12345678910from rest_framework.versioning import URLPathVersioningfrom rest_framework.views import APIView class ExampleVersioning(URLPathVersioning): default_version = ... allowed_versions = ... version_param = ... class ExampleView(APIVIew): versioning_class = ExampleVersioning]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Django</tag>
        <tag>restful</tag>
        <tag>api</tag>
        <tag>version</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[curlå¸¸ç”¨å‘½ä»¤]]></title>
    <url>%2F2015%2F12%2F17%2Fcurl%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%2F</url>
    <content type="text"><![CDATA[curlæ˜¯åˆ©ç”¨URLè¯­æ³•åœ¨å‘½ä»¤è¡Œæ–¹å¼ä¸‹å·¥ä½œçš„å¼€æºæ–‡ä»¶ä¼ è¾“å·¥å…·ã€‚å®ƒè¢«å¹¿æ³›åº”ç”¨åœ¨Unixã€å¤šç§Linuxå‘è¡Œç‰ˆä¸­ï¼Œå¹¶ä¸”æœ‰DOSå’ŒWin32ã€Win64ä¸‹çš„ç§»æ¤ç‰ˆæœ¬ã€‚ è®¿é—®urlå¹¶è¾“å‡ºç»“æœ1curl http://www.example.com ä¼ é€’å‚æ•°é»˜è®¤curlä½¿ç”¨GETæ–¹å¼è¯·æ±‚æ•°æ®ï¼Œè¿™ç§æ–¹å¼ä¸‹ç›´æ¥é€šè¿‡URLä¼ é€’æ•°æ®å¯ä»¥é€šè¿‡ â€“data/-d æ–¹å¼æŒ‡å®šä½¿ç”¨POSTæ–¹å¼ä¼ é€’æ•°æ®12345678# GETcurl -u username https://api.github.com/user?access_token=XXXXXXXXXX# POSTcurl -u username -d &quot;param1=value1&amp;param2=value&quot; https://api.github.com# ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªæ–‡ä»¶ï¼Œå°†è¯¥æ–‡ä»¶ä¸­çš„å†…å®¹å½“ä½œæ•°æ®ä¼ é€’ç»™æœåŠ¡å™¨ç«¯curl -d @filename https://github.api.com/authorizations æ³¨ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œé€šè¿‡POSTæ–¹å¼ä¼ é€’è¿‡å»çš„æ•°æ®ä¸­è‹¥æœ‰ç‰¹æ®Šå­—ç¬¦ï¼Œé¦–å…ˆéœ€è¦å°†ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰åœ¨ä¼ é€’ç»™æœåŠ¡å™¨ç«¯ï¼Œå¦‚valueå€¼ä¸­åŒ…å«æœ‰ç©ºæ ¼ï¼Œåˆ™éœ€è¦å…ˆå°†ç©ºæ ¼è½¬æ¢æˆ%20ï¼Œå¦‚ï¼š1curl -d &quot;value%201&quot; http://hostname.com åœ¨æ–°ç‰ˆæœ¬çš„CURLä¸­ï¼Œæä¾›äº†æ–°çš„é€‰é¡¹ â€“data-urlencodeï¼Œé€šè¿‡è¯¥é€‰é¡¹æä¾›çš„å‚æ•°ä¼šè‡ªåŠ¨è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ã€‚1curl --data-urlencode &quot;value 1&quot; http://hostname.com æŒ‡å®šè¯·æ±‚æ–¹å¼é™¤äº†ä½¿ç”¨GETå’ŒPOSTåè®®å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ -X é€‰é¡¹æŒ‡å®šå…¶å®ƒåè®®ï¼Œå¦‚ï¼š1curl -I -X DELETE https://api.github.com è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯1curl -H &apos;Accept-Language: zh&apos; http://cnn.com -Hæˆ–è¢«å¤šæ¬¡æŒ‡å®š1curl -H &apos;Host: 157.166.226.25&apos;-H &apos;Accept-Language: zh&apos;-H &apos;Cookie: ID=1234&apos; http://cnn.com å¯¹äºâ€User-Agentâ€, â€œCookieâ€, â€œHostâ€è¿™ç±»æ ‡å‡†çš„HTTPå¤´éƒ¨å­—æ®µï¼Œé€šå¸¸ä¼šæœ‰å¦å¤–ä¸€ç§è®¾ç½®æ–¹æ³•ã€‚curlå‘½ä»¤æä¾›äº†ç‰¹å®šçš„é€‰é¡¹æ¥å¯¹è¿™äº›å¤´éƒ¨å­—æ®µè¿›è¡Œè®¾ç½®ï¼š-A (or â€“user-agent): è®¾ç½® â€œUser-Agentâ€ å­—æ®µ.-b (or â€“cookie): è®¾ç½® â€œCookieâ€ å­—æ®µ.-e (or â€“referer): è®¾ç½® â€œRefererâ€ å­—æ®µ.12curl -H &quot;User-Agent: my browser&quot; http://cnn.comcurl -A &quot;my browser&quot; http://cnn.com æŸ¥çœ‹å“åº”å¤´ä¿¡æ¯1curl -I http://www.baidu.com æäº¤è¡¨å•1curl --form &quot;fileupload=@filename.txt&quot; http://hostname/resource è®¿é—®urlå¹¶å¥–ç»“æœä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ä¸­-o: å°†æ–‡ä»¶ä¿å­˜ä¸ºå‘½ä»¤è¡Œä¸­æŒ‡å®šçš„æ–‡ä»¶ååˆ°æœ¬åœ°-O: ä½¿ç”¨urlä¸­é»˜è®¤çš„æ–‡ä»¶åä¿å­˜æ–‡ä»¶åˆ°æœ¬åœ°12345curl -o index.html http://www.example.com# æˆ–curl http://www.baidu.com &gt; index.html# åœ¨windowsä¸Šæ²¡æˆåŠŸcurl -O http://www.example.com å¿½ç•¥è¯ä¹¦é”™è¯¯å·¥ä½œä¸­ï¼Œç»å¸¸éœ€è¦ç”¨è‡ªç­¾çš„å‡è¯ä¹¦æ­å»ºå¼€å‘ç¯å¢ƒã€‚cURLåœ¨é‡åˆ°è¯ä¹¦é”™è¯¯æ—¶ç½¢å·¥ï¼Œä½¿ç”¨ -k å‚æ•°å°±å¯ä»¥è®©å®ƒä¸åšè¯ä¹¦æ ¡éªŒã€‚1curl -k https://www.example.com è·å–é‡å®šå‘åçš„é¡µé¢å¦‚æœurlé‡å®šå‘çš„è¯ï¼Œcurlé»˜è®¤æ˜¯ä¸ä¼šå»è·å–é‡å®šå‘åçš„urlé¡µé¢çš„ï¼Œä½¿ç”¨-Lå¯è¿›è¡Œå¼ºåˆ¶é‡å®šå‘1curl -L http://www.example.com å‘é€å‹ç¼©çš„è¯·æ±‚cURLæä¾›äº†ä¸€ä¸ª â€“compress å‚æ•°ï¼Œå¯ä»¥ç”¨æ¥å‘é€æ”¯æŒå‹ç¼©çš„è¯·æ±‚ã€‚ä½†ä½¿ç”¨äº†â€“compressä¹‹åï¼Œè™½ç„¶ä¼ è¾“è¿‡ç¨‹æ˜¯å‹ç¼©çš„ï¼ŒcURLçš„è¾“å‡ºè¿˜æ˜¯è§£å‹ä¹‹åçš„ï¼Œéš¾ä»¥çœ‹åˆ°æ•ˆæœã€‚ è‡ªå·±å†™ä¸€ä¸ª Accept-Encoding å­—æ®µåœ¨å¤´ä¿¡æ¯ä¸­ã€‚1curl -H &quot;Accept-Encoding: gzip&quot; http://www.kuqin.com/ å¦‚æœç›´æ¥è¿è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œä¼šå¾—åˆ°ä¸€å †ä¹±ç ï¼Œå› ä¸ºcURLè¾“å‡ºçš„å†…å®¹ï¼Œæ˜¯å‹ç¼©åçš„æ•°æ®ã€‚ä¸å¦¨åœ¨åé¢æ¥ä¸€ä¸ªgunzipè¯•è¯•ã€‚12# ä½¿ç”¨gunzipè§£å‹curl -H &quot;Accept-Encoding: gzip&quot; http://www.kuqin.com/ | gunzip ä½¿ç”¨gunzipè§£å‹ä¹‹åï¼Œä¿¡æ¯åˆè¢«è¿˜åŸäº†ã€‚ æ–­ç‚¹ç»­ä¼ é€šè¿‡ä½¿ç”¨-Cé€‰é¡¹å¯å¯¹å¤§æ–‡ä»¶ä½¿ç”¨æ–­ç‚¹ç»­ä¼ åŠŸèƒ½12345# æœªä¸‹è½½å®Œæˆå³ä¸­æ–­è¯¥è¿›ç¨‹curl -o a.zip http://www.example.com/bigfile.zip# åé¢å¯ä»¥é€šè¿‡-Cæ¥ç»§ç»­ä¸‹è½½curl -C -o a.html http://www.example.com/bigfile.zip ä¸‹è½½é™é€Ÿä½¿ç”¨-limit-rateè¿›è¡Œé™é€Ÿ12# é™é€Ÿä¸º100k/scurl --limit-rate 1000k -o a.zip http://www.example.com/bigfile.zip æ ¹æ®æ–‡ä»¶ä¿®æ”¹æ—¶é—´æ¥åˆ¤æ–­æ˜¯å¦è¿›è¡Œä¸‹è½½12# è‹¥æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´åœ¨2011/12/11ä¹‹åï¼Œåˆ™ä¸‹è½½curl -z 21-Dec-11 http://www.example.com/bigfile.zip æˆæƒåœ¨è®¿é—®éœ€è¦æˆæƒçš„é¡µé¢æ—¶ï¼Œå¯é€šè¿‡-uæ¥æä¾›ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œæˆæƒ1curl -u username:password http://www.example.com ftpæ“ä½œ123456789101112131415# åˆ—å‡ºæŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶curl -u ftpuser:ftppw -O ftp://ftp_server/public_html/# ä¸‹è½½æ–‡ä»¶curl -u ftpuser:ftppw -Oftp://ftp_server/public_hmtl/bigfile.zip# ä¸Šä¼ æ–‡ä»¶curl -u ftpuser:ftppw -T myfile.txt ftp://ftp_server/public_html/# ä¸Šä¼ å¤šä¸ªæ–‡ä»¶curl -u ftpuser:ftppw -T &quot;&#123;myfile1.txt, myfile2.txt&#125;&quot; ftp://ftp_server/public_html/# ä»æ ‡å‡†è¾“å…¥è·å–å†…å®¹ä¿å­˜åˆ°æœåŠ¡å™¨çš„æŒ‡å®šæ–‡ä»¶ä¸­curl -u ftpuser:ftppw -T - ftp://ftp_server/public_html/1.txt è®¾ç½®ä»£ç†1curl -x proxyserver.com:1080 http://www.example.com ä¿å­˜ä¸ä½¿ç”¨ç½‘ç«™çš„cookieä¿¡æ¯12345# å°†ç½‘ç«™çš„cookiesä¿¡æ¯ä¿å­˜åˆ°example_cookiesæ–‡ä»¶ä¸­curl -D example_cookies http://www.example.com# ä½¿ç”¨cookiesä¿¡æ¯è®¿é—®urlcurl -b example_cookies http://www.example.com/user/]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>curl</tag>
        <tag>æ•™ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¤šè¯´è¯„è®ºUAæ˜¾ç¤ºæµ‹è¯•]]></title>
    <url>%2F2015%2F11%2F15%2Fduoshuo-comments-ua%2F</url>
    <content type="text"><![CDATA[å¤šè¯´è¯„è®ºUAæ˜¾ç¤ºæµ‹è¯•]]></content>
  </entry>
  <entry>
    <title><![CDATA[Djangoå­—æ®µé€‰é¡¹related_nameå’Œrelated_query_name]]></title>
    <url>%2F2015%2F10%2F20%2Fdjango%E5%AD%97%E6%AE%B5%E9%80%89%E9%A1%B9related-name%E5%92%8Crelated-query-name%2F</url>
    <content type="text"><![CDATA[data123456789sqlite&gt; select * from author;id name age1 jim 122 tom 11sqlite&gt; select * from book;id name author_id1 learn java 12 learn python 13 learn c++ 2 models.py12345678910111213# -*- coding: UTF-8 -*-from __future__ import unicode_literalsfrom django.db import models# Create your models here.class Author(models.Model): name = models.CharField(verbose_name='å§“å', max_length=50) age = models.IntegerField(verbose_name='å¹´é¾„')class Book(models.Model): name = models.CharField(verbose_name='ä¹¦å', max_length=100) author = models.ForeignKey(Author, verbose_name='ä½œè€…') æ‰§è¡Œè¯­å¥12345&gt;&gt;&gt; Author.objects.filter(book__name=&apos;learn java&apos;)[&lt;Author: jim&gt;]&gt;&gt;&gt; author = Author.objects.get(pk=1)&gt;&gt;&gt; author.book_set.all()[&lt;Book: learn java&gt;, &lt;Book: learn python&gt;] å‡å¦‚æŠŠç±»Bookæ”¹æˆè¿™æ ·123class Book(models.Model): name = models.CharField(verbose_name=&apos;ä¹¦å&apos;, max_length=100) author = models.ForeignKey(Author, verbose_name=&apos;ä½œè€…&apos;, related_name=&apos;bs&apos;, related_query_name=&apos;b&apos;) é‚£ä¹ˆä¸Šé¢æŸ¥è¯¢ä»£ç å°±åº”è¯¥å†™æˆè¿™æ ·12345&gt;&gt;&gt; Author.objects.filter(b__name=&apos;learn java&apos;)[&lt;Author: jim&gt;]&gt;&gt;&gt; author = Author.objects.get(pk=1)&gt;&gt;&gt; author.bs.all()[&lt;Book: learn java&gt;, &lt;Book: learn python&gt;] å¦‚æœbookè¡¨é‡Œæœ‰ä¸¤ä¸ªå­—æ®µéƒ½å¤–é”®å…³è”authorè¡¨ï¼Œè¿™æ—¶related_nameå°±éå¸¸æœ‰ç”¨äº†ã€‚]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Django</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Git stashçš„ç®€å•è¿ç”¨]]></title>
    <url>%2F2015%2F10%2F20%2Fgit-stash%E7%9A%84%E7%AE%80%E5%8D%95%E8%BF%90%E7%94%A8%2F</url>
    <content type="text"><![CDATA[å½“æˆ‘ä»¬åœ¨åˆ†æ”¯ä¸Šæ”¹ä»£ç æ”¹åˆ°ä¸€åŠæ—¶ï¼Œçªç„¶é¡¹ç›®å‘ç°äº†ä¸€ä¸ªbugéœ€è¦ä¿®å¤ï¼Œè¿™æ—¶éœ€è¦åˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯è¿›è¡Œä¿®æ”¹ï¼Œä»¥å‰çš„åšæ³•å¯èƒ½æ˜¯æŠŠå·¥ä½œåŒºæ”¹åˆ°ä¸€åŠçš„ä»£ç å…ˆcommitï¼Œç„¶ååˆ‡æ¢åˆ†æ”¯ä¿®å¤bugï¼Œå†åˆ‡æ¢å›æ¥ç»§ç»­å†™ä»£ç ï¼Œä½†è¿™æ ·ä¼šç”Ÿæˆå¾ˆå¤šä¸å¿…è¦çš„æäº¤ï¼Œè¿™æ—¶ä½ å°±éœ€è¦ä½¿ç”¨git stashå‘½ä»¤ã€‚git stashå‘½ä»¤å¯å°†å·¥ä½œåŒºçš„æ”¹åŠ¨å­˜å‚¨gitæ ˆï¼Œè¿è¡Œgit stashä¹‹åï¼Œå¯ä»¥å†è¿è¡Œgit status -séªŒè¯ä¸‹å‘ç°ç›®å½•å’Œä¸Šäº¤commitæ—¶æ˜¯ä¸€è‡´çš„ï¼Œæ²¡æœ‰ä»»ä½•ä¿®æ”¹ï¼Œè¿™æ—¶ä½ å°±å¯ä»¥åˆ‡æ¢åˆ°å…¶å®ƒåˆ†æ”¯è¿›è¡Œå·¥ä½œï¼Œå½“ä½ å®Œæˆå·¥ä½œåï¼Œå†åˆ‡æ¢å›æ¥ï¼Œä½¿ç”¨git stash popå¯ä»¥ä»Gitæ ˆä¸­è¯»å–æœ€è¿‘ä¸€æ¬¡ä¿å­˜çš„å†…å®¹ï¼Œæ¢å¤åˆ°å·¥ä½œåŒºã€‚ 1234567git stash: å¤‡ä»½å½“å‰çš„å·¥ä½œåŒºçš„å†…å®¹ï¼Œä»æœ€è¿‘çš„ä¸€æ¬¡æäº¤ä¸­è¯»å–ç›¸å…³å†…å®¹ï¼Œè®©å·¥ä½œåŒºä¿è¯å’Œä¸Šæ¬¡æäº¤çš„å†…å®¹ä¸€è‡´ã€‚åŒæ—¶ï¼Œå°†å½“å‰çš„å·¥ä½œåŒºå†…å®¹ä¿å­˜åˆ°Gitæ ˆä¸­ã€‚git stash save &quot;message&quot;: å¤‡ä»½å½“å‰çš„å·¥ä½œåŒºçš„å†…å®¹ï¼Œå¹¶æ·»åŠ å¤‡æ³¨ä¿¡æ¯git stash list: æ˜¾ç¤ºgitæ ˆå†…çš„æ‰€æœ‰å¤‡ä»½ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªåˆ—è¡¨æ¥å†³å®šä»é‚£ä¸ªåœ°æ–¹æ¢å¤ã€‚git stash pop stash@&#123;0&#125;: ä»gitæ ˆä¸­è¯»å–å¹¶æ¢å¤å·¥ä½œåŒºï¼Œç„¶ååˆ é™¤å¯¹åº”çš„è®°å½•ï¼Œé»˜è®¤æ¢å¤æœ€æ–°çš„ï¼ˆstash@&#123;0&#125;ä¸ºæœ€æ–°ï¼‰git stash apply stash@&#123;0&#125;: åŒgit stash popï¼Œä½†ä¸ä¼šåˆ é™¤å¯¹åº”çš„è®°å½•git stash drop: åˆ é™¤æœ€æ–°çš„ä¸€ä¸ªå¤‡ä»½git stash clear: æ¸…ç©ºgitæ ˆã€‚æ­¤æ—¶ä½¿ç”¨gitgç­‰å›¾å½¢åŒ–å·¥å…·ä¼šå‘ç°ï¼ŒåŸæ¥stashçš„å“ªäº›èŠ‚ç‚¹éƒ½æ¶ˆå¤±äº†ã€‚ å‚è€ƒhttp://www.tuicool.com/articles/rUBNBvIåŠgit stash --help]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Git patchçš„ç®€å•è¿ç”¨]]></title>
    <url>%2F2015%2F10%2F15%2Fgit-patch%E7%9A%84%E7%AE%80%E5%8D%95%E8%BF%90%E7%94%A8%2F</url>
    <content type="text"><![CDATA[ç”ŸæˆPATCHå¾€å‰nä¸ªæå‰å†…å®¹çš„patch1git format-patch -n æŸä¸ªcommitï¼ˆå«ï¼‰çš„åŠä¹‹å‰çš„n-1æ¬¡æäº¤çš„patch1git format-patch -n SHA æŸä¸ªcommitçš„patch1git format-patch -1 SHA å½“å‰åˆ†æ”¯æ‰€æœ‰è¶…å‰masteræäº¤çš„patch1git format-patch -M master ä¸¤ä¸ªcommitä¹‹é—´çš„æ‰€æœ‰patchï¼ˆä¸åŒ…å«è¾ƒæ—©SHA1æäº¤çš„å†…å®¹ï¼‰1git format-patch SHA1...SHA1 æŸä¸ªcommitä¹‹åçš„æ‰€æœ‰patch1git format-patch -s SHA åº”ç”¨PATCHæ£€æŸ¥patch1git apply --stat xxx.patch æ£€æŸ¥èƒ½å¦åº”ç”¨æˆåŠŸ1git apply --check xxx.patch æ‰“è¡¥ä¸1git am -s xxx.patch å¦‚æœæœ‰å†²çªï¼Œæ•´ä¸ªPATCHéƒ½ä¸ä¼šè¢«é›†æˆï¼Œæ¥æ¥æ¥è§£å†³å†²çªé—®é¢˜123456# æŠŠæ²¡æœ‰å†²çªçš„æ–‡ä»¶å…ˆåˆå¹¶äº†ï¼Œå‰©ä¸‹æœ‰å†²çªçš„ä½œäº†æ ‡è®°git apply PATCH --reject# è¿™é‡Œæ‰‹åŠ¨è§£å†³å†²çª# æŠŠè§£å†³å†²çªçš„å’ŒPATCHé‡Œæ–°åŠ çš„æ–‡ä»¶å…¨éƒ¨addè¿›æ¥ï¼Œå› ä¸ºgit amå¹¶ä¸ä¼šæ”¹å˜indexgit add FIXED_FILESgit am --resolved å‚è€ƒhttp://blog.csdn.net/daydring/article/details/42676987]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Material Designèµ„æº]]></title>
    <url>%2F2015%2F10%2F15%2Fmaterial-design%E8%B5%84%E6%BA%90%2F</url>
    <content type="text"><![CDATA[Material Designæ˜¯è°·æ­Œåœ¨Google I/O 2014æ¨å‡ºäº†å…¨æ–°çš„è®¾è®¡è¯­è¨€ï¼Œå¹¶è£è·2014å¹´çš„ç”¨æˆ·ä½“éªŒæœ€ä½³è´¡çŒ®é‡‘å¥–ã€‚ æ›´æ–°è®°å½•2015-10-15 åˆç¨¿ æ¼”ç¤ºè§†é¢‘ Material Design æ–‡æ¡£å®˜æ–¹ http://www.google.com/design/spec/material-design/introduction.html Material Design ä¸­æ–‡ç‰ˆï¼ˆå®˜ç½‘ç¿»è¯‘è€Œæ¥ï¼‰ é˜…è¯»: http://wiki.jikexueyuan.com/project/material-design/GitHub: https://github.com/1sters/material_design_zh_2PDF: http://pan.baidu.com/s/1fr1gi Material Design ä¸­æ–‡ç‰ˆï¼ˆå®˜ç½‘ç¿»è¯‘è€Œæ¥ï¼‰ é˜…è¯»: http://design.1sters.com/ ï¼ˆå·²å…³åœï¼‰GitHub: https://github.com/1sters/material_design_zh Google Material Design æ­£é«”ä¸­æ–‡ç‰ˆï¼ˆå®˜ç½‘ç¿»è¯‘è€Œæ¥ï¼‰ é˜…è¯»: https://www.gitbook.com/book/wcc723/google_design_translate/detailsGitHub: https://github.com/Wcc723/google_design_translatePDF: http://pan.baidu.com/s/1dD8X1Zj Material Designéå®˜æ–¹ä¸­æ–‡æŒ‡å¯¼æ‰‹å†Œ PDF: http://pan.baidu.com/s/1mg3P45i Androidèµ„æºèµ„æºå¤§åˆé›†https://github.com/lightSky/Awesome-MaterialDesign åå¤§Material Designå¼€æºé¡¹ç›®http://www.csdn.net/article/2014-11-21/2822753-material-design-libs/1 å›¾æ ‡Material icons guide ä¸»é¡µ: http://google.github.io/material-design-icons/GitHub: https://github.com/google/material-design-icons ç½‘é¡µæ¡†æ¶Angular Materialï¼ˆæ§ä»¶æœ€å…¨ï¼Œæ ·å¼ä¸é”™ï¼Œäº¤äº’åŠ¨æ€æ•ˆæœå¤šï¼‰ ä¸»é¡µ: https://material.angularjs.org/GitHub: https://material.angularjs.org/ material uiï¼ˆæ§ä»¶è¾ƒå¤šï¼Œæ ·å¼ä¸é”™ï¼Œäº¤äº’åŠ¨æ€æ•ˆæœå¤šï¼‰ ä¸»é¡µ: http://material-ui.com/GitHub: https://github.com/callemall/material-ui bootstrap-material-designï¼ˆæ§ä»¶æ•°é‡è¿˜è¡Œï¼Œæ ·å¼è¾ƒå¥½ï¼Œäº¤äº’åŠ¨æ€æ•ˆæœè¿˜è¡Œï¼ŒDemoé‡Œéƒ¨åˆ†æ ·å¼æœ‰é”™ä½é—®é¢˜ï¼‰ ä¸»é¡µ: http://fezvrasta.github.io/bootstrap-material-design/GitHub: http://fezvrasta.github.io/bootstrap-material-design/ muicssï¼ˆæ§ä»¶è¾ƒå°‘ï¼Œæ ·å¼æ™®é€šï¼Œäº¤äº’åŠ¨æ€æ•ˆæœå°‘ï¼‰ï¼ˆä½“ç§¯å°ï¼Œcss+js 11.4kï¼‰ ä¸»é¡µ: https://www.muicss.com/GitHub: https://github.com/muicss/mui MaterializeCssï¼ˆæ§ä»¶æ•°é‡è¿˜è¡Œï¼Œæ ·å¼è¾ƒå¥½ï¼Œäº¤äº’åŠ¨æ€æ•ˆæœè¿˜è¡Œï¼‰ ä¸»é¡µ: http://materializecss.com/GitHub: https://github.com/Dogfalo/materialize bootswatché‡Œçš„parperä¸»é¢˜ ä¸»é¡µ: http://bootswatch.com/paper/GitHub: https://github.com/thomaspark/bootswatch jQuery Mobile Material Themeï¼ˆæ§ä»¶è¾ƒå°‘ï¼Œæ ·å¼æ™®é€šï¼Œæ— äº¤äº’åŠ¨æ€æ•ˆæœï¼‰ ä¸»é¡µ: http://store.ququplay.com/]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Material Design</tag>
        <tag>ç½‘é¡µæ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gitå¸¸ç”¨å‘½ä»¤]]></title>
    <url>%2F2015%2F09%2F11%2Fgit%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%2F</url>
    <content type="text"><![CDATA[ä¹‹å‰å†™è¿‡ä¸€ç¯‡Gitå‘½ä»¤ä½¿ç”¨æŒ‡å—ï¼Œä½†æ„Ÿè§‰é‚£ä¸ªå†™çš„å¤ªä¹±ï¼Œä¸æ¥åœ°æ°”ï¼Œæœ‰æ—¶æˆ‘è‡ªå·±æ‰¾ä¸€ä¸ªå‘½ä»¤éƒ½éš¾æ‰¾ï¼Œæ‰€ä»¥ä»Šå¤©å†™ä¸€ç¯‡æ–‡ç« æ•´ç†ä¸€äº›æ¯”è¾ƒåŸºç¡€çš„ï¼Œä½†åˆä¸å¸¸ç”¨çš„ä¸€äº›å‘½ä»¤ï¼Œåé¢ä¼šæ…¢æ…¢æ›´æ–°ã€‚ æäº¤1234# æŠŠæ‰€æœ‰å·²è·Ÿè¸ªçš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºgit add -u# æŠŠæ‰€æœ‰å·²è·Ÿè¸ªå¹¶æœ‰æ›´æ–°çš„æ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“git commit -am "update message" åˆ—å‡ºåˆ†æ”¯123456789# åˆ—å‡ºæœ¬åœ°åˆ†æ”¯git branchæˆ–git branch -v# åˆ—å‡ºæœ¬åœ°å’Œè¿œç¨‹æ‰€æœ‰åˆ†æ”¯git branch -aæˆ–git branch -va åˆ é™¤åˆ†æ”¯1234567# åˆ é™¤æœ¬åœ°åˆ†æ”¯git branck -D/-d &lt;branch&gt;# åˆ é™¤è¿œç¨‹åˆ†æ”¯ï¼Œæ³¨æ„å†’å·å‰æœ‰ç©ºæ ¼git push origin :&lt;åˆ†æ”¯å&gt;# ç­‰ä»·äºgit push origin -d &lt;branch&gt; æ¨é€åˆ†æ”¯12345678# æ¨é€å½“å‰åˆ†æ”¯åˆ°é»˜è®¤remoteä¸Šï¼Œremoteä¸Šæ²¡æœ‰å¯¹åº”åˆ†æ”¯åˆ™è‡ªåŠ¨åˆ›å»ºgit push# æ¨é€å½“å‰åˆ†æ”¯åˆ°æŒ‡å®šremoteï¼Œremoteä¸Šæ²¡æœ‰å¯¹åº”åˆ†æ”¯åˆ™è‡ªåŠ¨åˆ›å»ºgit push &lt;remote&gt;# æ¨é€åˆ°æŒ‡å®šåˆ†æ”¯åˆ°remoteçš„æŒ‡å®šåˆ†æ”¯ä¸Šgit push &lt;remote&gt; &lt;remote_branch&gt;:&lt;loclal_branch&gt; æ‹‰å–è¿œç¨‹åˆ†æ”¯åˆ°æœ¬åœ°1git checkout -b &lt;branch&gt; &lt;remote&gt;/&lt;branch&gt; æˆ–1git checkout --track &lt;remote&gt;/&lt;branch&gt; æ’¤æ¶ˆæäº¤ï¼ˆæœªpushæƒ…å†µä¸‹ï¼‰123git reset --mixed &lt;SHA1&gt; # æ­¤SHA1ä¹‹åçš„commitå…¨éƒ¨æ’¤æ¶ˆï¼Œå¹¶å›é€€indexï¼Œå·¥ä½œç©ºé—´ä»£ç ä¸å˜ï¼Œ--mixedå¯çœç•¥git reset --soft &lt;SHA1&gt; # æ­¤SHA1ä¹‹åçš„commitå…¨éƒ¨æ’¤æ¶ˆï¼Œå·¥ä½œç©ºé—´ä»£ç å’Œindexä¸å˜git reset --hard &lt;SHA1&gt; # æ­¤SHA1ä¹‹åçš„commitå…¨éƒ¨æ’¤æ¶ˆï¼Œå·¥ä½œç©ºé—´ä»£ç å’Œindexå…¨éƒ¨é€€å› æŸ¥çœ‹commitè®°å½•1git log --oneline -n # å•è¡Œæ˜¾ç¤ºæœ€ånä¸ªcommitçš„è®°å½• æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯åšå…³è”1git branch --set-upstream-to=&lt;remote&gt;/&lt;remote_branch&gt; &lt;loclal_branch&gt; æ¨é€æœ¬åœ°å½“å‰æ–°åˆ†æ”¯åˆ°è¿œç¨‹1git push -u origin &lt;branch_name&gt; æŸ¥çœ‹æ—¥å¿—12345678910# å½“å‰åˆ†æ”¯æ—¥å¿—git log# æ‰€æœ‰æœ¬åœ°åˆ†æ”¯æ—¥å¿—git log --all# æŒ‡å®šæœ¬åœ°åˆ†æ”¯æ—¥å¿—git log &lt;branch_name&gt;# æŒ‡å®šè¿œç¨‹åˆ†æ”¯æ—¥å¿—git log origin/&lt;branch_name&gt;# æ‰€æœ‰è¿œç¨‹åˆ†æ”¯æ—¥å¿—git log --all origin é‡å‘½ååˆ†æ”¯1git branch (-m | -M) [&lt;old-branch&gt;] &lt;new-branch&gt;]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Djangoå†…ç½®çš„flatpagesåº”ç”¨]]></title>
    <url>%2F2015%2F09%2F08%2Fdjango%E5%86%85%E7%BD%AE%E7%9A%84flatpages%E5%BA%94%E7%94%A8%2F</url>
    <content type="text"><![CDATA[ä¸çŸ¥é“å¤§å®¶å¹³æ—¶å†™ç½‘ç«™æ—¶ç±»ä¼¼ã€Œå…³äºé¡µé¢ã€ï¼Œã€Œç”¨æˆ·åè®®ã€è¿™ç±»é¡µé¢æ˜¯å¦‚ä½•å¤„ç†çš„ã€‚è¿™é‡Œåˆ—å‡ºäº†è¿™ç±»é¡µé¢çš„ä¸¤ä¸ªç‰¹ç‚¹ï¼š é¡µé¢æ•°æ®ç®€å•ï¼ˆä¸ä¼šæœ‰å¾ˆå¤šåŠ¨æ€æ•°æ®å±•ç¤ºï¼‰; æœ‰æ›´æ–°ä½†é¢‘ç‡ä¸é«˜; å¦‚æœè¦ä¸ºè¿™ç±»é¡µé¢å±•ç¤ºå»ºç«‹å¤šä¸ªæ•°æ®è¡¨ï¼Œæ˜¾ç„¶æ˜¯å¾ˆæµªè´¹çš„è¡Œä¸ºï¼Œä½†å¦‚æœç›´æ¥å†™æˆé™æ€é¡µé¢æ–‡ä»¶ï¼Œæ›´æ–°åˆæ¯”è¾ƒå¾ˆéº»çƒ¦ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨flatpagesæ¥è§£å†³è¿™ç±»é—®é¢˜äº†ã€‚ django.contrib.flatpagesæ˜¯Djangoçš„å†…ç½®appï¼Œç”¨äºæ·»åŠ æ›´æ–°çš„ä¸€äº›ç®€å•çš„é¡µé¢ï¼Œå…·ä½“è®¾ç½®ï¼Œè¯·ç»§ç»­æŸ¥çœ‹ä»¥ä¸‹æ­¥éª¤ã€‚ å®‰è£…é¦–å…ˆç¡®ä¿INSTALLED_APPSä¸­å·²ç»å­˜åœ¨django.contrib.sitesï¼Œå› ä¸ºdjango.contrib.flatpagesä¾èµ–äºæ­¤åŒ…ã€‚settings.py12345678INSTALLED_APPS = ( # ... 'django.contrib.sites', 'django.contrib.flatpages',)# ...# å¦‚æœæ²¡æœ‰è®¾ç½®`SITE_ID`å€¼ï¼Œåˆ™éœ€è¦è®¾ç½®ï¼Œè¿™é‡Œç›´æ¥è®¾ç½®ä¸º1SITE_ID = 1 æ‰§è¡Œpython manage.py migrateå»ºè¡¨ é…ç½®è·¯ç”±é…ç½®å¯å…ˆä»¥æœ‰å¤šç§å½¢å¼urls.pyç¬¬ä¸€ç§ï¼ˆéœ€æ”¾åœ¨æœ€åï¼Œæ¨èï¼‰1234from django.contrib.flatpages import viewsurlpatterns += [ url(r&apos;^(?P&lt;url&gt;.*/)$&apos;, views.flatpage),] ç¬¬äºŒç§ï¼ˆæ¯ä¸ªé¡µé¢éƒ½éœ€è¦å†™ä¸€ä¸ªurlï¼Œæ¨èï¼‰12345from django.contrib.flatpages import viewsurlpatterns = [ url(r&apos;^about-us/$&apos;, views.flatpage, &#123;&apos;url&apos;: &apos;/about-us/&apos;&#125;, name=&apos;about&apos;), url(r&apos;^license/$&apos;, views.flatpage, &#123;&apos;url&apos;: &apos;/license/&apos;&#125;, name=&apos;license&apos;),] æˆ–è€…ï¼Œå¦‚æœä½ ä¸æƒ³é…ç½®è·¯ç”±ï¼Œè¿˜æœ‰ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•ï¼Œç›´æ¥åœ¨settings.pyçš„é‡Œæ·»åŠ ä¸­é—´ä»¶1234MIDDLEWARE_CLASSES = ( # ... &apos;django.contrib.flatpages.middleware.FlatpageFallbackMiddleware&apos;,) ä¸ºç¡®ä¿é…ç½®ç”Ÿæ•ˆï¼Œä¿é™©çš„æ–¹æ³•æ˜¯æŠŠdjango.contrib.flatpages.middleware.FlatpageFallbackMiddlewareæ”¾åœ¨æœ€åä¸€è¡Œ ç®¡ç†flatpagesé»˜è®¤çš„ä½ å¯ä»¥ç™»å½•è¶…çº§ç®¡ç†å‘˜åå°ï¼ˆå¦‚æœå¼€å¯ï¼‰ï¼Œæ‰¾åˆ°Flat pagesï¼Œè¿›å»ç‚¹å‡»æ·»åŠ ï¼Œå¯ä»¥çœ‹åˆ°å¯é…ç½®çš„é€‰é¡¹æœ‰ï¼ŒURL Title Content Site Enable comments Registration required Template name æ•°æ®é¡¹è¯´æ˜ URL: é¡µé¢æ‰€å¤„çš„ URLï¼Œä¸åŒ…æ‹¬åŸŸåï¼Œä½†æ˜¯åŒ…å«å‰å¯¼æ–œæ  (ä¾‹å¦‚ /about/contact/ ) Title: é¡µé¢çš„æ ‡é¢˜ï¼Œæ¡†æ¶ä¸å¯¹å®ƒä½œä»»ä½•ç‰¹æ®Šå¤„ç†ã€‚ç”±ä½ é€šè¿‡æ¨¡æ¿æ¥æ˜¾ç¤ºå®ƒ Content: é¡µé¢çš„å†…å®¹ (å³ HTML é¡µé¢)ï¼Œæ¡†æ¶ä¸ä¼šå¯¹å®ƒä½œä»»ä½•ç‰¹åˆ«å¤„ç†ã€‚ç”±ä½ è´Ÿè´£ä½¿ç”¨æ¨¡æ¿æ¥æ˜¾ç¤º Site: é¡µé¢æ”¾ç½®çš„ç«™ç‚¹ï¼Œè¯¥é¡¹è®¾ç½®é›†æˆäº† Django å¤šç«™ç‚¹æ¡†æ¶ Enable comments: æ˜¯å¦å…è®¸è¯¥ç®€å•é¡µé¢ä½¿ç”¨è¯„è®ºï¼Œæ¡†æ¶ä¸å¯¹æ­¤åšä»»ä½•ç‰¹åˆ«å¤„ç†ã€‚ä½ å¯åœ¨æ¨¡æ¿ä¸­æ£€æŸ¥è¯¥å€¼å¹¶æ ¹æ®éœ€è¦æ˜¾ç¤ºè¯„è®ºçª—ä½“ Registration required: æ˜¯å¦æ³¨å†Œç”¨æˆ·æ‰èƒ½æŸ¥çœ‹æ­¤ç®€å•é¡µé¢ï¼Œè¯¥è®¾ç½®é¡¹é›†æˆäº† Djangos éªŒè¯/ç”¨æˆ·æ¡†æ¶ï¼Œè¯¥æ¡†æ¶äºç¬¬åäºŒç« è¯¦è¿°ã€‚ Template name: ç”¨æ¥è§£æè¯¥ç®€å•é¡µé¢çš„æ¨¡æ¿åç§°ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯é€‰é¡¹ï¼Œå¦‚æœæœªæŒ‡å®šæ¨¡æ¿æˆ–è¯¥æ¨¡æ¿ä¸å­˜åœ¨ï¼Œç³»ç»Ÿä¼šé€€è€Œä½¿ç”¨é»˜è®¤æ¨¡æ¿ flatpages/default.htmlï¼ˆæˆ‘åœ¨Django1.8.4é‡Œæ­»æ´»æ²¡æ‰¾åˆ°ï¼Œåªå¥½è‡ªå·±å†™å¥½ä¸€ä¸ªæ‰”è¿›å»ï¼‰ å½“æ·»åŠ ç›¸åº”çš„æ•°æ®åï¼Œå‰©ä¸‹å·¥ä½œå°±äº¤ç»™flatpageså§ï¼Œå¦‚æœä½ æ˜¯ä½¿ç”¨ä¸­é—´ä»¶å½¢å¼çš„ï¼Œåˆ™flatpagesä¼šåœ¨é…ç½®å®Œæ‰€æœ‰urls.pyåï¼Œæ²¡æœ‰æ‰¾åˆ°é…ç½®åˆ°å¯¹åº”çš„URLï¼Œæ‰ä¼šåˆ°flatpagesä¸­æŸ¥æ‰¾ï¼Œå¦‚æœè¿˜æ˜¯æ‰¾ä¸åˆ°ï¼Œåˆ™ä¼šå¼•å‘Http404å¼‚å¸¸ï¼Œå³FlatpageFallbackMiddlewareåªåœ¨404æ—¶ä¼šè¢«æ¿€æ´»ï¼Œè€Œä¸ä¼šåœ¨500æˆ–å…¶å®ƒé”™è¯¯å“åº”æ—¶è¢«æ¿€æ´»ã€‚ å¦‚æœä½ éœ€è¦è‡ªå·±å®šåˆ¶ï¼Œåˆ™å¯ä»¥é’ˆå¯¹django/contrib/flatpages/models.pyè‡ªå·±å†™å¢åˆ æ”¹æ–¹æ³•å°±å¯ä»¥ã€‚models.py12345678910111213141516171819202122232425262728class FlatPage(models.Model): url = models.CharField(_('URL'), max_length=100, db_index=True) title = models.CharField(_('title'), max_length=200) content = models.TextField(_('content'), blank=True) enable_comments = models.BooleanField(_('enable comments'), default=False) template_name = models.CharField(_('template name'), max_length=70, blank=True, help_text=_( "Example: 'flatpages/contact_page.html'. If this isn't provided, " "the system will use 'flatpages/default.html'." ), ) registration_required = models.BooleanField(_('registration required'), help_text=_("If this is checked, only logged-in users will be able to view the page."), default=False) sites = models.ManyToManyField(Site) class Meta: db_table = 'django_flatpage' verbose_name = _('flat page') verbose_name_plural = _('flat pages') ordering = ('url',) def __str__(self): return "%s -- %s" % (self.url, self.title) def get_absolute_url(self): # Handle script prefix manually because we bypass reverse() return iri_to_uri(get_script_prefix().rstrip('/') + self.url) æ¨¡æ¿é»˜è®¤æ¨¡æ¿è·¯å¾„ä¸ºflatpages/default.html123456789&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;&#123;&#123; flatpage.title &#125;&#125;&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&#123;&#123; flatpage.content &#125;&#125;&lt;/body&gt;&lt;/html&gt; åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ä¸å¤ªå¯èƒ½ä¼šä½¿ç”¨é»˜è®¤çš„æ¨¡æ¿ï¼Œä½ å¯èƒ½éœ€è¦è‡ªå·±å†™ä¸€ä¸ªæ¼‚äº®æ¨¡æ¿ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªå¤´éƒ¨å’Œåº•éƒ¨ï¼Œå¤´éƒ¨å¯èƒ½è¿˜éœ€è¦æ·»åŠ requeset.useræ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ç­‰ã€‚ é«˜çº§åº”ç”¨è·å–flatpageså®ä¾‹åˆ—è¡¨12&#123;% load flatpages %&#125;&#123;% get_flatpages as flatpages %&#125; è·å–å½“å‰ç”¨æˆ·èƒ½æ‰“å¼€çš„flatpageså®ä¾‹åˆ—è¡¨12&#123;% load flatpages %&#125;&#123;% get_flatpages for request.user as about_pages %&#125; è·å–é“¾æ¥ä»¥/about/ä¸ºå¼€å¤´çš„flatpageså®ä¾‹åˆ—è¡¨12&#123;% load flatpages %&#125;&#123;% get_flatpages &apos;/about/&apos; as about_pages %&#125; ä¸Šé¢ä¸¤ç§ä¹Ÿå¯ä»¥ç»„åˆä½¿ç”¨12&#123;% load flatpages %&#125;&#123;% get_flatpages &apos;/about/&apos; for someuser as about_pages %&#125; ç”Ÿæˆsitemaps.xml123456789101112from django.conf.urls import urlfrom django.contrib.flatpages.sitemaps import FlatPageSitemapfrom django.contrib.sitemaps.views import sitemap urlpatterns = [ # ... # the sitemap url(r&apos;^sitemap\.xml$&apos;, sitemap, &#123;&apos;sitemaps&apos;: &#123;&apos;flatpages&apos;: FlatPageSitemap&#125;&#125;, name=&apos;django.contrib.sitemaps.views.sitemap&apos;),] å®¹æ˜“è¸©çš„å‘æœ€å¥½æŠŠsettings.pyé‡Œçš„APPEND_SLASHè®¾ç½®ä¸ºTureï¼Œ è¿™æ ·ä¸ç®¡æ˜¯/about-usè¿˜æ˜¯/about-us/éƒ½å¯ä»¥è®¿é—®åˆ°ã€‚ å‚è€ƒèµ„æ–™ https://docs.djangoproject.com/en/1.8/ref/contrib/flatpages/ http://djangobook.py3k.cn/2.0/chapter16/]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Django</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨Synergyå®ç°å¤šå°ç”µè„‘å…±äº«ä¸€å¥—é”®é¼ ]]></title>
    <url>%2F2015%2F08%2F29%2F%E4%BD%BF%E7%94%A8synergy%E5%AE%9E%E7%8E%B0%E5%A4%9A%E5%8F%B0%E7%94%B5%E8%84%91%E5%85%B1%E4%BA%AB%E4%B8%80%E5%A5%97%E9%94%AE%E9%BC%A0%2F</url>
    <content type="text"><![CDATA[å› ä¸ºå®¶é‡Œæœ‰ä¸€å°å°å¼å’Œä¸€å°ç¬”è®°æœ¬ï¼Œå°å¼Windows10ä¸ºæ—¥å¸¸ä½¿ç”¨ï¼Œç¬”è®°æœ¬Ubuntu&amp;Windows7ï¼Œä»¥å‰ä¸€ç›´åœ¨Windowsä¸Šæ•²ä»£ç ï¼Œç°åœ¨æ­£è½¬å‘Ubuntuï¼Œä½†å®¶é‡Œæ¡Œå­ä¸Šæ‘†æ”¾ä¸¤å°ç”µè„‘å·²ç»æœ‰ç‚¹æŒ¤äº†ï¼Œå¦‚æœå†æ¥ä¸¤å¥—é”®é¼ é‚£å°±æˆäºŒæ‰‹ç”µè„‘é…ä»¶ç”©å–é“ºäº†ï¼Œæ‰€ä»¥ä¸Šç½‘æŸ¥äº†ä¸‹çœ‹çœ‹æœ‰æ²¡æœ‰è½¯ä»¶èƒ½å®ç°ä¸¤å°ç”µè„‘å…±äº«ä¸€å¥—é”®ç›˜çš„ï¼Œè¿˜çœŸæ‰¾åˆ°äº†ä¸€æ¬¾å«Synergyçš„è½¯ä»¶ï¼Œæ”¯æŒWindows, Mac OS X, Linuxä¸‰å¤§ç³»ç»Ÿï¼Œè½¯ä»¶æ˜¯ä¸‹è½½æ”¶è´¹ï¼Œä½¿ç”¨ä½¿ç”¨å…è´¹ï¼Œå®˜ç½‘ä¸Šæ ‡æ˜åŸºç¡€ç‰ˆ$10ï¼Œé«˜çº§ç‰ˆ$29ã€‚ä¸‹é¢æˆ‘è¯´è¯´æˆ‘è‡ªå·±çš„é…ç½®è¿‡ç¨‹ã€‚ å®‰è£…åœ¨Ubuntué‡Œæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…1sudo apt-get install synergy åœ¨Windwosä¸ŠåŒå‡»å®‰è£…ã€‚ Ubuntuæˆ‘å®‰è£…çš„æ˜¯1.6.2ï¼ŒWindwosä¸Šæ˜¯1.7.4 x64 é…ç½®æœåŠ¡å™¨è®¾ç½® synergyéœ€è¦ä¸€å°ç”µè„‘åšä¸ºæœåŠ¡ç«¯ï¼Œå…¶å®ƒç”µè„‘åšä¸ºå®¢æˆ·ç«¯æ¥è¿æ¥æœåŠ¡ç«¯ã€‚æœ¬æ¥æ˜¯æˆ‘æƒ³é€‰æ‹©Ubuntuåšä¸ºæœåŠ¡ç«¯çš„ï¼Œä½†è®¾ç½®å¥½åé“¾æ¥å¤±è´¥æç¤ºä¸ºWARNING: failed to connect to server: incompatible client 1.5ï¼Œä¼¼ä¹æ˜¯ä¸å…¼å®¹ï¼Œä½†æˆ‘çš„å®¢æˆ·ç«¯ç‰ˆæœ¬æ˜¯1.6.2ä¸æ˜¯1.5å•Šï¼Œæ‰€ä»¥ä½œç½¢ï¼Œåªå¾—é€‰ç”¨Windwosæ¥åšæœåŠ¡ç«¯ã€‚ æˆ‘ä»¬é€‰ç”¨Windwosæ¥åšæœåŠ¡ç«¯ï¼Œåœ¨Windwosæ‰“å¼€è½¯ä»¶ï¼Œé€‰æ‹©ã€Œserverã€ï¼›Synergy-WindowsæœåŠ¡ç«¯é…ç½®é¦–é¡µ.png) ç‚¹å‡»ã€Œè®¾ç½®æœåŠ¡ç«¯ã€è¿›è¡Œæ·»åŠ å®¢æˆ·ç«¯æ“ä½œï¼›Synergy-WindowsæœåŠ¡ç«¯æ·»åŠ å®¢æˆ·ç«¯-01.png) ä»å³ä¸Šè§’æ‰‹åŠ¨ç”µè„‘å›¾æ ‡åˆ°ä¸‹æ–¹çš„æ ¼å­é‡Œï¼Œè¿™é‡Œçš„æ ¼å¼ä½ç½®å¯¹åº”ä½ å½“å‰å‡ å°ç”µè„‘çš„å®é™…çš„ä»¥æˆ‘æŠŠç”µè„‘å›¾æ ‡æ‹–åˆ°ä¸­é—´å·¦ä¾§çš„æ ¼å­é‡Œï¼›Synergy-WindowsæœåŠ¡ç«¯æ·»åŠ å®¢æˆ·ç«¯-02.png) åŒå‡»ç”µè„‘å›¾æ ‡è¿›è¡Œç¼–è¾‘ï¼Œè¿™é‡Œæˆ‘ä»¬åªéœ€è¦è¾“å…¥å®¢æˆ·ç«¯ç”µè„‘çš„è®¡ç®—æœºåï¼Œå…¶å®ƒéƒ½é»˜è®¤ï¼›Synergy-WindowsæœåŠ¡ç«¯æ·»åŠ å®¢æˆ·ç«¯-03.png) è®¾ç½®å¥½åç‚¹å‡»å†æ¬¡okï¼Œå›åˆ°è®¾ç½®é¦–é¡µï¼Œç‚¹å‡»ã€Œå¼€å§‹ã€å¯åŠ¨æœåŠ¡ç«¯ï¼›Synergy-WindowsæœåŠ¡ç«¯å¯åŠ¨.png) å®¢æˆ·ç«¯è®¾ç½® å®¢æˆ·ç«¯æ¯”è¾ƒç®€å•ï¼Œåœ¨Ubuntuä¸Šæ‰“å¼€Synergyï¼Œé€‰æ‹©ã€ŒClientã€ï¼Œåœ¨Server IPé‡Œè¾“å…¥æœåŠ¡ç«¯çš„IPï¼Œç‚¹å‡»ã€ŒStartã€å³å¯ï¼›Synergy-Ubuntuå®¢æˆ·ç«¯é…ç½®é¦–é¡µ.png) å¼€æœºè‡ªå¯è¦åœ¨Ubuntuå¼€æœºåœ¨ç™»å½•ç•Œé¢å‰å¯åŠ¨synergyï¼Œç¼–è¾‘/etc/lightdm/lightdm.confæ–‡ä»¶æ·»åŠ display-setup-script=/usr/bin/synergyc 192.168.9.102ï¼ŒæŠŠ192.168.9.102æ¢æˆä½ è‡ªå·±çš„synergyæœåŠ¡ç«¯IPã€‚ å®Œæˆåˆ°è¿™é‡Œä½ å°±ä¼šå‘ç°ä½ å¯é¼ æ ‡å¯ä»¥åœ¨ä¸¤ä¸ªç”µè„‘å±å¹•ä¸Šç§»åŠ¨äº†ï¼Œåƒæˆ‘åˆšæ‰é…ç½®çš„æ˜¯åœ¨Windowså·¦ä¾§æ·»åŠ äº†Ubuntuï¼Œæ‰€ä»¥å½“æˆ‘åœ¨Windowsä¸ŠæŠŠé¼ æ ‡å‘å·¦ç§»åŠ¨ï¼Œå¹¶ç§»åˆ°è¾¹ç•Œï¼Œå†ç»§ç»­å·¦ç§»æ—¶ï¼Œé¼ æ ‡å°±ä¼šå‡ºç°åœ¨Ubuntuå±å¹•ä¸Šï¼Œé”®ç›˜çš„è¡Œä¸ºè·Ÿéšé¼ æ ‡çš„ï¼Œå³é¼ æ ‡åœ¨å“ªä¸ªå±å¹•ï¼Œé”®ç›˜è¾“å…¥å°±å¯¹åº”å“ªä¸ªå±å¹•çš„ç³»ç»Ÿã€‚ ç½‘ä¸Šè¯´Synergyæ”¯æŒåœ¨ä¸åŒç”µè„‘é—´å¤åˆ¶ç²˜è´´ï¼Œç›®å‰æˆ‘è‡ªå·±æ²¡æœ‰è¯•æˆåŠŸï¼Œæœ‰çŸ¥é“æœ‹å‹å¯ä»¥å’Œè¯´ã€‚ ç›¸å…³é¡¹ç›®ä¸»é¡µï¼šhttps://github.com/synergy/synergy æ›´æ–°è®°å½•2015-08-29 åˆç¨¿2015-09-03 è¡¥å……Ubuntuå®¢æˆ·ç«¯è‡ªå¯æ˜è¯´]]></content>
      <categories>
        <category>ä¼˜åŒ–è¾…åŠ©</category>
      </categories>
      <tags>
        <tag>Synergy</tag>
        <tag>å…±äº«</tag>
        <tag>é”®ç›˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ubuntuä»14.10å‡çº§åˆ°15.04]]></title>
    <url>%2F2015%2F08%2F29%2Fubuntu%E4%BB%8E14-10%E5%8D%87%E7%BA%A7%E5%88%B015-04%2F</url>
    <content type="text"><![CDATA[ubuntu-15.04-logo.jpg) ubuntu15.04å·²ç»å‘å¸ƒå‡ ä¸ªæœˆäº†ï¼Œä»Šå¤©å‡†å¤‡æŠŠå®¶é‡Œçš„ç¬”è®°æœ¬å‡çº§ä¸‹ï¼Œåœ¨è¿™è®°å½•ä¸‹ï¼Œå› ä¸ºç¬”è®°æœ¬æ˜¯14.10çš„æ‰€ä»¥ä¸‹é¢å†…å®¹åªé€‚ç”¨äºä»14.10å‡çº§åˆ°15.04çš„ï¼Œå¦‚æœä½ çš„ç³»ç»Ÿæ˜¯14.04ï¼Œåˆ™éœ€è¦å…ˆå‡çº§åˆ°14.10ç„¶åå†å‡çº§åˆ°15.04ã€‚ å…ˆæ£€æŸ¥ç³»ç»Ÿæ›´æ–°ï¼Œå¦‚æœæœ‰åˆ™è¿›è¡Œæ›´æ–°ï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤1sudo apt-get update &amp;&amp; sudo apt-get dist-upgrade ç„¶åæ£€æŸ¥æ˜¯å¦æœ‰å¯ç”¨çš„ç‰ˆæœ¬1sudo update-manager -d å›è½¦åä¼šå¼¹å‡ºè½¯ä»¶æ›´æ–°å™¨ï¼Œç­‰æ£€æŸ¥å®Œæˆåç‚¹å‡»å‡çº§ï¼Œåé¢è¿˜ä¼šå‡ºæ¥å¾ˆå¤šä¸ªç¡®è®¤å¯¹è¯æ¡†ï¼Œä¸€è·¯ç¡®å®šä¸‹å»å°±å¥½ã€‚ æœ€åç‚¹å‡»å¼€å§‹å‡çº§ï¼Œç„¶åå°±ç­‰ç€æ›´æ–°è‡ªåŠ¨ä¸‹è½½æ›´æ–°å§ã€‚ubuntu-14.10-15.04-01.png) æ›´æ–°å®Œåé‡å¯ç³»ç»Ÿå³å¯å®Œæˆå‡çº§ã€‚ubuntu-15.04-info.png)]]></content>
      <categories>
        <category>å…¶å®ƒ</category>
      </categories>
      <tags>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[XY-Problem]]></title>
    <url>%2F2015%2F07%2F04%2Fxy-problem%2F</url>
    <content type="text"><![CDATA[XYé—®é¢˜ï¼Œä¸€ä¸ªå¯¹æˆ‘æ¥è¯´æ¯”è¾ƒæ–°çš„è¯æ±‡ï¼Œä½†å¯èƒ½æˆ‘ä»¬å¤§å®¶å¹³æ—¶éƒ½é‡åˆ°è¿‡è¿™ç§é—®é¢˜ã€‚ å¯¹äºâ€œXYé—®é¢˜â€ï¼Œä¸åŒçš„äººæœ‰ä¸åŒçš„è§£é‡Šï¼š ä½ æƒ³åšXï¼Œä½†ä½ è®¤ä¸ºYæ˜¯å®ç°Xæœ€å¥½çš„æ–¹æ³•ã€‚ä½ ä¸é—®å…³äºXçš„äº‹ï¼Œåè€Œé—®èµ·Yçš„äº‹ã€‚ â€” æ¥è‡ª Re: sequencial file naming by Abigail ä½ å°è¯•å»åšXï¼Œä½†ä½ æƒ³èµ·äº†Yæ–¹æ¡ˆã€‚äºæ˜¯ï¼Œä½ å¼€å§‹é—®å…³äºYæ–¹æ¡ˆçš„äº‹ï¼Œå®Œå…¨ä¸æXã€‚é—®é¢˜æ˜¯ï¼Œä¹Ÿè®¸ä¼šæœ‰æ›´å¥½çš„æ–¹æ¡ˆï¼Œä½†å¦‚æœä½ ä¸æè¿°Xæ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬æ ¹æœ¬æ— æ³•å‡ºè°‹åˆ’ç­–ã€‚â€” æ¥è‡ª Re: How do I keep the command line from eating the backslashes? by revdiablo æœ‰äº›äººé—®å¦‚ä½•å»åšYï¼Œä½†ä»–ä»¬å®é™…æ˜¯æƒ³åšXã€‚ä»–ä»¬ä¹‹æ‰€ä»¥é—®å¦‚ä½•åšYï¼Œå› ä¸ºä»–ä»¬ç›¸ä¿¡Yæ˜¯å®ç°Xæœ€å¥½çš„æ–¹æ³•ã€‚äººä»¬ç”¨å„ç§çš„â€œè¯•è¯•è¿™ä¸ªâ€æ¥ç»™äºˆå¸®åŠ©ï¼Œè€Œç»“æœå¾€å¾€æ˜¯â€œè¿™ä¸è¡Œï¼Œå› ä¸ºâ€¦.â€ã€‚è¿™ç»™æˆ‘ä»¬æç¤ºï¼Œä¾èµ–ç¯å¢ƒçš„ä¸åŒï¼Œä½ çš„é—®é¢˜å¯èƒ½ä¼šæœ‰å…¶å®ƒæ›´å¥½çš„æ–¹æ¡ˆã€‚â€” æ¥è‡ª Re: Re: Re: Re: regex to validate e-mail addresses and phone numbers by Limbic~Region åœ¨ä¸ç†è§£æ›´å¤§çš„é—®é¢˜(ä¸Šä¸‹æ–‡)Xçš„æƒ…å†µä¸‹ï¼Œå»å›ç­”é—®é¢˜Yï¼Œå¾€å¾€å®Œå…¨æ— åŠ©äºè§£å†³é—®é¢˜Xã€‚â€” æ¥è‡ª &#x6d;&#49;&#x38;&#x7a;&#x74;&#53;&#109;&#117;&#113;&#x39;&#x2e;&#102;&#115;&#x66;&#x5f;&#x2d;&#x5f;&#x40;&#104;&#97;&#x6c;&#x66;&#100;&#111;&#109;&#101;&#46;&#x68;&#111;&#108;&#x64;&#x69;&#x74;&#46;&#x63;&#x6f;&#x6d; by merlyn ä¹Ÿå«åšâ€œè¿‡æ—©ä¸‹ç»“è®ºâ€ï¼šæœ‰ç–‘é—®çš„äººå¸Œæœ›èƒ½è§£å†³ä¸€äº›é˜è¿°çš„å¹¶ä¸æ¸…æ¥šçš„é—®é¢˜Xï¼Œä»–ä»¬æ–­å®šYæ˜¯è§£å†³æ–¹æ¡ˆçš„ä¸€ä¸ªè¦ç´ ï¼Œäºæ˜¯ä»–ä»¬å°±è¯¢é—®å¦‚ä½•å®ç°Yã€‚â€” from &#80;&#x69;&#x6e;&#101;&#x2e;&#71;&#72;&#80;&#x2e;&#52;&#46;&#x32;&#x31;&#x2e;&#48;&#x30;&#48;&#x39;&#x30;&#54;&#x31;&#x32;&#49;&#48;&#x35;&#55;&#48;&#x2e;&#56;&#x38;&#48;&#48;&#x2d;&#x31;&#x30;&#x30;&#x30;&#x30;&#48;&#x40;&#x68;&#x70;&#112;&#108;&#x75;&#x73;&#x30;&#x33;&#46;&#99;&#x65;&#x72;&#x6e;&#x2e;&#x63;&#104; by Alan J. Flavell XYé—®é¢˜æ˜¯æŒ‡ï¼Œå½“ä½ éœ€è¦åšXæ—¶ï¼Œä½ è®¤ä¸ºå¯ä»¥ç”¨Yæ¥å®ç°Xï¼Œäºæ˜¯ä½ é—®å¦‚ä½•åšYï¼Œè€Œä½ å®é™…åº”è¯¥åšçš„æ˜¯è¯´æ˜ä½ çš„Xé—®é¢˜æ˜¯ä»€ä¹ˆã€‚ä¹Ÿè®¸ä¼šæœ‰ä¸€ä¸ªæ¯”Yæ›´å¥½çš„Zè§£å†³æ–¹æ¡ˆï¼Œä½†å¦‚æœXæ²¡æœ‰è¢«è¯´å‡ºæ¥ï¼Œæ²¡æœ‰äººèƒ½æå‡ºæ›´å¥½çš„å»ºè®®ã€‚â€” æ¥è‡ª &#x73;&#x6c;&#114;&#x6e;&#x38;&#x39;&#x75;&#109;&#56;&#106;&#x2e;&#53;&#x67;&#57;&#46;&#116;&#x61;&#x64;&#x6d;&#x63;&#64;&#109;&#x61;&#x67;&#x6e;&#97;&#46;&#109;&#101;&#116;&#x72;&#x6f;&#110;&#101;&#x74;&#x2e;&#99;&#111;&#109; by Tad McClellan å½“æœ‰äººæ¥é—®å¦‚ä½•åšä¸€äº›å‚»äº‹æ—¶ï¼Œæˆ‘çœŸçš„ä¸çŸ¥é“å¦‚ä½•å»åšã€‚æˆ‘åªèƒ½ç…§å®å›ç­”ï¼Œè¯´æˆ‘å¯ä¸è¦å‘Šè¯‰åˆ«äººå¦‚ä½•åšå‚»äº‹â€¦.. ä½†æ˜¯ï¼Œä¸€æ—¦æˆ‘è¿™æ ·åšäº†ï¼Œäººä»¬å°±ä¼šè¹¦åˆ°æˆ‘é¢å‰è‡ªä½œèªæ˜ã€‚è¿™ç§äº‹æƒ…ç»å¸¸å‘ç”Ÿã€‚(â€œåˆ«å‘€ï¼Œå¸®å¸®è¿™ä¸ªå¯æ€œçš„äººå§ï¼Œå¦‚æœä½ çŸ¥é“ä»–ä»¬çœŸçš„éœ€è¦çŸ¥é“å¦‚ä½•åšï¼Œä½ å¹²å˜›ä¸å‘Šè¯‰ä»–ä»¬å‘¢ï¼Ÿâ€) . . . å¦ä¸€æ–¹é¢ï¼Œæˆ‘å¯ä»¥ä»å¦ä¸€ä¸ªå±‚é¢ä¸Šå›ç­”ä»–ä»¬ï¼Œç»™ä»–ä»¬ä¸€ä¸ªæ›´å¥½çš„æ–¹æ¡ˆï¼Œä½†è¿™ç§æ‰§æ•™ä¹Ÿè®¸ä¼šè®©ä»–ä»¬è„¸ä¸Šä¸å¥½çœ‹ã€‚å¦‚æœä»–ä»¬æ¥å—å€’å¥½ï¼Œå¦‚æœä¸æ¥å—ï¼Œä½ ä¼šå¾ˆä¼¤å¿ƒçœ‹åˆ°è‡ªå·±çš„åŠªåŠ›å’Œå¥½å»ºè®®è¢«å¿½ç•¥ã€‚åŒæ ·ï¼Œäººä»¬ä¼šè¹¦åˆ°ä½ é¢å‰æŒ‡è´£ä½ æ²¡æœ‰ç›´æ¥å›ç­”ä»–ä»¬çš„é—®é¢˜ã€‚ï¼ˆâ€œè°è¦ä½ å‘Šè¯‰ä»–è¯¥æ€ä¹ˆåšäº†ï¼Œä½ åªè¦å›ç­”ä»–çš„é—®é¢˜å°±è¡Œäº†ã€‚â€ï¼‰ . . . æˆ‘æƒ³è¿™ç§ä¸¤ç§å›ç­”æ–¹å¼ç”Ÿæ´»ä¸­éƒ½ç»å¸¸ä¼šæœ‰ã€‚ä½†ä¹Ÿè®¸æ²¡æœ‰ä¸€ç§å›ç­”ä¼šå¾—åˆ°å¥½ç»“æœã€‚â€” æ¥è‡ª &#54;&#108;&#x6e;&#x62;&#x37;&#x30;&#36;&#x6c;&#99;&#x74;&#x24;&#49;&#64;&#109;&#x6f;&#110;&#x65;&#116;&#46;&#x6f;&#x70;&#x2e;&#x6e;&#x65;&#x74; by MJD éƒ¨åˆ†å†…å®¹å¼•ç”¨è‡ªå¤–åˆŠITè¯„è®º]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonä¸­çš„UUID]]></title>
    <url>%2F2015%2F06%2F02%2Fpython%E4%B8%AD%E7%9A%84UUID%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹ï¼ˆç»´åŸºç™¾ç§‘ï¼‰ é€šç”¨å”¯ä¸€è¯†åˆ«ç ï¼ˆè‹±è¯­ï¼šUniversally Unique Identifierï¼Œç®€ç§°UUIDï¼‰æ˜¯ä¸€ç§è½¯ä»¶å»ºæ„çš„æ ‡å‡†ï¼Œäº¦ä¸ºå¼€æ”¾è½¯ä»¶åŸºé‡‘ä¼šç»„ç»‡åœ¨åˆ†æ•£å¼è®¡ç®—ç¯å¢ƒé¢†åŸŸçš„ä¸€éƒ¨ä»½ã€‚UUIDçš„ç›®çš„ï¼Œæ˜¯è®©åˆ†æ•£å¼ç³»ç»Ÿä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œéƒ½èƒ½æœ‰å”¯ä¸€çš„è¾¨è¯†èµ„è®¯ï¼Œè€Œä¸éœ€è¦é€è¿‡ä¸­å¤®æ§åˆ¶ç«¯æ¥åšè¾¨è¯†èµ„è®¯çš„æŒ‡å®šã€‚å¦‚æ­¤ä¸€æ¥ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥å»ºç«‹ä¸ä¸å…¶å®ƒäººå†²çªçš„UUIDã€‚åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œå°±ä¸éœ€è€ƒè™‘èµ„æ–™åº“å»ºç«‹æ—¶çš„åç§°é‡å¤é—®é¢˜ã€‚ç›®å‰æœ€å¹¿æ³›åº”ç”¨çš„UUIDï¼Œæ˜¯å¾®è½¯å…¬å¸çš„å…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆGUIDï¼‰ï¼Œè€Œå…¶ä»–é‡è¦çš„åº”ç”¨ï¼Œåˆ™æœ‰Linux ext2/ext3æ¡£æ¡ˆç³»ç»Ÿã€LUKSåŠ å¯†åˆ†åŒºã€GNOMEã€KDEã€Mac OS Xç­‰ç­‰ã€‚å¦å¤–æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨e2fsprogså¥—ä»¶ä¸­çš„UUIDå‡½å¼åº“æ‰¾åˆ°å®ç°ã€‚[3] å®šä¹‰ :UUIDæ˜¯ç”±ä¸€ç»„32ä½æ•°çš„16è¿›ä½æ•°å­—æ‰€æ„æˆï¼Œæ˜¯æ•…UUIDç†è®ºä¸Šçš„æ€»æ•°ä¸º1632=2128ï¼Œçº¦ç­‰äº3.4 x 1038ã€‚ä¹Ÿå°±æ˜¯è¯´è‹¥æ¯çº³ç§’äº§ç”Ÿ1å…†ä¸ªUUIDï¼Œè¦èŠ±100äº¿å¹´æ‰ä¼šå°†æ‰€æœ‰UUIDç”¨å®Œï¼Œï¼Œå®ƒä¿è¯å¯¹åœ¨åŒä¸€æ—¶ç©ºä¸­çš„æ‰€æœ‰æœºå™¨éƒ½æ˜¯å”¯ä¸€çš„ï¼ˆé‡å¤æœºç‡è¯·å‚è€ƒéšæœºUUIDçš„é‡å¤æœºç‡ï¼‰ã€‚ ç®—æ³• uuid1()â€”â€”åŸºäºæ—¶é—´æˆ³ç”±MACåœ°å€ã€å½“å‰æ—¶é—´æˆ³ã€éšæœºæ•°ç”Ÿæˆã€‚å¯ä»¥ä¿è¯å…¨çƒèŒƒå›´å†…çš„å”¯ä¸€æ€§ï¼Œä½†MACçš„ä½¿ç”¨åŒæ—¶å¸¦æ¥å®‰å…¨æ€§é—®é¢˜ï¼Œå±€åŸŸç½‘ä¸­å¯ä»¥ä½¿ç”¨IPæ¥ä»£æ›¿MACã€‚ uuid2()â€”â€”åŸºäºåˆ†å¸ƒå¼è®¡ç®—ç¯å¢ƒDCEï¼ˆPythonä¸­æ²¡æœ‰è¿™ä¸ªå‡½æ•°ï¼‰ç®—æ³•ä¸uuid1ç›¸åŒï¼Œä¸åŒçš„æ˜¯æŠŠæ—¶é—´æˆ³çš„å‰4ä½ç½®æ¢ä¸ºPOSIXçš„UIDã€‚å®é™…ä¸­å¾ˆå°‘ç”¨åˆ°è¯¥æ–¹æ³•ã€‚ uuid3()â€”â€”åŸºäºåå­—çš„MD5æ•£åˆ—å€¼é€šè¿‡è®¡ç®—åå­—å’Œå‘½åç©ºé—´çš„MD5æ•£åˆ—å€¼å¾—åˆ°ï¼Œä¿è¯äº†åŒä¸€å‘½åç©ºé—´ä¸­ä¸åŒåå­—çš„å”¯ä¸€æ€§ï¼Œå’Œä¸åŒå‘½åç©ºé—´çš„å”¯ä¸€æ€§ï¼Œä½†åŒä¸€å‘½åç©ºé—´çš„åŒä¸€åå­—ç”Ÿæˆç›¸åŒçš„uuidã€‚ uuid4()â€”â€”åŸºäºéšæœºæ•°ç”±ä¼ªéšæœºæ•°å¾—åˆ°ï¼Œæœ‰ä¸€å®šçš„é‡å¤æ¦‚ç‡ï¼Œè¯¥æ¦‚ç‡å¯ä»¥è®¡ç®—å‡ºæ¥ã€‚ uuid5()â€”â€”åŸºäºåå­—çš„SHA-1æ•£åˆ—å€¼ç®—æ³•ä¸uuid3ç›¸åŒï¼Œä¸åŒçš„æ˜¯ä½¿ç”¨ Secure Hash Algorithm 1 ç®—æ³• åœ¨pythonä¸­åœ¨ç”ŸæˆUUIDimport uuidåå³å¯ä½¿ç”¨ç¤ºä¾‹ä»£ç 12345import uuiduuid.uuid1()uuid.uuid3(namespace, name)uuid.uuid4()uuid.uuid5(namespace, name) å‚è€ƒ http://zh.wikipedia.org/zh-hans/%E9%80%9A%E7%94%A8%E5%94%AF%E4%B8%80%E8%AF%86%E5%88%AB%E7%A0%81https://docs.python.org/2/library/uuid.html]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>UUID</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Apache Rewrite]]></title>
    <url>%2F2015%2F05%2F18%2FApache-Rewrite%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡æ˜¯å¯¹ä»Šå¤©ä½¿ç”¨Apacheçš„RewriteæŠ€æœ¯åšä¸€ä¸ªç®€å•çš„è®°å½•ã€‚ Apacheçš„rewriteæ¨¡å—ï¼Œæä¾›äº†ä¸€ä¸ªåŸºäºè§„åˆ™çš„é‡å†™(rewrite,ä¹Ÿè®¸è¯‘ä¸ºé‡æ„æ›´ä¸ºåˆé€‚)å¼•æ“ï¼Œæ¥å®æ—¶é‡å†™å‘é€åˆ°Apacheçš„è¯·æ±‚URLã€‚å› åŠŸèƒ½æå…¶å¼ºå¤§ï¼Œè¢«ç§°ä¸ºURLé‡å†™çš„â€œç‘å£«å†›åˆ€â€ã€‚ è¿™ä¸ªæ¨¡å—ä½¿ç”¨ä¸€ä¸ªåŸºäºæ­£åˆ™è¡¨è¾¾å¼è§£æå™¨å¼€å‘çš„é‡å†™å¼•æ“ï¼Œæ ¹æ®webç®¡ç†å‘˜å®šä¹‰çš„è§„åˆ™æ¥å®æ—¶(on the fly)é‡å†™è¯·æ±‚URLã€‚å®ƒæ”¯æŒä»»æ„æ•°ç›®çš„é‡å†™è§„åˆ™ï¼Œä»¥åŠé™„åŠ åˆ°ä¸€æ¡è§„åˆ™ä¸Šçš„ä»»æ„æ•°ç›®çš„è§„åˆ™æ¡ä»¶ï¼Œä»è€Œæä¾›äº†ä¸€å¥—éå¸¸çµæ´»å’ŒåŠŸèƒ½å¼ºå¤§çš„URLå¤„ç†æœºåˆ¶ã€‚ URLå¤„ç†æ“ä½œçš„å®æ–½ä¸å¦ï¼Œä¾èµ–äºå„ç§å„æ ·çš„æ¡ä»¶æ£€æŸ¥ï¼Œå¦‚æ£€æŸ¥æœåŠ¡å™¨å˜é‡ã€ç¯å¢ƒå˜é‡ã€HTTPå¤´å­—æ®µã€æ—¶é—´æˆ³çš„å€¼ï¼Œç”šè‡³å¤–éƒ¨æ•°æ®åº“çš„æ£€ç´¢ç»“æœã€‚è¿™ä¸ªæ¨¡å—å¯ ä»¥åœ¨æœåŠ¡å™¨èŒƒå›´å†…(http.conf)ã€ç›®å½•èŒƒå›´å†…(.htaccess)æˆ–è¯·æ±‚ä¸²(query-string)çš„ä¸€éƒ¨åˆ†å¤„ç†æœ‰å…³çš„URLã€‚é‡å†™çš„ç»“æœ URLï¼Œå¯ä»¥æŒ‡å‘ä¸€ä¸ªç«™å†…çš„å¤„ç†ç¨‹åºã€æŒ‡å‘ç«™å¤–çš„é‡å®šå‘æˆ–è€…ä¸€ä¸ªç«™å†…çš„ä»£ç†ã€‚ä¸çµæ´»å’ŒåŠŸèƒ½å¼ºå¤§ç›¸éšçš„æ˜¯è®¾ç½®çš„å¤æ‚ã€‚ æ›´æ–°å†å²2015å¹´05æœˆ18æ—¥ - åˆç¨¿ å¼€å¯æ¨¡å—åœ¨http.confä¸­æ‰¾åˆ°1# LoadModule rewrite_module modules/mod_rewrite.so å–æ¶ˆæ³¨é‡Š å®šä¹‰è§„åˆ™åœ¨http.confä¸­åŠ å…¥ä¸‹åˆ—ä»£ç ï¼ˆå¦‚æœå¯ç”¨äº†httpd-vhosts.confï¼Œè¯·åœ¨httpd-vhosts.confé‡Œåšé…ç½®ï¼‰12345&lt;IfModule rewrite_module&gt; RewriteEngine on RewriteCond %&#123;HTTP_HOST&#125; ^www.a.com [NC] RewriteRule ^/(.*) http://www.b.com/$1 [R=301,l]&lt;IfModule&gt; RewriteCondä¹‰é‡å†™å‘ç”Ÿçš„æ¡ä»¶ï¼Œåœ¨ä¸€æ¡RewriteRuleæŒ‡ä»¤å‰é¢å¯èƒ½ä¼šæœ‰ä¸€æ¡æˆ–å¤šæ¡RewriteCondæŒ‡ä»¤ï¼Œåªæœ‰å½“è‡ªèº«çš„æ¨¡æ¿(pattern)åŒ¹é…æˆåŠŸä¸”è¿™äº›æ¡ä»¶ä¹Ÿæ»¡è¶³æ—¶è§„åˆ™æ‰è¢«åº”ç”¨äºå½“å‰URLå¤„ç†ï¼Œä¸Šé¢ä»£ç çš„NCï¼šä¸åŒºåˆ†å¤§å°å†™RewriteRuleæ»¡è¶³^/(.*)æ­¤è§„åˆ™çš„æ‰€æœ‰URLéƒ½é‡å®šå‘åˆ°http://www.b.com/$1ï¼Œ$1ä½¿ç”¨å‰é¢(.*)åŒ¹é…åçš„å­—ç¬¦å¡«å…… æ‰€ä»¥å‰é¢çš„è§„åˆ™å°±æ˜¯çš„æœ€ç»ˆæ•ˆæœæ˜¯è®¿é—®www.a.comçš„æ‰€ä»¥é¡µé¢éƒ½ä¼šè¢«é‡å®šå‘åˆ°www.b.comç›¸åº”è·¯å¾„ä¸‹çš„é¡µé¢ å‚è€ƒ http://blog.chinaunix.net/uid-20639775-id-154471.htmlhttp://man.lupaworld.com/content/manage/Apache2.2_chinese_manual/mod/mod_rewrite.htmlhttp://httpd.apache.org/docs/current/mod/mod_rewrite.html]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Apache</tag>
        <tag>é‡å®šå‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åœ¨Android Chromeä»¥appå½¢å¼æ‰“å¼€ç½‘ç«™]]></title>
    <url>%2F2015%2F05%2F11%2Fchrome-add-to-homescreen%2F</url>
    <content type="text"><![CDATA[å‰é¢ä¸€ç¯‡æ–‡ç« æˆ‘è®²åˆ°äº†åœ¨UCç½‘ç«™å¯ä»¥ä»¥appå½¢å¼æ‰“å¼€ï¼Œå…¶å®åœ¨Android Chromeæµè§ˆå™¨ä¸Šä¹Ÿæ”¯æŒæ­¤åŠŸèƒ½ã€‚ æ·»åŠ é…ç½®æ–‡ä»¶åœ¨ç½‘ç«™æ ¹ç›®å½•æ·»åŠ manifest.jsonï¼Œå¹¶è¿›è¡Œç›¸åº”é…ç½®1234567891011121314151617181920212223242526272829303132333435363738394041424344&#123; "name": "iblogc", "icons": [ &#123; "src": "launcher-icon-0-75x.png", "sizes": "36x36", "type": "image/png", "density": "0.75" &#125;, &#123; "src": "launcher-icon-1x.png", "sizes": "48x48", "type": "image/png", "density": "1.0" &#125;, &#123; "src": "launcher-icon-1-5x.png", "sizes": "72x72", "type": "image/png", "density": "1.5" &#125;, &#123; "src": "launcher-icon-2x.png", "sizes": "96x96", "type": "image/png", "density": "2.0" &#125;, &#123; "src": "launcher-icon-3x.png", "sizes": "144x144", "type": "image/png", "density": "3.0" &#125;, &#123; "src": "launcher-icon-4x.png", "sizes": "192x192", "type": "image/png", "density": "4.0" &#125; ], "start_url": "index.html", "display": "standalone", "orientation": "portrait"&#125; åœ¨ç½‘ç«™å…¬ç”¨å¤´éƒ¨å¼•å…¥é…ç½®æ–‡ä»¶1&lt;link rel=&quot;manifest&quot; href=&quot;manifest.json&quot;&gt; æŸ¥çœ‹æ•ˆæœåœ¨Androidä½¿ç”¨Chromeæ‰“å¼€ç½‘ç«™ï¼Œç‚¹å‡»memuï¼Œé€‰æ‹©â€œæ·»åŠ åˆ°ä¸»å±å¹•â€é€‰é¡¹ï¼Œç‚¹å‡»å°±å¯ä»¥æ·»åŠ åˆ°ä¸»å±å¹•äº†ï¼Œæ­¥éª¤åŠæ˜¾ç¤ºæ•ˆæœæˆªå›¾å¦‚ä¸‹ï¼šPS:åœ°å€æ æ˜¯ä¸æ˜¯ä¸è§äº†,çœ‹ç€åƒappè€Œä¸æ˜¯ç½‘é¡µ æ‰©å±•iosçš„safariä¹Ÿæœ‰æ­¤åŠŸèƒ½ï¼Œå› æ‰‹å¤´æ— iosè®¾å¤‡æµ‹è¯•ä¸äº†ï¼Œæ‰€ä»¥å†…å®¹ä¸å†™äº†ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒæ­¤æ–‡ç« http://www.prower.cn/technic/2314 å‚è€ƒèµ„æ–™ https://developer.chrome.com/multidevice/android/installtohomescreen]]></content>
      <categories>
        <category>ç½‘ç«™</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Chrome</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[UCå’ŒQQæµè§ˆå™¨ç§æœ‰META]]></title>
    <url>%2F2015%2F05%2F06%2FUC%E5%92%8CQQ%E6%B5%8F%E8%A7%88%E5%99%A8%E7%A7%81%E6%9C%89META%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯META METAæ˜¯HTMLè¯­è¨€ä¸­çš„ä¸€ä¸ªæ ‡ç­¾ï¼Œä¹Ÿç§°ä½œå…ƒæ ‡è®°ã€‚ å…ƒç´ å¯æä¾›æœ‰å…³é¡µé¢çš„å…ƒä¿¡æ¯ï¼ˆmeta-informationï¼‰ï¼Œæ¯”å¦‚é’ˆå¯¹æœç´¢å¼•æ“å’Œæ›´æ–°é¢‘åº¦çš„æè¿°å’Œå…³é”®è¯ã€‚ æ ‡ç­¾ä½äºæ–‡æ¡£çš„å¤´éƒ¨ï¼Œä¸åŒ…å«ä»»ä½•å†…å®¹ï¼Œ æ ‡ç­¾çš„å±æ€§å®šä¹‰äº†ä¸æ–‡æ¡£ç›¸å…³è”çš„åç§°/å€¼å¯¹ã€‚ UCçš„ç§æœ‰METAå±å¹•æ–¹å‘å¼ºåˆ¶æ¨ªå±/å¼ºåˆ¶ç«–å±1&lt;meta name=&quot;screen-orientation&quot; content=&quot;landscape/portrait&quot;&gt; å…¨å±1&lt;meta name=&quot;full-screen&quot; content=&quot;yes&quot;&gt; xhtmlé€‚åº”å±å¹•æ’ç‰ˆé»˜è®¤å€¼ä¸ºuc-fitscreen=noï¼Œå³ä¸å¯ç”¨æ­¤åŠŸèƒ½ï¼Œæ­¤æ—¶æµè§ˆå™¨çš„ç¼©æ”¾è¡Œä¸ºä¸æ ‡å‡†ä¸€è‡´ã€‚å½“è®¾ç½®ä¸ºuc-fitscreen=yesï¼Œåˆ™å½“è¿›è¡Œç¼©æ”¾æ“ä½œæ—¶ï¼Œä»…æ”¾å¤§å›¾ç‰‡å’Œæ–‡å­—ç­‰é¡µé¢å…ƒç´ ï¼Œä½†ä¸æ”¾å¤§å±å¹•å®½åº¦ï¼Œä»è€Œé¿å…äº†å·¦å³æ»šåŠ¨æ¡çš„äº§ç”Ÿã€‚ 1&lt;meta name=&quot;viewport&quot; content=&quot;uc-fitscreen=yes&quot;/&gt; æ’ç‰ˆæ¨¡å¼Ucæµè§ˆå™¨æä¾›ä¸¤ç§æ’ç‰ˆæ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯é€‚å±æ¨¡å¼åŠæ ‡å‡†æ¨¡å¼ï¼Œå…¶ä¸­é€‚å±æ¨¡å¼ç®€åŒ–äº†ä¸€äº›é¡µé¢çš„å¤„ç†ï¼Œä½¿å¾—é¡µé¢å†…å®¹æ›´é€‚åˆè¿›è¡Œé¡µé¢é˜…è¯»ã€èŠ‚çœæµé‡åŠå“åº”æ›´å¿«ï¼Œè€Œæ ‡å‡†æ¨¡å¼åˆ™èƒ½æŒ‰ç…§æ ‡å‡†è§„èŒƒå¯¹é¡µé¢è¿›è¡Œæ’ç‰ˆåŠæ¸²æŸ“ã€‚é€šè¿‡æ–°å®šä¹‰çš„æ ‡ç­¾åŠjs apiæ¥å£ï¼Œå¯ä»¥è®©ç½‘é¡µè®¾è®¡è€…æ‰§è¡Œå†³å®šé‡‡ç”¨ä½•ç§æ’ç‰ˆæ–¹å¼å‘ç”¨æˆ·å±•ç°é¡µé¢ã€‚1&lt;meta name=&quot;layoutmode&quot; content=&quot;fitscreen/standard&quot; /&gt; å¤œé—´æ¨¡å¼å…è®¸è¿›å…¥å¤œé—´æ¨¡å¼/ç¦æ­¢è¿›å…¥å¤œé—´æ¨¡å¼1&lt;meta name=&quot;nightmode&quot; content=&quot;enable/disable&quot;/&gt; å¼ºåˆ¶æ˜¾ç¤ºå›¾ç‰‡ï¼Œä¸å—æµè§ˆå™¨æ— å›¾è®¾ç½®å½±å“1&lt;meta name=&quot;imagemode&quot; content=&quot;force&quot;/&gt; åº”ç”¨æ¨¡å¼é»˜è®¤å°†å…¨å±ï¼Œç¦æ­¢é•¿æŒ‰èœå•ï¼Œç¦æ­¢æ‰‹åŠ¿ï¼Œæ ‡å‡†æ’ç‰ˆ1&lt;meta name=&quot;browsermode&quot; content=&quot;application&quot;/&gt; QQæµè§ˆå™¨çš„ç§æœ‰METAå±å¹•æ–¹å‘å¼ºåˆ¶æ¨ªå±/å¼ºåˆ¶ç«–å±/è‡ªåŠ¨ï¼ˆé»˜è®¤ï¼‰1&lt;meta name=&quot;x5-orientation&quot; content=&quot;landscape/portrait/auto&quot;/&gt; å…¨å±å¼ºåˆ¶å…¨å±/è·Ÿéšæµè§ˆå™¨ï¼ˆé»˜è®¤ï¼‰1&lt;meta name="x5-fullscreen" content="true/auto"/&gt; é¡µé¢æ¨¡å¼æ™®é€šæµè§ˆæ¨¡å¼ï¼ˆé»˜è®¤ï¼‰/ç½‘é¡µåº”ç”¨æ¨¡å¼ï¼ˆå®šåˆ¶å·¥å…·æ ï¼Œå…¨å±æ˜¾ç¤ºï¼‰1&lt;meta name="x5-page-mode" content="default/app"/&gt; å‚è€ƒèµ„æ–™ http://www.uc.cn/business/developer/http://open.mb.qq.com/doc?id=1201#_1]]></content>
      <categories>
        <category>ç½‘ç«™</category>
      </categories>
      <tags>
        <tag>meta</tag>
        <tag>æµè§ˆå™¨</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntuå®‰è£…Android Studioå‡ºç°é”™unable to run mksdcard sdk tool]]></title>
    <url>%2F2015%2F03%2F28%2Fubuntu%E5%AE%89%E8%A3%85android-studio%E5%87%BA%E7%8E%B0%E9%94%99unable-to-run-mksdcard-sdk-tool%2F</url>
    <content type="text"><![CDATA[é”™è¯¯ä¿¡æ¯ï¼šunable to run mksdcard sdk toolåŸå› ï¼šç¼ºå°‘åº“æ–‡ä»¶è§£å†³æ–¹æ³•ï¼šsudo apt-get install lib32z1 lib32ncurses5 lib32bz2-1.0 lib32stdc++6]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ubuntuå®‰è£…JDK8]]></title>
    <url>%2F2015%2F03%2F28%2Fubuntu%E5%AE%89%E8%A3%85JDK8%2F</url>
    <content type="text"><![CDATA[ä¸‹è½½JDK8åˆ°oracleç½‘ç«™ä¸‹è½½JDK8 è§£å‹å®‰è£…12345sudo tar xzvf jdk-8u40-linux-x64.tar.gzmkdir -p /usr/lib/jvmsudo mv /usr/lib/jvm jdk1.8.0_40 /usr/lib/jvmcd /usr/lib/jvmsudo ln -s jdk1.8.0_40 java-8 é…ç½®ç¯å¢ƒå˜é‡æ·»åŠ PATH,CLASSPATH,JAVA_HOMEç¯å¢ƒå˜é‡gedit ~/.bashrcåœ¨æ‰“å¼€çš„çª—å£é‡Œæ·»åŠ ä»¥ä¸‹å†…å®¹1234export JAVA_HOME=/usr/lib/jvm/java-8export JRE_HOME=$&#123;JAVA_HOME&#125;/jreexport CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/libexport PATH=$&#123;JAVA_HOME&#125;/bin:$PATH ä¿å­˜é€€å‡ºï¼Œæ‰§è¡Œå‘½ä»¤ä½¿é…ç½®ç”Ÿæ•ˆsource ~/.bashrc é…ç½®é»˜è®¤JDKç‰ˆæœ¬åœ¨æœ‰çš„ç³»ç»Ÿä¸­ä¼šé¢„è£…OpenJDKï¼Œç³»ç»Ÿé»˜è®¤ä½¿ç”¨çš„æ˜¯è¿™ä¸ªï¼Œè€Œä¸æ˜¯åˆšæ‰è£…çš„ã€‚æ‰€ä»¥è¿™ä¸€æ­¥æ˜¯é€šçŸ¥ç³»ç»Ÿä½¿ç”¨Oracleçš„JDKï¼ŒéOpenJDKã€‚1234sudo update-alternatives --install /usr/bin/java java /usr/lib/jvm/java-8/bin/java 300sudo update-alternatives --install /usr/bin/javac javac /usr/lib/jvm/java-8/bin/javac 300sudo update-alternatives --config javasudo update-alternatives --config javac éªŒè¯æ˜¯å¦æˆåŠŸjava -version]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Ubuntu</tag>
        <tag>JDK</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ubuntuä¸‹è¿è¡Œshadowsockså®¢æˆ·ç«¯]]></title>
    <url>%2F2015%2F03%2F28%2Fubuntu%E8%BF%90%E8%A1%8Cshadowsocks%E5%AE%A2%E6%88%B7%E7%AB%AF%2F</url>
    <content type="text"><![CDATA[Shadowsocks æ˜¯ä¸€ä¸ªå®‰å…¨çš„socks5ä»£ç†,ç”¨äºä¿æŠ¤ç½‘ç»œæµé‡,æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®,é¡¹ç›®åœ°å€ã€‚ ä¸‹è½½12sudo apt-get install python-pip python-m2cryptosudo pip install shadowsocks é…ç½®sudo gedit /etc/shadowsocks/config.json1234567891011&#123; &quot;server&quot;:&quot;remote-shadowsocks-server-ip-addr&quot;, &quot;server_port&quot;:8883, &quot;local_address&quot;:&quot;127.0.0.1&quot;, &quot;local_port&quot;:1080, &quot;password&quot;:&quot;abcdef&quot;, &quot;timeout&quot;:300, &quot;method&quot;:&quot;aes-256-cfb&quot;, &quot;fast_open&quot;:false, &quot;workers&quot;:1&#125; è¯·æ ¹æ®å®é™…æƒ…å†µé…ç½® å¯åŠ¨å®¢æˆ·ç«¯sslocal -c /etc/shadowsocks.json æµè§ˆå™¨æ‰©å±•Firefoxå¯ä½¿ç”¨FoxyProxy StandardChromeå¯ä½¿ç”¨Proxy SwitchOmegaé…ç½®è¯·è‡ªè¡ŒGoogle/ç™¾åº¦]]></content>
      <categories>
        <category>ä¼˜åŒ–è¾…åŠ©</category>
      </categories>
      <tags>
        <tag>Ubuntu</tag>
        <tag>Shadowsocks</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ubuntuæ›´æ–°NVæ˜¾å¡é©±åŠ¨]]></title>
    <url>%2F2015%2F03%2F27%2Fubuntu%E6%9B%B4%E6%96%B0NV%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8%2F</url>
    <content type="text"><![CDATA[æ˜¨å¤©åœ¨ç¬”è®°æœ¬ä¸Šæ–°å®‰è£…äº†ubuntu14.04LTSï¼Œé¡ºä¾¿æ›´æ–°äº†ä¸‹NVé©±åŠ¨ï¼Œè¿™é‡Œåšä¸‹è®°å½•ã€‚ ä¸‹è½½é©±åŠ¨é¦–é¡µåœ¨http://www.geforce.cn/driversé€‰æ‹©ç›¸åº”çš„æ˜¾å¡å‹å·ä¸‹è½½å¯¹åº”çš„é©±åŠ¨ï¼Œä¸‹è½½å®Œæˆåé‡å‘½ä»¤ä¸ºNVIDIA.run å…³é—­X serverè¾“å…¥sudo /etc/init.d/gdm stopæˆ–sudo /etc/init.d/lightdm stopåœæ­¢X serverï¼Œè¿™æ—¶æ¡Œé¢ä¼šæ¶ˆå¤±ï¼ŒæŒ‰Ctrl+Alt+F1è¿›å…¥æ–‡æœ¬æ¨¡å¼ å®‰è£…é©±åŠ¨è¿›å…¥é©±åŠ¨æ‰€åœ¨æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œsudo sh NVIDIA.runï¼Œå®‰è£…é©±åŠ¨è¿‡ç¨‹ä¸­ä¼šæœ‰å‡ æ¬¡å¯¹è¯æ¡†éœ€è¦ç¡®è®¤ã€‚ å¯åŠ¨GDMsudo /etc/init.d/gdm startæˆ–sudo /etc/init.d/lightdm start é‡å¯ç”µè„‘sudo reboot è¿™æ ·NVçš„é©±åŠ¨å°±å®‰è£…å¥½äº†ã€‚]]></content>
      <categories>
        <category>å…¶å®ƒ</category>
      </categories>
      <tags>
        <tag>Ubuntu</tag>
        <tag>é©±åŠ¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨ngroké…ç½®å¾®ä¿¡å…¬ä¼—å·æœ¬åœ°å¼€å‘ç¯å¢ƒï¼ˆADSLå±è”½80ç«¯å£é—®é¢˜ï¼‰]]></title>
    <url>%2F2015%2F02%2F04%2F%E4%BD%BF%E7%94%A8ngrok%E9%85%8D%E7%BD%AE%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E6%9C%AC%E5%9C%B0%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%EF%BC%88ADSL%E5%B1%8F%E8%94%BD80%E7%AB%AF%E5%8F%A3%E9%97%AE%E9%A2%98%EF%BC%89%2F</url>
    <content type="text"><![CDATA[æ›´æ–°è®°å½•2016-03-04 æ›´æ–°æ•™ç¨‹2015-09-16 æ·»åŠ æ—§ç‰ˆè½¯ä»¶ä¸‹è½½2015-02-04 åˆç¨¿ é‰´äºå›½å†…å¤§éƒ¨åˆ†ADSLå±è”½80ç«¯å£ï¼Œè€Œå¾®ä¿¡å…¬ä¼—å·å¼€å‘åªæ”¯æŒ80ç«¯å£ï¼Œæ‰€ä»¥åœ¨æœ¬åœ°å¼€å‘æµ‹è¯•å¾®ä¿¡å…¬ä¼—å·å°±æ˜¯ä¸€ä¸ªé—®é¢˜äº†ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è½¯ä»¶ngrokæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ é…ç½®æ­¥éª¤1. æ³¨å†Œngrokè´¦å·æ³¨å†ŒæˆåŠŸåæ‹¿åˆ°æˆæƒç auth tokenï¼Œä½¿ç”¨ngrokæ—¶å¹¶ä¸å¼ºåˆ¶ç”¨æˆ·æ³¨å†Œï¼Œä½†æ³¨å†Œåä¼šé™„åŠ æ›´å¤šåŠŸèƒ½(å¦‚è‡ªå®šä¹‰äºŒçº§åŸŸå)ï¼› 2. ä¸‹è½½ngrokï¼Œè§£å‹ï¼›3. å¯åŠ¨æ–¹å¼ä¸€:è®©æœ¬åœ°çš„â€˜http://127.0.0.1:80â€™ å¯ä»¥è®©å¤–ç½‘è®¿é—®1ngrok http 80 ngrokä¼šéšæœºåˆ†é…ä¸€ä¸ªäºŒçº§åŸŸåï¼Œå¯ç›´æ¥é€šè¿‡å¤–ç½‘å¯é€šè¿‡http://xxxx.tunnel.mobiæ¥è®¿é—®æœ¬æœºçš„http://127.0.0.1:80ç½‘ç«™ æ–¹å¼äºŒï¼šä½¿ç”¨é…ç½®æ–‡ä»¶å¯åŠ¨:åœ¨ngrok.exeç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤ï¼ˆä¸å¸¦å°–æ‹¬å·ï¼‰ï¼Œç”Ÿæˆé…ç½®æ–‡ä»¶ï¼ˆé…ç½®æ–‡ä»¶ä¼šåœ¨C:\Users\ç”¨æˆ·å/.ngrok2/ngrok.ymlä¸‹ã€Œwindowsã€ï¼‰1ngrok authtoken &lt;you authtoken&gt; ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¯é…ç½®å¤šä¸ªtunnelï¼ˆæ³¨æ„ï¼Œé…ç½®æ–‡ä»¶æ˜¯yamlæ ¼å¼ï¼Œå†’å·åé¢å¦‚æœè¿˜æœ‰å†…å®¹éœ€è¦åŠ ç©ºæ ¼ï¼‰1234567891011121314151617181920authtoken:&lt;you authtoken&gt;tunnels: # è‡ªå®šä¹‰éš§é“å iblogc: #æœ¬åœ°æœåŠ¡ç«¯å£ addr: 4000 # ç”¨äºhttp/httpsé‡Œçš„èº«ä»½è®¤è¯ #auth: &quot;username:password&quot; proto: http # äºŒçº§åŸŸåï¼Œå¦‚æœè¿è¡Œæç¤ºé‡å¤ï¼Œæ¢ä¸€ä¸ªå°±è¡Œ subdomain: iblogc django: addr: 8000 auth: &quot;abc:123456&quot; proto: http subdomain: django weixin: addr: 80 proto: http subdomain: weixin ç°åœ¨æ‰§è¡Œ1ngrok start iblogc è¯•è¯•ï¼Œå¦‚æœä½ è®¾ç½®çš„çš„äºŒçº§åŸŸåæ²¡æœ‰è¢«å ç”¨çš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šå¯åŠ¨æˆåŠŸï¼Œå¦åˆ™è¯·æ›´æ¢ä¸€ä¸ªäºŒçº§åŸŸé‡è¯•ã€‚http://iblogc.ngrok.io https://iblogc.ngrok.io åè®®å‡å¯ä»¥è®¿é—®ã€‚ngrok-start-iblogc.png) ä½ ä¹Ÿå¯ä»¥åŒæ—¶å¯åŠ¨ä¸¤ä¸ªtunnel1ngrok start iblogc django weixin ngrok-start-iblogc-django-weixin.png) å› ä¸ºæˆ‘çš„django tunnelé…ç½®æ–‡ä»¶é‡Œæ·»åŠ äº†authé…ç½®æ‰€ä»¥è®¿é—®http://django.ngrok.ioéœ€è¦è¾“å…¥ç”¨æˆ·åå¯†ç ã€‚ngrok-auth.png) å‡è®¾weixinå°±æ˜¯æˆ‘æœ¬åœ°è·‘åœ¨80ç«¯å£çš„å¾®ä¿¡é¡¹ç›®ï¼Œç°åœ¨å°±å¯ä»¥åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°ã€Œå¼€å‘è€…ä¸­å¿ƒã€å¯ä»¥ä½¿ç”¨weixin.ngrok.comè¿›è¡Œé…ç½®äº†ï¼Œæ‰€æœ‰å‘å‘æ­¤åŸŸåçš„è¯·æ±‚éƒ½ä¼šè½¬å‘åˆ°ä½ çš„æœ¬åœ°127.0.0.1:80ä¸Šã€‚ 4. æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯å¦‚æœæƒ³æŸ¥çœ‹è¯¦ç»†çš„è¯·æ±‚ä¿¡æ¯å¯ä»¥åœ¨æµè§ˆå™¨é‡Œæ‰“å¼€http://127.0.0.1:4040æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯nrok-web-interface.png) 5. å‚è€ƒæ–‡æ¡£å®˜æ–¹æ–‡æ¡£ï¼šhttps://ngrok.com/docs]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡å…¬ä¼—å·</tag>
        <tag>ç«¯å£</tag>
        <tag>ngrok</tag>
        <tag>å†…ç½‘ç©¿é€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gitå‘½ä»¤ä½¿ç”¨æŒ‡å—]]></title>
    <url>%2F2015%2F01%2F16%2FGit%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97%2F</url>
    <content type="text"><![CDATA[Gitæ˜¯è½¯ä»¶å¼€å‘äººå‘˜åœ¨å¼€å‘ä¸­å¸¸ç”¨çš„ä¸€ç§å·¥å…·,æ˜¯å¼€å‘ä¹‹åˆ©å™¨ã€‚ Gitæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨ä»¥æœ‰æ•ˆã€é«˜é€Ÿçš„å¤„ç†ä»å¾ˆå°åˆ°éå¸¸å¤§çš„é¡¹ç›®ç‰ˆæœ¬ç®¡ç†ã€‚ å·¥ä½œæµå›¾ç¤º å‘½ä»¤é…ç½® git config --global user.name &#39;Your Name&#39; è®¾ç½®gitæäº¤æ˜¾ç¤ºçš„åå­— git config --global user.email your_email@example.com è®¾ç½®gitæäº¤æ˜¾ç¤ºçš„é‚®ç®± git config --global alias.unstage &quot;reset HEAD&quot; æ›¿æ¢å‘½ä»¤ git reset HEADå‘½ä»¤æ”¹ä¸º git unstage ssh-keygen -t rsa -C your_email@example.com ç”ŸæˆSSH Key git config --global core.editor emacs è®¾ç½®æ–‡ä»¶ç¼–è¾‘å™¨ git config --global merge.tool vimdiff è®¾ç½®å·®å¼‚åˆ†æå·¥å…· git config --list æŸ¥çœ‹é…ç½®ä¿¡æ¯ ç®€æ´ç‰ˆåˆå§‹åŒ–ä»“åº“git init æ·»åŠ è¿œç¨‹ä»“åº“git remote add &lt;è‡ªå®šä¹‰åå­—&gt; &lt;è¿œç¨‹ä»“åº“url&gt; ç»™æŸä¸ªä»“åº“åå†æ·»åŠ å¦ä¸€ä¸ªè¿œç¨‹ä»“åº“urlï¼ˆå¯å®ç°ä¸€æ¬¡æäº¤åˆ°ä¸¤ä¸ªè¿œç¨‹ä»“åº“ï¼‰git remote set-url --add &lt;è‡ªå®šä¹‰åå­—&gt; &lt;è¿œç¨‹ä»“åº“url&gt; æ›´æ–°é¡¹ç›®git pull åˆå¹¶åˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯git merge &lt;åˆ†æ”¯å&gt; åˆ›å»ºæ ‡ç­¾git tag &lt;æ ‡ç­¾åå­—&gt; &lt;æäº¤idå‰10ä½å­—ç¬¦&gt; å¯é€šè¿‡git logè·å– è·å–loggit log åˆ‡æ¢åˆ†æ”¯git checkout &lt;åˆ†æ”¯å&gt; åˆ›å»ºåˆ†æ”¯å¹¶åˆ‡æ¢è¿‡å»git checkout -b &lt;åˆ†æ”¯å&gt; åˆ é™¤åˆ†æ”¯git branch -D &lt;åˆ†æ”¯å&gt; æ¨é€git push origin &lt;åˆ†æ”¯å/æ ‡ç­¾å&gt; å¼ºåˆ¶æ¨é€æ›´æ–°git push -f origin &lt;åˆ†æ”¯å/æ ‡ç­¾å&gt; æ¨é€æ‰€æœ‰åˆ†æ”¯git push origin --all æ¨é€æ‰€æœ‰æ ‡ç­¾git push origin --tags æ’¤æ¶ˆæœ¬åœ°æ”¹åŠ¨ï¼ˆæ–°æ–‡ä»¶å’Œæäº¤åˆ°ç¼“å­˜åŒºçš„æ”¹åŠ¨ï¼Œä¸å—å½±å“ï¼‰git checkout -- &lt;ç›®å½•&gt;&lt;æ–‡ä»¶å&gt; æ’¤æ¶ˆæœ¬åœ°æ‰€æœ‰æäº¤ä¸æ”¹åŠ¨å‡å¦‚ä½ æƒ³è¦ä¸¢å¼ƒä½ æ‰€æœ‰çš„æœ¬åœ°æ”¹åŠ¨ä¸æäº¤ï¼Œå¯ä»¥åˆ°æœåŠ¡å™¨ä¸Šè·å–æœ€æ–°çš„ç‰ˆæœ¬å¹¶å°†ä½ æœ¬åœ°ä¸»åˆ†æ”¯æŒ‡å‘åˆ°å®ƒgit fetch origingit reset --hard origin/master å…¶å®ƒå‘½ä»¤ gitk è·å–å½“å‰åˆ†æ”¯å›¾å½¢ä¸ªç•Œé¢ å‚æ•°&lt;åˆ†æ”¯å&gt;: è·å–æŸåˆ†æ”¯å›¾å½¢ç•Œé¢ å‚æ•°=--all: è·å–æ‰€æœ‰åˆ†æ”¯å›¾å½¢ä¸ªç•Œé¢ cat &lt;ç›®å½•&gt;&lt;æ–‡ä»¶å&gt; æŸ¥çœ‹æ–‡ä»¶å†…å®¹ è¯¦ç»†ç‰ˆåˆå§‹ git init åˆå§‹åŒ–ä»“åº“ ls æ˜¾ç¤ºç›®å½•ä¸‹æ–‡ä»¶åŠæ–‡ä»¶å¤¹ï¼ˆä¸åŒ…å«éšè—æ–‡ä»¶å³åå­—å‰å¸¦ç‚¹çš„ï¼‰ å‚æ•°-aæ˜¾ç¤ºç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶åŠæ–‡ä»¶å¤¹ git clone &lt;url&gt; å…‹éš†é¡¹ç›® æäº¤ git add &lt;ç›®å½•&gt;&lt;æ–‡ä»¶å&gt; æ·»åŠ æ–‡ä»¶åˆ°ç‰ˆæœ¬åº“ï¼Œå¯ä»¥å¤šä¸ªæ–‡ä»¶ä¸€èµ·æ·»åŠ ï¼Œä¸­é—´ç”¨ç©ºæ ¼éš”å¼€ git add * æˆ– git add . æ·»åŠ æ‰€æœ‰æ–‡ä»¶åˆ°ç‰ˆæœ¬åº“ git status æŸ¥çœ‹é¡¹ç›®å½“å‰çŠ¶æ€ï¼Œè¯¦ç»†ä¿¡æ¯ å‚æ•°-s: æ˜¾ç¤ºç®€æ´ç‰ˆ ç»¿è‰²è¡¨ç¤ºå·²ç»æäº¤çš„ç¼“å­˜åŒºï¼Œçº¢è‰²è¡¨ç¤ºåœ¨å·¥ä½œåŒºæœªæäº¤åˆ°ç¼“å­˜åŒºçš„Aæ–°å¢ Mä¿®æ”¹ Dåˆ é™¤ Uå†²çª Ré‡å‘½åï¼Ÿpushä¼šæŠŠç»¿è‰²éƒ¨åˆ†æäº¤ï¼Œçº¢è‰²éƒ¨åˆ†ä¸æäº¤å·²æœ‰è®°å½•æ–‡ä»¶åšè¿‡æ”¹åŠ¨å’Œæ–°æ–‡ä»¶ï¼Œéœ€è¦git add git diff æŸ¥çœ‹æ•´ä¸ªé¡¹ç›®é‡Œçš„æ–‡ä»¶æ”¹åŠ¨æƒ…å†µï¼ˆå·¥ä½œåŒºå’Œç¼“å­˜åŒºæ¯”è¾ƒï¼‰ å‚æ•°&lt;ç›®å½•&gt;&lt;æ–‡ä»¶å&gt;: æŸ¥çœ‹å•ä¸ªæ–‡ä»¶æ”¹åŠ¨æƒ…å†µï¼ˆå·¥ä½œåŒºå’Œç¼“å­˜åŒºæ¯”è¾ƒï¼‰-å‚æ•°&lt;æ ‡ç­¾å&gt;: æŸ¥çœ‹è‡ªå½“å‰æ ‡ç­¾å‘å¸ƒä¹‹åé¡¹ç›®çš„æ”¹åŠ¨æƒ…å†µ å‚æ•°--cached: æŸ¥çœ‹æ•´ä¸ªé¡¹ç›®é‡Œçš„æ–‡ä»¶æ”¹åŠ¨æƒ…å†µï¼ˆç¼“å­˜åŒºå’Œæœ¬åœ°ä»“åº“æ¯”è¾ƒï¼‰ å‚æ•° HEAD: æŸ¥çœ‹æ•´ä¸ªé¡¹ç›®é‡Œçš„æ–‡ä»¶æ”¹åŠ¨æƒ…å†µï¼ˆå·¥ä½œåŒºå’Œæœ¬åœ°ä»“åº“æ¯”è¾ƒï¼‰ å‚æ•°--stat: æ˜¾ç¤ºæ‘˜è¦ï¼Œè€Œéå®Œæ•´diff git commit: æäº¤åˆ°ç¼“å­˜ å‚æ•°-m: åé¢ç©ºæ ¼æ¥æäº¤ä¿¡æ¯ å‚æ•°-a: ä¸ºæ‰€æœ‰å·²æœ‰è®°å½•æ–‡ä»¶æ‰§è¡Œgit addï¼ˆæ–°æ·»åŠ æ–‡ä»¶è¿˜æ˜¯éœ€è¦æ‰‹åŠ¨git addï¼‰ git reset HEAD å–æ¶ˆç¼“å­˜å·²ç¼“å­˜çš„å†…å®¹ å‚æ•°&lt;ç›®å½•&gt;&lt;æ–‡ä»¶å&gt;: å•ä¸ªæ–‡ä»¶å–æ¶ˆç¼“å­˜å·²ç¼“å­˜å†…å®¹ git rm &lt;ç›®å½•&gt;&lt;æ–‡ä»¶å&gt;: å°†æ–‡ä»¶ä»ç¼“å­˜åŒºå’Œç¡¬ç›˜ä¸Šç§»é™¤ å‚æ•°--cached: åˆ é™¤ç¼“å­˜ä¸­çš„æ–‡ä»¶ï¼Œä¿ç•™ç¡¬ç›˜ä¸Šçš„æ–‡ä»¶ git mv ä¸æ¨èç”¨ git log æ˜¾ç¤ºå½“å‰åˆ†æ”¯æäº¤è®°å½• å‚æ•°--author=&lt;authorname&gt;: åªå¯»æ‰¾æŸä¸ªç‰¹å®šä½œè€…çš„æäº¤ å‚æ•°--oneline: æ˜¾ç¤ºç®€æ´ç‰ˆ å‚æ•°--oneline -&lt;æ•°å­—N&gt;: æ˜¾ç¤ºç®€æ´ç‰ˆï¼Œæ˜¾ç¤ºæœ€è¿‘Næ¬¡æäº¤çš„è®°å½• å‚æ•°--graph: æ˜¾ç¤ºæ‹“æ‰‘å›¾ï¼ˆæŸ¥çœ‹å†å²ä¸­ä»€ä¹ˆæ—¶å€™å‡ºç°äº†åˆ†æ”¯ã€åˆå¹¶ï¼‰ å‚æ•°--grep=&lt;å…³é”®å­—&gt;: æ ¹æ®æäº¤æ³¨é‡Šå…³é”®å­—è¿‡æ»¤æäº¤è®°å½• Git ä¼šå¯¹æ‰€æœ‰çš„ â€“grep å’Œ â€“author å‚æ•°ä½œé€»è¾‘æˆ–ã€‚ å¦‚æœä½ ç”¨ â€“grep å’Œ â€“author æ—¶ï¼Œæƒ³çœ‹çš„æ˜¯æŸäººå†™ä½œçš„å¹¶ä¸”æœ‰æŸä¸ªç‰¹æ®Šçš„æ³¨é‡Šå†…å®¹çš„æäº¤è®°å½•ï¼Œ ä½ éœ€è¦åŠ ä¸Š â€“all-match é€‰é¡¹ã€‚ åœ¨è¿™äº›ä¾‹å­ä¸­ï¼Œæˆ‘ä¼šç”¨ä¸Š â€“format é€‰é¡¹ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°æ¯ä¸ªæäº¤çš„ä½œè€…æ˜¯è°äº†ã€‚è¯¦ç»†å‚è€ƒï¼šGitå‚è€ƒæ‰‹å†Œ:æ£€æŸ¥ä¸æ¯”è¾ƒ å‚æ•°&lt;åˆ†æ”¯å&gt;:æ˜¾ç¤ºæŒ‡å®šåˆ†æ”¯â€œå¯åŠâ€çš„æäº¤è®°å½• å‚æ•°&lt;åˆ†æ”¯å1&gt; ^&lt;åˆ†æ”¯å1&gt;: æŸ¥çœ‹åœ¨åˆ†æ”¯1ä¸åœ¨åˆ†æ”¯2ä¸­çš„æäº¤è®°å½• åˆ†æ”¯å¯ä»¥æ˜¯æœ¬åœ°çš„ä¹Ÿå¯ä»¥æ˜¯è¿œç«¯çš„ å‚æ•°--decorate: æ˜¾ç¤ºå¸¦tagçš„è®°å½• å‚æ•°-p: æ˜¾ç¤ºæ¯ä¸ªæäº¤å¼•å…¥çš„è¡¥ä¸ å‚æ•°--stat: æ˜¾ç¤ºæ¯ä¸ªæäº¤å¼•å…¥çš„å·®å€¼ç»Ÿè®¡ å…¶å®ƒå‚æ•° --since --before --until --after git log â€“since â€“before æ ¹æ®æ—¥æœŸè¿‡æ»¤æäº¤è®°å½•å¦‚æœä½ è¦æŒ‡å®šä¸€ä¸ªä½ æ„Ÿå…´è¶£çš„æ—¥æœŸèŒƒå›´ä»¥è¿‡æ»¤ä½ çš„æäº¤ï¼Œå¯ä»¥æ‰§è¡Œå‡ ä¸ªé€‰é¡¹ â€”â€” æˆ‘ç”¨ â€“since å’Œ â€“beforeï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥ç”¨ â€“until å’Œ â€“afterã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘è¦çœ‹ Git é¡¹ç›®ä¸­ä¸‰å‘¨å‰ä¸”åœ¨å››æœˆåå…«æ—¥ä¹‹åçš„æ‰€æœ‰æäº¤ï¼Œæˆ‘å¯ä»¥æ‰§è¡Œè¿™ä¸ªï¼ˆæˆ‘è¿˜ç”¨äº† â€“no-merges é€‰é¡¹ä»¥éšè—åˆå¹¶æäº¤ï¼‰Gitå‚è€ƒæ‰‹å†Œ:æ£€æŸ¥ä¸æ¯”è¾ƒï¼š $ git log --oneline --before={3.weeks.ago} --after={2010-04-18} --no-merges 5469e2d Git 1.7.1-rc2 d43427d Documentation/remote-helpers: Fix typos and improve language 272a36b Fixup: Second argument may be any arbitrary string b6c8d2d Documentation/remote-helpers: Add invocation section 5ce4f4e Documentation/urls: Rewrite to accomodate transport::address 00b84e9 Documentation/remote-helpers: Rewrite description 03aa87e Documentation: Describe other situations where -z affects git diff 77bc694 rebase-interactive: silence warning when no commits rewritten 636db2c t3301: add tests to use --format=&quot;%N&quot; åˆ†æ”¯ git branchåˆ—å‡ºå½“å‰é¡¹ç›®çš„å¯ç”¨åˆ†æ”¯ï¼Œå¹¶æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•å½“å‰åˆ†æ”¯ å‚æ•°&lt;åˆ†æ”¯å&gt;: åˆ›å»ºåˆ†æ”¯ git checkout &lt;åˆ†æ”¯å&gt; åˆ‡æ¢åˆ°å¯¹åº”åˆ†æ”¯ å‚æ•°-b åˆ›å»ºåˆ†æ”¯å¹¶ç«‹å³åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ git merge &lt;åˆ†æ”¯å&gt; åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ æ ‡ç­¾ git tag æ˜¾ç¤ºå½“å‰é¡¹ç›®çš„æ ‡ç­¾ å‚æ•°&lt;æ ‡ç­¾å&gt; ç»™æŸä¸ªå†å²è®°å½•æ‰“æ ‡ç­¾ å‚æ•°-a: æ·»åŠ æ³¨è§£ å‚æ•°&lt;SHA&gt;: æäº¤idå‰nä½å­—ç¬¦ï¼Œå¯é€šè¿‡git logè·å–ï¼Œnä½åŸºäºSHAå”¯ä¸€å°±è¡Œï¼ˆå»ºè®®5~7ä½ï¼‰ è¿œç¨‹ git remote åˆ—å‡ºè¿œç«¯åˆ«å-å‚æ•°-v: åˆ—å‡ºè¿œç«¯åˆ«ååŠé“¾æ¥ ä¸€èˆ¬ä¸€ä¸ªåˆ«åä¼šçœ‹åˆ°ä¸¤ä¸ªç›¸åŒçš„é“¾æ¥ï¼ˆfetchå’Œpushï¼‰åˆ†åˆ«æ˜¯è·å–å’Œæ¨é€çš„é“¾æ¥-add &lt;ä»“åº“åˆ«å&gt; &lt;ä»“åº“é“¾æ¥&gt;: ä¸ºé¡¹ç›®æ·»åŠ ä¸€ä¸ªæ–°çš„è¿œç«¯ä»“åº“ rm &lt;ä»“åº“åˆ«å&gt;: ä¸ºé¡¹ç›®åˆ é™¤ä¸€ä¸ªè¿œç«¯ä»“åº“åªæ˜¯æœ¬åœ°åˆ æ‰å’Œè¿œç«¯ä»“åº“çš„é“¾æ¥ï¼Œä¸ä¼šå¯¹è¿œç«¯ä»“åº“é€ æˆå½±å“ git fetch ä»è¿œç«¯ä»“åº“ä¸‹è½½æœ€æ–°çš„åˆ†æ”¯ä¸æ•°æ® git pull ä»è¿œç«¯ä»“åº“ä¸‹è½½æœ€æ–°æ•°æ®ï¼Œå¹¶å°è¯•åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ å‚æ•°&lt;ä»“åº“åˆ«å&gt;: ä»å“ªä¸ªä»“åº“æ‹‰å–æ›´æ–°ï¼Œé»˜è®¤ä¸ºorigin git pullå®é™…æ˜¯å…ˆgit fetchågit merge git push æ¨é€æ›´æ–° å‚æ•°&lt;ä»“åº“åˆ«å&gt; &lt;åˆ†æ”¯å&gt;: æ¨é€æ–°åˆ†æ”¯ä¸æ•°æ®åˆ°æŸä¸ªè¿œç«¯ä»“åº“ å‚æ•°&lt;ä»“åº“åˆ«å&gt; --all: æ¨é€æ‰€æœ‰åˆ†æ”¯ å‚æ•°&lt;ä»“åº“åˆ«å&gt; --tagsl: æ¨é€æ‰€æœ‰æ ‡ç­¾ å‚è€ƒèµ„æ–™ Git å‚è€ƒæ‰‹å†Œgit - ç®€æ˜“æŒ‡å—]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>æ•™ç¨‹</tag>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pipå¸¸ç”¨å‘½ä»¤]]></title>
    <url>%2F2015%2F01%2F01%2Fpip%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%2F</url>
    <content type="text"><![CDATA[åˆ—å‡ºå·²å®‰è£…çš„åŒ…pip freeze or pip list å¯¼å‡ºrequirements.txtpip freeze &gt; &lt;ç›®å½•&gt;/requirements.txt å®‰è£…åŒ…åœ¨çº¿å®‰è£…pip install &lt;åŒ…å&gt; æˆ– pip install -r requirements.txt 12345678# å®‰è£…1.9ç‰ˆæœ¬çš„djangopip install django==1.9# å®‰è£…ç‰ˆæœ¬å·å¤§äº1.9çš„djangoï¼Œæ³¨æ„æœ‰å¼•å·pip install &quot;django&gt;1.9&quot;pip install &quot;django&gt;=1.9&quot;pip install &quot;django&lt;1.9&quot;pip install &quot;django&lt;=1.9&quot;pip install &quot;django&gt;&lt;1.9&quot; requirements.txtå†…å®¹æ ¼å¼ä¸ºï¼š APScheduler==2.1.2 Django==1.5.4 MySQL-Connector-Python==2.0.1 MySQL-python==1.2.3 PIL==1.1.7 South==1.0.2 django-grappelli==2.6.3 django-pagination==1.0.7 å®‰è£…æœ¬åœ°å®‰è£…åŒ…pip install &lt;ç›®å½•&gt;/&lt;æ–‡ä»¶å&gt; æˆ– pip install --use-wheel --no-index --find-links=wheelhouse/ &lt;åŒ…å&gt; &lt;åŒ…å&gt;å‰æœ‰ç©ºæ ¼ å¯ç®€å†™ä¸º pip install --no-index -f=&lt;ç›®å½•&gt;/ &lt;åŒ…å&gt; å¸è½½åŒ…pip uninstall &lt;åŒ…å&gt; æˆ– pip uninstall -r requirements.txt å‡çº§åŒ…pip install -U &lt;åŒ…å&gt; å‡çº§pippip install -U pip æ˜¾ç¤ºåŒ…æ‰€åœ¨çš„ç›®å½•pip show -f &lt;åŒ…å&gt; æœç´¢åŒ…pip search &lt;æœç´¢å…³é”®å­—&gt; æŸ¥è¯¢å¯å‡çº§çš„åŒ…pip list -o ä¸‹è½½åŒ…è€Œä¸å®‰è£… pip install &lt;åŒ…å&gt; -d &lt;ç›®å½•&gt; æˆ– pip install -d &lt;ç›®å½•&gt; -r requirements.txt æ‰“åŒ…pip wheel &lt;åŒ…å&gt; æ›´æ¢å›½å†…pypié•œåƒå›½å†…pypié•œåƒ è±†ç“£ï¼šhttps://pypi.douban.com/simple ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ï¼šhttps://mirrors.ustc.edu.cn/pypi/web/simple/ æ¸…åå¤§å­¦TUNAï¼šhttps://pypi.tuna.tsinghua.edu.cn/simplehttps://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple/ æŒ‡å®šå•æ¬¡å®‰è£…æºpip install &lt;åŒ…å&gt; -i http://pypi.v2ex.com/simple æŒ‡å®šå…¨å±€å®‰è£…æºåœ¨unixå’Œmacosï¼Œé…ç½®æ–‡ä»¶ä¸ºï¼š$HOME/.pip/pip.confåœ¨windowsä¸Šï¼Œé…ç½®æ–‡ä»¶ä¸ºï¼š%HOME%\pip\pip.ini [global] timeout = 6000 index-url = http://pypi.douban.com/simple å‚è€ƒèµ„æ–™ pip documentation]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>å‘½ä»¤</tag>
        <tag>æ•™ç¨‹</tag>
        <tag>Python</tag>
        <tag>pip</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨Virtualenvåˆ›å»ºç‹¬ç«‹çš„Pythonè¿è¡Œç¯å¢ƒ]]></title>
    <url>%2F2015%2F01%2F01%2F%E4%BD%BF%E7%94%A8virtualenv%E5%88%9B%E5%BB%BA%E7%8B%AC%E7%AB%8B%E7%9A%84python%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%2F</url>
    <content type="text"><![CDATA[å‡†å¤‡å·¥ä½œ pythonç¯å¢ƒ pip å®‰è£…1pip install virtualenv æˆ–1pip install https://github.com/pypa/virtualenv/tarball/develop åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ1virtualenv myVE æŒ‡å®špythonè§£é‡Šå™¨ 1-p PYTHON_EXE, --python=PYTHON_EXE åˆ›å»ºè™šæ‹Ÿç¯å¢ƒæ—¶é»˜è®¤ä¼šè‡ªåŠ¨å®‰è£…setuptoolså’Œpip ä¸å®‰è£…setuptool 1--no--setuptools ä¸å®‰è£…pip 1--no--pip æ›´å¤šOptionsè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ å¯åŠ¨è™šæ‹Ÿç¯å¢ƒ Mac OS 12cd myVEsource ./bin/activate Windows 12cd myVEscripts\activate å¯åŠ¨æˆåŠŸåå¯ä»¥åœ¨å¼€å¤´æ˜¾ç¤ºâ€(myVE)â€ï¼Œè¯´æ˜å·²ç»è¿›å…¥åˆšåˆšåˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒäº† é€€å‡º1deactivate virtualenvwrapperå®‰è£… Virtaulenvwrapperæ˜¯virtualenvçš„æ‰©å±•åŒ…ï¼Œç”¨äºæ›´æ–¹ä¾¿ç®¡ç†è™šæ‹Ÿç¯å¢ƒï¼Œå®ƒå¯ä»¥åšï¼š å°†æ‰€æœ‰è™šæ‹Ÿç¯å¢ƒæ•´åˆåœ¨ä¸€ä¸ªç›®å½•ä¸‹ ç®¡ç†ï¼ˆæ–°å¢ï¼Œåˆ é™¤ï¼Œå¤åˆ¶ï¼‰è™šæ‹Ÿç¯å¢ƒ åˆ‡æ¢è™šæ‹Ÿç¯å¢ƒ 1pip install virtualenvwrapper Windowsä¸‹è¿˜éœ€é¢å¤–å®‰è£…virtualenvwrapper-win1pip install virtualenvwrapper-win ubuntuéœ€è¦å°†ä¸‹é¢è¿™å¥åŠ å…¥åˆ°~/.bashrcé‡Œé¢123if [ -f /usr/local/bin/virtualenvwrapper.sh ]; then source /usr/local/bin/virtualenvwrapper.shfi åŠ å…¥åéœ€è¦é‡å¯æ‰èƒ½ç”Ÿæ•ˆï¼Œå¦‚æœæƒ³è¦ç«‹å³ç”Ÿæ•ˆï¼Œè¾“å…¥å‘½ä»¤1source ~/.bashrc å¸¸ç”¨å‘½ä»¤éƒ¨åˆ†å‘½ä»¤åœ¨windowsä¸‹æ— æ•ˆ workon myEnv: åˆ‡æ¢è™šæ‹Ÿç¯å¢ƒ mkvirtualenv: æ–°å»ºå·¥ä½œç¯å¢ƒ rmvirtualenv: åˆ é™¤å·¥ä½œç¯å¢ƒ cdproject: åˆ‡æ¢åˆ°å·¥ç¨‹ç›®å½• workon/lsvirtualenv: åˆ—å‡ºæ‰€æœ‰è™šæ‹Ÿç¯å¢ƒ deactivate: é€€å‡ºè™šæ‹Ÿç¯å¢ƒ cpvirtualenv [source] [dest] å¤åˆ¶ä¸€ä»½è™šæ‹Ÿç¯å¢ƒã€‚ cdvirtualenv [subdir] æŠŠå½“å‰å·¥ä½œç›®å½•è®¾ç½®ä¸ºæ‰€åœ¨çš„ç¯å¢ƒç›®å½•ã€‚ cdsitepackages [subdir] æŠŠå½“å‰å·¥ä½œç›®å½•è®¾ç½®ä¸ºæ‰€åœ¨ç¯å¢ƒçš„sitepackagesè·¯å¾„ã€‚ add2virtualenv [dir] [dir] æŠŠæŒ‡å®šçš„ç›®å½•åŠ å…¥å½“å‰ä½¿ç”¨çš„ç¯å¢ƒçš„pathä¸­ï¼Œè¿™å¸¸ä½¿ç”¨äºåœ¨å¤šä¸ªprojecté‡Œé¢åŒæ—¶ä½¿ç”¨ä¸€ä¸ªè¾ƒå¤§çš„åº“çš„æƒ…å†µã€‚ toggleglobalsitepackages -q æ§åˆ¶å½“å‰çš„ç¯å¢ƒæ˜¯å¦ä½¿ç”¨å…¨å±€çš„sitepackagesç›®å½•ã€‚ å‚è€ƒèµ„æ–™https://virtualenv.pypa.io/en/latest/ http://virtualenvwrapper.readthedocs.org/en/latest/ https://github.com/davidmarble/virtualenvwrapper-win]]></content>
      <categories>
        <category>ç¨‹åºçŒ¿</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>Virtualenv</tag>
        <tag>virtualenvwrapper</tag>
        <tag>ç‹¬ç«‹</tag>
        <tag>è™šæ‹Ÿç¯å¢ƒ</tag>
        <tag>requirements</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”µå½±ã€Šå°é»„äººã€‹ä¸­æ–‡é¢„å‘Šç‰‡]]></title>
    <url>%2F2014%2F11%2F09%2F%E7%94%B5%E5%BD%B1%E3%80%8A%E5%B0%8F%E9%BB%84%E4%BA%BA%E3%80%8B%E4%B8%AD%E6%96%87%E9%A2%84%E5%91%8A%E7%89%87%2F</url>
    <content type="text"><![CDATA[å¯¼æ¼”: å‡¯å°”Â·å·´å°”è¾¾ / çš®åŸƒå°”Â·ç§‘èŠ¬ç¼–å‰§: å¸ƒè±æ©Â·æ—å¥‡ä¸»æ¼”: è¿ˆå…‹å°”Â·åŸºé¡¿ / æ¡‘å¾·æ‹‰Â·å¸ƒæ´›å…‹ / ä¹”æ©Â·å“ˆå§† / å‡¯è’‚Â·ç±³å…‹æ¾ / çœŸç”°å¹¿ä¹‹ / çå¦®å¼—Â·æ¡‘å¾·æ–¯ / çš®åŸƒå°”Â·ç§‘èŠ¬ / å…‹é‡Œæ–¯Â·é›·çº³å¾· / Dave Rosenbaumç±»å‹: å–œå‰§ / åŠ¨ç”» / å®¶åº­åˆ¶ç‰‡å›½å®¶/åœ°åŒº: ç¾å›½è¯­è¨€: è‹±è¯­ä¸Šæ˜ æ—¥æœŸ: 2015-07-10(ç¾å›½)åˆå: å°é»„äººå¤§ç”µå½±è±†ç“£é“¾æ¥: å°é»„äººé¢„å‘Šç‰ˆ:]]></content>
      <categories>
        <category>å½±è§†</category>
      </categories>
      <tags>
        <tag>ç”µå½±</tag>
        <tag>å°é»„äºº</tag>
        <tag>é¢„å‘Šç‰‡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GitHub Pages/GitCafe Pagesç»‘å®šè‡ªå®šä¹‰åŸŸå]]></title>
    <url>%2F2014%2F11%2F09%2FGithub-Pages-Gitcafe-Pages%E7%BB%91%E5%AE%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D%2F</url>
    <content type="text"><![CDATA[æ›´æ–°è®°å½•2015-01-01 æ›´æ–° GitCafe-Page IPåœ°å€2014-11-09 åˆç¨¿ è™½ç„¶GitHub Pageså’ŒGitCafe Pagesé»˜è®¤ä¸ºæ¯ä¸ªç”¨æˆ·åˆ†é…äº†ä¸€ä¸ªäºŒçº§åŸŸåï¼ˆGitHubä¸ºusername.github.ioæˆ–username.github.com,GitCafeä¸ºusername.gitcafe.comï¼‰ï¼Œä½†å¦‚æœä½ å¯¹è¿™ä¸ªäºŒçº§åŸŸåä¸æ»¡æ„ä¹Ÿå¯ä»¥ç”³è¯·ä¸€ä¸ªè‡ªå·±çš„åŸŸåè¿›è¡Œç»‘å®šã€‚ä¸‹é¢å°±è¯´è¯´GitHubå’ŒGitCafeçš„ç»‘å®šè¿‡ç¨‹ã€‚ å‡†å¤‡å·¥ä½œ åŸŸåï¼ˆä¾‹ï¼šiblogc.comï¼‰ ä¸€ä¸ªGitHub Pages/GitCafe Pages GitHub åœ¨repoç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºCNAMEçš„æ–‡ä»¶ï¼ˆæ— åç¼€ï¼‰ æ‰“å¼€CNAMEï¼Œåœ¨é‡Œé¢å†™å…¥ä½ è¦ç»‘å®šçš„åŸŸå 1)å¦‚æœä½ ç»‘å®šçš„æ˜¯äºŒçº§åŸŸåï¼Œè¯·åœ¨åŸŸåç®¡ç†é‡Œæ·»åŠ ä¸€æ¡CNAMEè®°å½•ï¼ŒæŒ‡å‘username.github.ioæˆ–username.github.com 2)å¦‚æœä½ ç»‘å®šçš„æ˜¯é¡¶çº§åŸŸåï¼Œè¯·åœ¨åŸŸåç®¡ç†é‡Œæ·»åŠ ä¸€æ¡Aè®°å½•ï¼ŒæŒ‡å‘103.245.222.133 è¯·åœ¨åŸŸåç®¡ç†é‡Œæ·»åŠ ä¸€æ¡CNAMEè®°å½•ï¼ŒæŒ‡å‘username.github.io ç­‰å¾…ç”Ÿæ•ˆ GitCafe æ‰“å¼€ä½ è‡ªå·±çš„gitcafe pagesé¡¹ç›®ï¼Œ è¿›å…¥ é¡¹ç›®ç®¡ç†&gt;&gt;è‡ªå®šä¹‰åŸŸåï¼Œåœ¨è¿™é‡Œæ·»åŠ ä½ è¦ç»‘å®šçš„åŸŸåå°±å¯ä»¥ï¼Œæ¯”å¦‚æˆ‘é…ç½®äº†é¡¶çº§åŸŸåiblogc.comï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥è®¾ç½®äºŒçº§åŸŸåï¼‰ QQæˆªå›¾20141109181543.png) åœ¨åŸŸåç®¡ç†é‡Œæ·»åŠ ä¸€æ¡CNAMEè®°å½•ï¼Œè®°å½•å€¼ä¸ºgitcafe.ioï¼Œå¦‚æœæ‚¨çš„åŸŸåæ³¨å†Œå•†ä¸æä¾›CNAMEè®°å½•é€‰é¡¹ï¼Œè¯·å°†Aè®°å½•å€¼ä¿®æ”¹ä¸º 207.226.141.135(IPåœ°å€æˆªæ­¢2015-01-01æœ‰æ•ˆï¼Œå¦‚å¤±æ•ˆï¼Œè¯·ä»¥å®˜æ–¹è¯´æ˜ä¸ºå‡†)ã€‚ ç­‰å¾…ç”Ÿæ•ˆ]]></content>
      <categories>
        <category>ç½‘ç«™</category>
      </categories>
      <tags>
        <tag>åŸŸå</tag>
        <tag>GitHub</tag>
        <tag>GitCafe</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2014%2F09%2F15%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in trobuleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
  </entry>
</search>
